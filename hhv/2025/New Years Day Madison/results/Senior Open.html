<!DOCTYPE html>
<html>
<!--
Html Template for Race Animation.
Generated from CrossMgr software.
Copyright 2011-2015, Edward Sitarski
For details, see sites.google.com/site/CrossMgrSoftware
-->
<head>
<meta charset="UTF-8">
<link rel="icon" type="image/png" href="data:image/png;base64,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" />
<meta name="author" content="Edward Sitarski">
<meta name="copyright" content="Edward Sitarski">
<meta name="generator" content="CrossMgr">  
<meta name="keywords" content="CrossMgr, Cycling, Race, Results">
<!-- Meta -->
<title id="idTitle">New Years Day Madison-Senior Open - Starting 13:45:00 01/01/26</title>	<!-- Don't change this text! -->
<style type="text/css">
body { font-family: sans-serif; }
#idRaceName {
font-size: 200%;
font-weight: bold;
}
#idImgHeader {
box-shadow: 4px 4px 4px #888888;
}
#detailTitle {
font-size: 110%;
font-weight: bold;
}
input[type=range]::-ms-tooltip {
display: none;
}
.smallfont	{ font-size: 75%; }
.bigfont	{ font-size: 120%; }
.biggerFont	{ font-size: 130%; }
.hidden { display: none; }
div label input {
margin-right:220px;
}
#buttongroup {
margin:4px;   
float:left;
}
#buttongroup label {
float:left;
margin:4px;
background-color:#EFEFEF;
border-radius:4px;
border:1px solid #D0D0D0;
overflow:auto;
cursor: pointer;
}
#buttongroup label span {
text-align:center;
padding:8px 8px;
display:block;
}
#buttongroup label input {
position:absolute;
top:-20px;
}
#buttongroup input:checked + span {
background-color:#404040;
color:#F7F7F7;
}
#buttongroup .green {
background-color:#7FE57F;
color:#333;
}
table.results {
font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
border-collapse:collapse;
}
table.results td, table.results th {
font-size:1em;
padding:3px 7px 2px 7px;
text-align: right;
}
table.results th {
font-size:1.1em;
text-align:right;
padding-top:5px;
padding-bottom:4px;
background-color:#7FE57F;
color:#000000;
}
table.results tr.odd {
color:#000000;
background-color:#EAF2D3;
}
table.results tr:hover {
color:#000000;
background-color:#FFFFCC;
}
table.results tr.odd:hover {
color:#000000;
background-color:#FFFFCC;
}
table.results tr td.fastest {
background-image: linear-gradient(
/* #FF6620, #FFAA20 25%, #FF6620 */
#00EE00, #00FF00 25%, #00EE00
);
}
table.results tr td.fastest-lap {
background-image: linear-gradient(
/* #FF6A7F, #FF9EAF 25%, #FF6A7F */
#FF8840, #FFCC40 25%, #FF8840
);
}
table.results tr td.slowest-lap {
background-image: linear-gradient(
#4496F7, #9CC7FB 25%, #4496F7
);
}
table.results tr td.highlight {
font-size: 120%;
font-weight: bold;
}
table.results td {
border-top:1px solid #98BF21;
}
table.results td.noborder {
border-top:0px solid #98BF21;
}
table.results td#idNonNumeric, table.results th#idNonNumeric {
text-align:left;
}
table.results tr td.same-value {
text-align:center;
}
.flag {
border: 1px solid #CCC;
}
hr { clear: both; }
hr.invisible { clear: both; visibility: hidden; }
@media print { .noprint { display: none; } }
</style>
<!-- Google Analytics -->
<script type="text/javascript">
/* !!! payload begin !!! */
var payload = {"raceName":"2026-01-01-New Years Day Madison-Senior Open-r3-","infoFields":["LastName","FirstName","Name","Team","City","State","Prov","Region","Nat.","Category","Age","Gender","License","NatCode","UCIID","UCICode","CustomCategory1","CustomCategory2","CustomCategory3","CustomCategory4","CustomCategory5","CustomCategory6","CustomCategory7","CustomCategory8","CustomCategory9"],"organizer":"Pete Noble","reverseDirection":false,"finishTop":false,"isTimeTrial":false,"winAndOut":false,"rfid":true,"primes":[],"raceNameText":"New Years Day Madison-Senior Open","raceDate":"2026-01-01","raceScheduledStart":"2026-01-01 13:45","raceTimeZone":"Europe/London","raceAddress":"Herne Hill Velodrome, MyStateProv, UK","raceIsRunning":false,"raceIsUnstarted":false,"raceIsFinished":true,"lapDetails":{},"hideDetails":true,"showCourseAnimation":true,"licenseLinkTemplate":"","roadRaceFinishTimes":false,"estimateLapsDownFinishTime":false,"email":"admin@londonxleagueresults.co.uk","version":"CrossMgr 3.1.72-private","raceNotes":"","raceStartTime":49709.0,"timestamp":["Thu Jan  1 19:57:42 2026",4992.420306],"data":{"147":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"George Harvey","":"","LastName":"ALEX HARVEY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.93231,19.93186,20.59107,20.45584,20.44635,20.00045,20.22475,19.92934,20.1646,20.37828,20.2413,20.3585],"lastInterp":false,"lastTime":4018.426073,"lastTimeOrig":4018.426073,"raceCat":"SENIOR (Open)","raceSpeeds":[17.93231,18.87929,19.41736,19.66697,19.81805,19.84822,19.90115,19.90467,19.93322,19.97685,20.0006,20.02995],"raceTimes":[0.0,374.04031,710.55711,1036.30049,1364.19737,1692.24638,2027.60908,2359.25243,2695.81174,3028.44452,3357.58928,3688.96148,4018.42607],"speed":"20.03 km/h","status":"Finisher"},"146":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Daniel Hall","":"","LastName":"ISAAC STARMER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[19.86149,20.07772,20.46792,19.71182,20.24006,20.26851,20.2547,19.29252,19.99967,19.51286,20.30465,19.09191],"lastInterp":false,"lastTime":4041.678446,"lastTimeOrig":4041.678446,"raceCat":"SENIOR (Open)","raceSpeeds":[19.86149,19.96902,20.13259,20.02572,20.06823,20.10133,20.1231,20.01539,20.01364,19.96241,19.99304,19.91471],"raceTimes":[0.0,337.7091,671.78125,999.48455,1339.7579,1671.15039,2002.07774,2333.23077,2680.89949,3016.27533,3360.01816,3690.35664,4041.67845],"speed":"19.91 km/h","status":"Finisher"},"106":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Max Avery","":"","LastName":"KIERAN JARVIS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[19.88549,19.15392,19.70768,19.02394,20.42175,19.52179,20.37978,19.50012,19.86744,19.52892,19.72148,19.39749],"lastInterp":false,"lastTime":4092.487371,"lastTimeOrig":4092.487371,"raceCat":"SENIOR (Open)","raceSpeeds":[19.88549,19.51285,19.57737,19.43601,19.62547,19.60812,19.71476,19.68767,19.70748,19.68948,19.69239,19.66747],"raceTimes":[0.0,337.30146,687.48588,1027.83062,1380.40765,1708.85182,2052.43748,2381.55808,2725.52539,3063.13338,3406.59348,3746.70007,4092.48737],"speed":"19.67 km/h","status":"Finisher"},"159":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Ethan Lulham","":"","LastName":"GEOFFREY LULHAM","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.97422,20.05324,19.11365,20.43012,19.3294,19.27813,19.22204,19.45661,19.32538,19.85348,18.95705,19.77249],"lastInterp":false,"lastTime":4133.799635,"lastTimeOrig":4133.799635,"raceCat":"SENIOR (Open)","raceSpeeds":[18.97422,19.49881,19.36871,19.62359,19.56404,19.5158,19.47328,19.4712,19.45489,19.49403,19.44396,19.47092],"raceTimes":[0.0,353.50097,687.98087,1038.90313,1367.21282,1714.21824,2062.14652,2411.08996,2755.8266,3102.90408,3440.74937,3794.57053,4133.79964],"speed":"19.47 km/h","status":"Finisher"},"104":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Russell Alford","":"","LastName":"PETER MOLLISON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[19.14339,18.6874,19.59821,18.57602,19.42976,19.07101,18.52699,18.90386,19.35661,18.84842,19.02665,18.07018],"lastInterp":false,"lastTime":4252.490372,"lastTimeOrig":4252.490372,"raceCat":"SENIOR (Open)","raceSpeeds":[19.14339,18.91265,19.13578,18.9927,19.07853,19.07728,18.99667,18.98502,19.0256,19.00773,19.00945,18.92747],"raceTimes":[0.0,350.37705,709.3036,1051.5494,1412.62821,1757.84122,2109.54815,2471.58244,2826.39909,3172.91672,3528.77717,3881.30404,4252.49037],"speed":"18.93 km/h","status":"Finisher"},"134":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Thomas Eke","":"","LastName":"ASHLEY TOWEY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.46635,18.68615,19.42135,18.52649,19.6143,18.37382,19.0222,18.51362,19.45291,18.3617,19.34035,18.50507],"lastInterp":false,"lastTime":4314.986954,"lastTimeOrig":4314.986954,"raceCat":"SENIOR (Open)","raceSpeeds":[16.46635,17.50616,18.10116,18.20565,18.47096,18.4547,18.53369,18.53118,18.62926,18.60215,18.66692,18.65333],"raceTimes":[0.0,407.34009,766.29075,1111.65321,1473.69723,1815.66236,2180.7146,2533.3239,2895.61966,3240.42181,3605.71504,3952.52392,4314.98695],"speed":"18.65 km/h","status":"Finisher"},"110":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Craigh beckham","":"","LastName":"KEANE BECKHAM","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.64598,19.03981,19.77683,16.43566,19.20941,17.33046,19.67357,18.2354,19.34748,18.39829,19.37336,17.24414],"lastInterp":false,"lastTime":4371.041994,"lastTimeOrig":4371.041994,"raceCat":"SENIOR (Open)","raceSpeeds":[17.64598,18.31642,18.77865,18.13243,18.33806,18.16207,18.36362,18.34749,18.45347,18.44794,18.5284,18.41411],"raceTimes":[0.0,380.10949,732.39275,1071.54742,1479.64822,1828.82106,2215.85087,2556.78564,2924.609,3271.29006,3635.85682,3982.07472,4371.04199],"speed":"18.41 km/h","status":"Finisher"},"119":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Ben Cavers","":"","LastName":"SIMON OSBORN","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.37325,17.87927,19.28568,17.97343,18.95082,18.35736,18.80898,18.26896,18.94605,18.05084,18.70747,18.54166],"lastInterp":false,"lastTime":4371.174424,"lastTimeOrig":4371.174424,"raceCat":"SENIOR (Open)","raceSpeeds":[17.37325,17.62263,18.14417,18.10118,18.26496,18.28029,18.35399,18.34332,18.40839,18.372,18.402,18.41356],"raceTimes":[0.0,386.07657,761.22641,1109.01851,1482.20305,1836.14046,2201.52003,2558.12656,2925.2742,3279.30081,3650.88494,4009.42654,4371.17442],"speed":"18.41 km/h","status":"Finisher"},"142":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Aaron Green","":"","LastName":"MATT HOLMES","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.38363,17.40151,18.94767,17.36687,18.14057,17.70444,18.97872,17.58399,19.09207,18.02248,19.66577],"lastInterp":false,"lastTime":4038.547467,"lastTimeOrig":4038.547467,"raceCat":"SENIOR (Open)","raceSpeeds":[18.38363,17.87909,18.22164,18.00015,18.02806,17.9733,18.11036,18.04285,18.1537,18.14049,18.26931],"raceTimes":[0.0,364.85759,750.30725,1104.30349,1490.52203,1860.2682,2239.12271,2592.53984,2973.9895,3325.30848,3697.47736,4038.54747],"speed":"18.27 km/h","status":"Finisher"},"169":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Alfred Pearson","":"","LastName":"WILFRED SINCLAIR","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.4288,18.52525,18.57908,17.31286,18.6798,18.31684,18.67586,18.353,18.14559,17.90847,18.39874],"lastInterp":false,"lastTime":4053.972385,"lastTimeOrig":4053.972385,"raceCat":"SENIOR (Open)","raceSpeeds":[17.4288,17.96031,18.16193,17.94195,18.08482,18.12308,18.20004,18.21902,18.21083,18.18014,18.19979],"raceTimes":[0.0,384.8461,746.91431,1107.93356,1495.35692,1854.42963,2220.6176,2579.76602,2945.23245,3314.87636,3689.41445,4053.97239],"speed":"18.20 km/h","status":"Finisher"},"162":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"James Malone","":"","LastName":"DAVID WORTHINGTON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.34094,17.60814,18.65862,16.60999,18.7039,18.24566,18.35608,18.41526,18.73649,18.76492,18.61251],"lastInterp":false,"lastTime":4062.68337,"lastTimeOrig":4062.68337,"raceCat":"SENIOR (Open)","raceSpeeds":[17.34094,17.47352,17.85146,17.52402,17.74793,17.82899,17.90243,17.96497,18.04754,18.1168,18.16077],"raceTimes":[0.0,386.796,767.72236,1127.20263,1531.02008,1889.63006,2257.24663,2622.65172,2986.88247,3344.8687,3702.31251,4062.68337],"speed":"18.16 km/h","status":"Finisher"},"151":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Ben Howlett","":"","LastName":"SIMON HOWLETT","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.89597,17.43985,19.26914,17.29687,19.73533,16.97702,19.3073,17.32119,18.07566,17.73668,18.16024],"lastInterp":false,"lastTime":4063.619399,"lastTimeOrig":4063.619399,"raceCat":"SENIOR (Open)","raceSpeeds":[18.89597,18.13873,18.5005,18.18416,18.47458,18.2069,18.35636,18.22025,18.20407,18.15622,18.15659],"raceTimes":[0.0,354.96495,739.56712,1087.65775,1475.43913,1815.30704,2210.39426,2557.79688,2945.03393,3316.10777,3694.27366,4063.6194],"speed":"18.16 km/h","status":"Finisher"},"174":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Jack Sedgwick","":"","LastName":"CLIVE SPICER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.35253,18.93572,17.15151,19.34739,16.14086,18.69163,18.26291,19.4809,18.53094,18.21022,18.28645],"lastInterp":false,"lastTime":4085.207311,"lastTimeOrig":4085.207311,"raceCat":"SENIOR (Open)","raceSpeeds":[16.35253,17.54958,17.41485,17.86087,17.48815,17.67785,17.75912,17.95752,18.01947,18.03837,18.06064],"raceTimes":[0.0,410.17545,764.39511,1155.46294,1502.14569,1917.70019,2276.54568,2643.81502,2988.12176,3350.07897,3718.4109,4085.20731],"speed":"18.06 km/h","status":"Finisher"},"167":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Ben Osborne","":"","LastName":"AIDAN PLAIL","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.22781,17.82219,18.70063,17.77649,18.73091,17.66322,18.51212,17.50505,18.1693,17.20577,19.09321],"lastInterp":false,"lastTime":4095.298908,"lastTimeOrig":4095.298908,"raceCat":"SENIOR (Open)","raceSpeeds":[17.22781,17.51996,17.8966,17.86642,18.03287,17.97019,18.04566,17.97627,17.99751,17.91507,18.01614],"raceTimes":[0.0,389.33584,765.68724,1124.35986,1501.67883,1859.77171,2239.51027,2601.8354,2985.00506,3354.16646,3744.00105,4095.29891],"speed":"18.02 km/h","status":"Finisher"},"179":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"George Metcalfe","":"","LastName":"EDWARD WENLOCK","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.84475,18.06938,18.92966,16.68385,18.98442,16.94496,18.64018,16.6984,19.10985,16.67502,18.48732],"lastInterp":false,"lastTime":4110.202535,"lastTimeOrig":4110.202535,"raceCat":"SENIOR (Open)","raceSpeeds":[18.84475,18.44893,18.60643,18.08541,18.25834,18.02548,18.1108,17.92132,18.04603,17.89887,17.95081],"raceTimes":[0.0,355.92961,727.13238,1081.46551,1483.49524,1836.80628,2232.64106,2592.47698,2994.15657,3345.14858,3747.39135,4110.20254],"speed":"17.95 km/h","status":"Finisher"},"117":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Gino Casale","":"","LastName":"AIDAN CLARK","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[19.43194,15.02642,19.95133,15.43772,20.01908,14.98504,20.01726,16.1248,20.15455,16.6914,20.42205],"lastInterp":false,"lastTime":4159.011244,"lastTimeOrig":4159.011244,"raceCat":"SENIOR (Open)","raceSpeeds":[19.43194,16.94756,17.84301,17.17405,17.67647,17.16271,17.51962,17.33222,17.60616,17.51019,17.74014],"raceTimes":[0.0,345.1742,791.54836,1127.73674,1562.21842,1897.26905,2344.87586,2679.95701,3095.92532,3428.72396,3830.57189,4159.01124],"speed":"17.74 km/h","status":"Finisher"},"156":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Mattias Kunz","":"","LastName":"YUZO SAITO","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.56801,16.52761,17.42728,17.11081,18.88318,17.05808,18.73088,16.72334,18.33262,16.98867,18.83314],"lastInterp":false,"lastTime":4168.370368,"lastTimeOrig":4168.370368,"raceCat":"SENIOR (Open)","raceSpeeds":[18.56801,17.48849,17.46804,17.37734,17.65898,17.55591,17.71466,17.58436,17.66447,17.59448,17.70031],"raceTimes":[0.0,361.23455,767.06498,1151.94469,1543.94293,1899.1483,2292.35821,2650.45163,3051.53203,3417.4048,3812.22121,4168.37037],"speed":"17.70 km/h","status":"Finisher"},"130":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Andrew Crichton","":"","LastName":"MATHEW HARDCASTLE","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.4333,17.30551,17.85099,17.72763,17.8632,17.11015,18.03441,16.74966,17.958,16.69535,18.03999],"lastInterp":false,"lastTime":4236.789561,"lastTimeOrig":4236.789561,"raceCat":"SENIOR (Open)","raceSpeeds":[16.4333,16.85813,17.17658,17.3111,17.41878,17.36657,17.45893,17.367,17.43074,17.3543,17.41447],"raceTimes":[0.0,408.15938,795.74728,1171.49147,1549.85039,1925.33765,2317.351,2689.27358,3089.72387,3463.22908,3864.98205,4236.78956],"speed":"17.41 km/h","status":"Finisher"},"129":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Adam Crawford","":"","LastName":"TOM MCMAHON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.23852,18.59053,18.47157,18.39384,18.07026,18.00166,18.12752,13.34427,18.23969,17.30473,18.16529],"lastInterp":false,"lastTime":4242.651847,"lastTimeOrig":4242.651847,"raceCat":"SENIOR (Open)","raceSpeeds":[16.23852,17.33511,17.69807,17.86703,17.90731,17.92296,17.9519,17.20914,17.31786,17.31654,17.39041],"raceTimes":[0.0,413.05513,773.85208,1136.97255,1501.62764,1872.81248,2245.41176,2615.42399,3118.06694,3485.80368,3873.40895,4242.65185],"speed":"17.39 km/h","status":"Finisher"},"125":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Charles Codrington","":"","LastName":"STUART LOCKYEAR","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.17351,17.42427,17.64779,16.92417,17.68723,16.81242,17.64483,16.78774,17.70226,17.06214,17.89129],"lastInterp":false,"lastTime":4256.674805,"lastTimeOrig":4256.674805,"raceCat":"SENIOR (Open)","raceSpeeds":[17.17351,17.29798,17.41303,17.28819,17.36655,17.27167,17.32401,17.25511,17.30367,17.27921,17.33312],"raceTimes":[0.0,390.56705,775.51326,1155.58385,1551.905,1931.12801,2330.08335,2710.21774,3109.75958,3488.66066,3881.77693,4256.6748],"speed":"17.33 km/h","status":"Finisher"},"132":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Isaac Dutton","":"","LastName":"EBEN HASKEL HULLEY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.70481,18.59835,16.78,18.78264,16.80839,17.31879,16.9488,18.52641,17.04313,18.06934,16.39603],"lastInterp":false,"lastTime":4262.548562,"lastTimeOrig":4262.548562,"raceCat":"SENIOR (Open)","raceSpeeds":[15.70481,17.02954,16.94554,17.37028,17.25492,17.26553,17.21956,17.37274,17.33549,17.40618,17.30924],"raceTimes":[0.0,427.09249,787.73765,1187.46375,1544.57042,1943.62141,2330.91208,2726.65719,3088.70282,3482.25767,3853.46132,4262.54856],"speed":"17.31 km/h","status":"Finisher"},"182":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Philip Murrell","":"","LastName":"OLIVER COOMBER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.71771,17.49244,16.53221,18.01636,17.15282,18.37091,17.05723,18.26253,16.7122,18.44238,17.06649],"lastInterp":false,"lastTime":4262.914295,"lastTimeOrig":4262.914295,"raceCat":"SENIOR (Open)","raceSpeeds":[15.71771,16.55765,16.54916,16.89309,16.94441,17.16657,17.15087,17.28237,17.2171,17.33225,17.30775],"raceTimes":[0.0,426.74204,810.188,1215.90543,1588.20067,1979.23869,2344.34892,2737.57836,3104.85534,3506.20309,3869.89823,4262.91429],"speed":"17.31 km/h","status":"Finisher"},"133":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Miles Dutton","":"","LastName":"ALEX DUTTON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.567,16.87435,17.42509,17.68346,17.59085,17.34594,17.76325,17.4477,17.39765,17.76303,17.77406],"lastInterp":false,"lastTime":4263.12183,"lastTimeOrig":4263.12183,"raceCat":"SENIOR (Open)","raceSpeeds":[15.567,16.19433,16.5848,16.84646,16.99026,17.04852,17.14709,17.18409,17.20756,17.26154,17.30691],"raceTimes":[0.0,430.87339,828.36457,1213.29259,1592.59655,1973.89729,2360.58183,2738.18193,3122.61114,3508.1464,3885.75127,4263.12183],"speed":"17.31 km/h","status":"Finisher"},"111":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Lucy Benezet Minns","":"","LastName":"ESME WILEY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.45196,17.52624,17.21373,17.99937,16.60082,18.00144,17.30729,18.04826,15.21565,15.03446,16.07618],"lastInterp":false,"lastTime":4392.718141,"lastTimeOrig":4392.718141,"raceCat":"SENIOR (Open)","raceSpeeds":[16.45196,16.97212,17.0519,17.27929,17.13919,17.27712,17.28142,17.3737,17.10415,16.87189,16.79631],"raceTimes":[0.0,407.69643,790.40298,1180.05742,1552.70413,1956.74467,2329.34843,2716.89642,3088.53372,3529.35638,3975.4918,4392.71814],"speed":"16.80 km/h","status":"Finisher"},"140":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Clive Goadby","":"","LastName":"ANDY PARRY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.53274,16.95344,16.57786,17.13038,16.57646,17.05945,16.50229,17.31609,16.56947,17.30152,16.36132],"lastInterp":false,"lastTime":4417.664582,"lastTimeOrig":4417.664582,"raceCat":"SENIOR (Open)","raceSpeeds":[15.53274,16.21202,16.33216,16.52466,16.535,16.62016,16.60321,16.6891,16.67572,16.73626,16.70146],"raceTimes":[0.0,431.82376,827.46055,1232.06068,1623.61092,2028.2452,2421.42342,2827.87635,3215.22737,3620.03233,4007.70962,4417.66458],"speed":"16.70 km/h","status":"Finisher"},"154":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Chad King","":"","LastName":"MARTIN TREACHER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.58986,16.06686,16.97869,16.90892,17.32635,15.07791,17.76059,15.7857,17.7689,16.60976],"lastInterp":false,"lastTime":4055.272015,"lastTimeOrig":4055.272015,"raceCat":"SENIOR (Open)","raceSpeeds":[15.58986,15.82477,16.19158,16.36515,16.54876,16.28401,16.47974,16.38966,16.53225,16.53996],"raceTimes":[0.0,430.24149,847.7098,1242.75824,1639.43672,2026.55849,2471.40818,2849.06486,3273.96876,3651.44893,4055.27202],"speed":"16.54 km/h","status":"Finisher"},"163":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Damian Marlee","":"","LastName":"ANDREW POWERS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.76895,16.70111,16.48399,16.84375,16.243,17.00566,16.33084,16.67157,16.54915,16.50651],"lastInterp":false,"lastTime":4064.147766,"lastTimeOrig":4064.147766,"raceCat":"SENIOR (Open)","raceSpeeds":[15.76895,16.22165,16.30816,16.43884,16.3993,16.49734,16.47334,16.49786,16.50355,16.50384],"raceTimes":[0.0,425.35523,826.96952,1233.87378,1632.0872,2045.02842,2439.4504,2850.17057,3252.49658,3657.79878,4064.14777],"speed":"16.50 km/h","status":"Finisher"},"175":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Laura Senior","":"","LastName":"OLLIE SMITH","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.69256,15.1616,17.88656,15.06676,17.71161,15.46137,17.80831,15.24299,17.87318,16.02695],"lastInterp":false,"lastTime":4064.660061,"lastTimeOrig":4064.660061,"raceCat":"SENIOR (Open)","raceSpeeds":[17.69256,16.32959,16.81756,16.34279,16.59936,16.3982,16.58582,16.40517,16.55626,16.50176],"raceTimes":[0.0,379.10892,821.50335,1196.50024,1641.67933,2020.38038,2454.19754,2830.84225,3270.87439,3646.15213,4064.66006],"speed":"16.50 km/h","status":"Finisher"},"112":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Iain Boardman","":"","LastName":"ALF OWEN","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.3298,15.73346,17.15428,16.38789,17.21059,16.31719,17.0485,16.28719,17.56964,16.19459],"lastInterp":false,"lastTime":4066.127962,"lastTimeOrig":4066.127962,"raceCat":"SENIOR (Open)","raceSpeeds":[15.3298,15.52901,16.03543,16.12211,16.32865,16.32674,16.42609,16.40859,16.52997,16.49581],"raceTimes":[0.0,437.54023,863.85499,1254.85983,1664.15031,2053.87585,2464.93955,2858.37029,3270.19127,3651.95234,4066.12796],"speed":"16.50 km/h","status":"Finisher"},"108":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Bethany Barnett","":"","LastName":"FLORENCE BARNETT","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.89331,16.51853,16.9539,17.09586,16.87267,16.40249,16.23983,16.42321,16.49915,15.87996],"lastInterp":false,"lastTime":4072.848409,"lastTimeOrig":4072.848409,"raceCat":"SENIOR (Open)","raceSpeeds":[15.89331,16.19989,16.44366,16.602,16.65544,16.61274,16.55842,16.5414,16.53669,16.46859],"raceTimes":[0.0,422.02702,828.08045,1223.70646,1616.04739,2013.57814,2422.50429,2835.52611,3243.9363,3650.46668,4072.84841],"speed":"16.47 km/h","status":"Finisher"},"165":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Andrew Moss","":"","LastName":"SAM PEARCE","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.52484,14.78812,17.82238,15.2581,18.82908,15.33393,18.19137,14.90726,18.42621,14.88707],"lastInterp":false,"lastTime":4079.118464,"lastTimeOrig":4079.118464,"raceCat":"SENIOR (Open)","raceSpeeds":[17.52484,16.04059,16.59357,16.23826,16.69777,16.45386,16.68147,16.43694,16.6365,16.44327],"raceTimes":[0.0,382.737,836.30408,1212.65148,1652.24774,2008.47359,2445.89594,2814.60954,3264.5517,3628.56609,4079.11846],"speed":"16.44 km/h","status":"Finisher"},"120":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Trevor Child","":"","LastName":"PETER HALL","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.61423,15.51964,18.06861,15.91574,17.73489,15.48556,17.91937,15.56144,17.75682,15.32503],"lastInterp":false,"lastTime":4086.50408,"lastTimeOrig":4086.50408,"raceCat":"SENIOR (Open)","raceSpeeds":[15.61423,15.56679,16.32002,16.21704,16.49946,16.32136,16.53197,16.40408,16.54412,16.41355],"raceTimes":[0.0,429.57017,861.75836,1232.97711,1654.40943,2032.61332,2465.75279,2840.06323,3271.09055,3648.82746,4086.50408],"speed":"16.41 km/h","status":"Finisher"},"131":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Stephen Crispin","":"","LastName":"MAXIMILIAN DESANCHA","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.29456,16.41893,16.39972,15.67735,16.17614,16.06531,17.17691,16.50116,17.73716,16.94332],"lastInterp":false,"lastTime":4087.056259,"lastTimeOrig":4087.056259,"raceCat":"SENIOR (Open)","raceSpeeds":[15.29456,15.83682,16.02011,15.93302,15.98106,15.99504,16.15382,16.19644,16.35428,16.41134],"raceTimes":[0.0,438.54832,847.06483,1256.05992,1683.90047,2098.54853,2516.05707,2906.54661,3313.02737,3691.183,4087.05626],"speed":"16.41 km/h","status":"Finisher"},"161":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Jonathan Maher","":"","LastName":"ARTHUR TYE","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.39655,16.16024,16.67045,16.14029,16.59562,15.56318,16.9625,16.7985,16.98248,16.69787],"lastInterp":false,"lastTime":4095.131849,"lastTimeOrig":4095.131849,"raceCat":"SENIOR (Open)","raceSpeeds":[15.39655,15.76915,16.05856,16.07891,16.17966,16.07355,16.19479,16.26787,16.34429,16.37897],"raceTimes":[0.0,435.64355,850.69961,1253.05249,1668.62154,2072.78887,2503.76793,2899.19341,3298.47947,3693.43968,4095.13185],"speed":"16.38 km/h","status":"Finisher"},"150":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Barney Howard","":"","LastName":"ELLIOT HOWARD","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.90023,16.64838,16.96995,16.13421,16.00858,15.87594,16.7471,16.0114,16.69375,16.16024],"lastInterp":false,"lastTime":4113.457322,"lastTimeOrig":4113.457322,"raceCat":"SENIOR (Open)","raceSpeeds":[15.90023,16.26571,16.49387,16.40246,16.32214,16.24604,16.31578,16.2771,16.32236,16.306],"raceTimes":[0.0,421.84327,824.72953,1219.98143,1635.70711,2054.69539,2477.18413,2877.69565,3296.60993,3698.40125,4113.45732],"speed":"16.31 km/h","status":"Finisher"},"102":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"David Agnew","":"","LastName":"CAMPBELL KIDD","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.46719,15.43094,17.00803,15.8408,17.04244,16.05982,16.90938,16.05661,16.84768,16.23045],"lastInterp":false,"lastTime":4123.124548,"lastTimeOrig":4123.124548,"raceCat":"SENIOR (Open)","raceSpeeds":[15.46719,15.44905,15.93595,15.91206,16.12598,16.11491,16.22381,16.20272,16.27193,16.26777],"raceTimes":[0.0,433.65367,868.32609,1262.69299,1686.11905,2079.68984,2497.34107,2894.00869,3311.74351,3709.86404,4123.12455],"speed":"16.27 km/h","status":"Finisher"},"121":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Ken Chisholm","":"","LastName":"TOM OPENSHAW","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.24517,15.44419,15.84234,16.14109,16.04579,16.27465,15.79012,16.6165,16.01927,15.78576],"lastInterp":false,"lastTime":4215.412332,"lastTimeOrig":4215.412332,"raceCat":"SENIOR (Open)","raceSpeeds":[15.24517,15.34403,15.50662,15.66051,15.73608,15.82335,15.8186,15.91412,15.92573,15.91162],"raceTimes":[0.0,439.96911,874.26884,1297.65356,1713.20217,2131.21879,2543.35713,2968.14209,3371.80153,3790.5101,4215.41233],"speed":"15.91 km/h","status":"Finisher"},"176":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Matt Siviter","":"","LastName":"ANDREW PARSONS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.9908,13.73447,18.04456,14.76964,18.29444,13.15681,18.01556,14.41274,18.12816,15.11365],"lastInterp":false,"lastTime":4236.908958,"lastTimeOrig":4236.908958,"raceCat":"SENIOR (Open)","raceSpeeds":[16.9908,15.19008,16.03564,15.69922,16.15764,15.56592,15.87427,15.67557,15.91481,15.83089],"raceTimes":[0.0,394.76694,883.12997,1254.84342,1708.97822,2075.61452,2585.41948,2957.73133,3423.11171,3793.11097,4236.90896],"speed":"15.83 km/h","status":"Finisher"},"173":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Clement Reuter","":"","LastName":"MAX REUTER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.95882,16.89702,11.03391,16.48866,15.99821,17.32972,16.01527,17.28362,16.63397,16.66743],"lastInterp":false,"lastTime":4250.791326,"lastTimeOrig":4250.791326,"raceCat":"SENIOR (Open)","raceSpeeds":[15.95882,16.41452,14.11944,14.64553,14.89745,15.25428,15.35854,15.57539,15.68631,15.77919],"raceTimes":[0.0,420.2946,817.25261,1425.14292,1831.93199,2251.19182,2638.23828,3057.05133,3445.13009,3848.36552,4250.79133],"speed":"15.78 km/h","status":"Finisher"},"100":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Seun Aderibigbe","":"","LastName":"MONIKA ZAMOJSKA","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[16.3846,14.55539,17.57654,14.59743,16.867,14.70483,16.93722,14.35621,16.95016,14.89677],"lastInterp":false,"lastTime":4274.296832,"lastTimeOrig":4274.296832,"raceCat":"SENIOR (Open)","raceSpeeds":[16.3846,15.41592,16.07458,15.67796,15.90217,15.68925,15.85615,15.65174,15.7861,15.69242],"raceTimes":[0.0,409.37257,870.19188,1251.80318,1711.29527,2108.95959,2565.09567,2961.11131,3428.32416,3824.03767,4274.29683],"speed":"15.69 km/h","status":"Finisher"},"180":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Samuel Brown","":"","LastName":"CHRIS JENKINS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[13.65122,15.53524,14.61607,16.12534,16.00633,15.97539,16.09289,16.38482,15.95378,16.03685],"lastInterp":false,"lastTime":4301.69854,"lastTimeOrig":4301.69854,"raceCat":"SENIOR (Open)","raceSpeeds":[13.65122,14.53242,14.5602,14.92229,15.12719,15.26225,15.37562,15.49492,15.5446,15.59246],"raceTimes":[0.0,491.34109,923.09539,1382.00158,1797.95583,2217.0029,2636.86165,3053.65463,3463.0217,3883.44896,4301.69854],"speed":"15.59 km/h","status":"Finisher"},"128":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Nathan Cozens","":"","LastName":"MICHELLE KIMBLER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[17.55875,11.41156,20.94949,17.33613,14.43934,17.28399,13.25318,12.36134,17.20326,17.07953],"lastInterp":false,"lastTime":4360.754824,"lastTimeOrig":4360.754824,"raceCat":"SENIOR (Open)","raceSpeeds":[17.55875,13.83297,15.59933,16.00007,15.6615,15.91043,15.4674,14.99638,15.21322,15.38129],"raceTimes":[0.0,381.99787,969.77059,1289.941,1676.84422,2141.36732,2529.43783,3035.53558,3578.14732,3968.0388,4360.75482],"speed":"15.38 km/h","status":"Finisher"},"115":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Mark Brown","":"","LastName":"RICHARD LEWEY","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[14.00024,15.04798,15.59609,15.02544,15.27971,15.02175,16.09089,15.66762,16.05149,15.51215],"lastInterp":false,"lastTime":4382.003259,"lastTimeOrig":4382.003259,"raceCat":"SENIOR (Open)","raceSpeeds":[14.00024,14.50522,14.85148,14.89459,14.97005,14.97865,15.12803,15.19344,15.28422,15.30671],"raceTimes":[0.0,479.09213,924.82673,1354.89639,1801.29967,2240.27434,2686.78713,3103.632,3531.73812,3949.60626,4382.00326],"speed":"15.31 km/h","status":"Finisher"},"139":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Christopher Gatt","":"","LastName":"GRAEME STEWART","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.0674,14.25059,15.71531,14.60918,15.40521,14.41221,16.1197,14.45681,16.46359,14.77368],"lastInterp":false,"lastTime":4444.041965,"lastTimeOrig":4444.041965,"raceCat":"SENIOR (Open)","raceSpeeds":[15.0674,14.64762,14.98702,14.89074,14.99087,14.89122,15.05513,14.97764,15.12937,15.09303],"raceTimes":[0.0,445.16008,915.83575,1342.64285,1801.76545,2237.16407,2702.56137,3118.66127,3582.62301,3990.03135,4444.04197],"speed":"15.09 km/h","status":"Finisher"},"145":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"James Hall","":"","LastName":"MARTYN HOPPING","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.03768,14.74293,14.69515,14.50463,16.06179,14.37117,15.94517,14.83918,16.53876,13.92774],"lastInterp":false,"lastTime":4463.996073,"lastTimeOrig":4463.996073,"raceCat":"SENIOR (Open)","raceSpeeds":[15.03768,14.88885,14.82372,14.74264,14.98884,14.88224,15.02532,15.0018,15.15832,15.02556],"raceTimes":[0.0,446.03985,900.99721,1357.43393,1819.86611,2237.46629,2704.19274,3124.84706,3576.85347,3982.41013,4463.99607],"speed":"15.03 km/h","status":"Finisher"},"148":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Mark Hindley","":"","LastName":"MAGNUS WILLS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[18.83382,12.61014,18.65687,12.44364,19.22245,12.11832,19.57996,11.86125,18.78206,12.25798],"lastInterp":false,"lastTime":4501.365851,"lastTimeOrig":4501.365851,"raceCat":"SENIOR (Open)","raceSpeeds":[18.83382,15.10606,16.12931,15.01732,15.70442,14.96628,15.48762,14.91752,15.26654,14.90082],"raceTimes":[0.0,356.13614,888.04179,1247.55571,1786.57861,2135.51469,2689.00777,3031.57262,3597.06151,3954.17913,4501.36585],"speed":"14.90 km/h","status":"Finisher"},"141":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Bob Gobey","":"","LastName":"ANDREW MUIR","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[14.26697,16.77646,14.63316,16.22679,15.23247,13.05669,14.78569,14.99597,14.83254],"lastInterp":false,"lastTime":4048.850851,"lastTimeOrig":4048.850851,"raceCat":"SENIOR (Open)","raceSpeeds":[14.26697,15.42029,15.14867,15.40454,15.36982,14.92901,14.90837,14.91926,14.90958],"raceTimes":[0.0,470.13514,869.94562,1328.31603,1741.66993,2182.00589,2695.71995,3149.36163,3596.64216,4048.85085],"speed":"14.91 km/h","status":"Finisher"},"157":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"James Leach","":"","LastName":"KATIE STYLES","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.9705,13.82334,17.65472,14.40152,18.12065,14.91411,18.08972,7.93253,17.77711],"lastInterp":false,"lastTime":4164.411129,"lastTimeOrig":4164.411129,"raceCat":"SENIOR (Open)","raceSpeeds":[15.9705,14.81955,15.65771,15.32355,15.81169,15.65467,15.96161,14.16893,14.49584],"raceTimes":[0.0,419.98715,905.21038,1285.13174,1750.8746,2121.02723,2570.76287,2941.54828,3787.10538,4164.41113],"speed":"14.50 km/h","status":"Finisher"},"138":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Megan Free","":"","LastName":"ANDREW ROBERTS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.53908,14.76648,13.74678,15.24889,13.6434,15.85286,14.74928,16.19257,14.33129],"lastInterp":false,"lastTime":4168.680109,"lastTimeOrig":4168.680109,"raceCat":"SENIOR (Open)","raceSpeeds":[12.53908,13.56193,13.62299,13.99607,13.92409,14.21228,14.28659,14.49993,14.481],"raceTimes":[0.0,534.92003,989.15194,1477.07758,1916.9395,2408.56215,2831.66583,3286.42751,3700.65493,4168.68011],"speed":"14.48 km/h","status":"Finisher"},"152":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"James Keen","":"","LastName":"JOHN TURNER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.66221,16.04538,13.70675,16.92122,13.93686,16.52187,12.31135,16.66469,13.38287],"lastInterp":false,"lastTime":4169.228345,"lastTimeOrig":4169.228345,"raceCat":"SENIOR (Open)","raceSpeeds":[12.66221,14.15445,14.002,14.63312,14.48836,14.79179,14.37796,14.62888,14.47909],"raceTimes":[0.0,529.71822,947.74543,1437.09585,1833.48612,2314.7569,2720.72826,3265.54312,3668.03516,4169.22835],"speed":"14.48 km/h","status":"Finisher"},"181":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Luca Tettamanti","":"","LastName":"OLIVER LOACH","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[14.1676,12.25196,15.50072,13.25893,15.53513,13.38604,15.28801,13.37717,15.72664],"lastInterp":false,"lastTime":4258.957172,"lastTimeOrig":4258.957172,"raceCat":"SENIOR (Open)","raceSpeeds":[14.1676,13.14033,13.84298,13.6922,14.02495,13.91427,14.0952,14.00126,14.17404],"raceTimes":[0.0,473.43281,1020.88847,1453.6041,1959.4825,2391.23992,2892.31451,3331.05084,3832.45767,4258.95717],"speed":"14.17 km/h","status":"Finisher"},"126":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Lloyd Collier","":"","LastName":"SUZANNAH KINSELLA","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.96043,14.57916,14.03559,14.70668,13.49868,14.50667,14.08207,13.70931,13.36401],"lastInterp":false,"lastTime":4338.29033,"lastTimeOrig":4338.29033,"raceCat":"SENIOR (Open)","raceSpeeds":[12.96043,13.72222,13.82511,14.03544,13.9247,14.01843,14.02749,13.98691,13.91485],"raceTimes":[0.0,517.52945,977.59759,1455.48308,1911.56201,2408.45539,2870.8224,3347.13046,3836.38966,4338.29033],"speed":"13.91 km/h","status":"Finisher"},"158":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Emily Lewis","":"","LastName":"STUART LYNN","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[11.87837,16.55755,11.95763,16.23251,12.81375,16.88584,12.61364,16.68087,12.23556],"lastInterp":false,"lastTime":4346.633338,"lastTimeOrig":4346.633338,"raceCat":"SENIOR (Open)","raceSpeeds":[11.87837,13.83298,13.14575,13.80189,13.59225,14.04896,13.82424,14.12664,13.88814],"raceTimes":[0.0,564.67385,969.77046,1530.7016,1943.9098,2467.36358,2864.58422,3396.34228,3798.4439,4346.63334],"speed":"13.89 km/h","status":"Finisher"},"127":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Holly Worthington","":"","LastName":"ANDY DAVIDSON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[13.894,13.03194,14.98856,12.86041,15.10477,13.11954,14.81927,13.36053,13.78644],"lastInterp":false,"lastTime":4362.980506,"lastTimeOrig":4362.980506,"raceCat":"SENIOR (Open)","raceSpeeds":[13.894,13.44917,13.92592,13.64333,13.91254,13.77379,13.91402,13.84234,13.8361],"raceTimes":[0.0,482.75559,997.44512,1444.94687,1966.50151,2410.56042,2921.81354,3374.42736,3876.45866,4362.98051],"speed":"13.84 km/h","status":"Finisher"},"166":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Oliver O'Neill","":"","LastName":"HEIDI SHEPHERD","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[14.69864,13.4745,14.62402,11.75662,15.6303,11.07932,15.73821,12.53734,15.68824],"lastInterp":false,"lastTime":4406.542371,"lastTimeOrig":4406.542371,"raceCat":"SENIOR (Open)","raceSpeeds":[14.69864,14.05997,14.24309,13.52782,13.90182,13.3356,13.63292,13.48561,13.69932],"raceTimes":[0.0,456.32839,954.11352,1412.77042,1983.29187,2412.42013,3017.81857,3444.00456,3978.99896,4406.54237],"speed":"13.70 km/h","status":"Finisher"},"122":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Russell Clarke","":"","LastName":"PHIL WRIGHT","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.97092,15.75352,12.34515,15.86856,12.10847,15.57659,12.13055,15.62237,11.55696],"lastInterp":false,"lastTime":4456.101317,"lastTimeOrig":4456.101317,"raceCat":"SENIOR (Open)","raceSpeeds":[12.97092,14.22744,13.53932,14.05508,13.61725,13.90884,13.62354,13.84496,13.54697],"raceTimes":[0.0,517.11084,942.88282,1486.20577,1908.89109,2462.83417,2893.44214,3446.37694,3875.72323,4456.10132],"speed":"13.55 km/h","status":"Finisher"},"177":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Leslie Anstee","":"","LastName":"CARL ISON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.50335,13.98355,12.87627,13.83094,13.22183,12.45369,14.04768,13.30978],"lastInterp":false,"lastTime":4049.28749,"lastTimeOrig":4049.28749,"raceCat":"SENIOR (Open)","raceSpeeds":[12.50335,13.20209,13.09166,13.26897,13.25952,13.11805,13.24325,13.25153],"raceTimes":[0.0,536.44886,1016.11294,1537.02521,2021.98185,2529.27949,3067.86742,3545.34182,4049.28749],"speed":"13.25 km/h","status":"Finisher"},"168":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Timothy Partington","":"","LastName":"SIMON WHITE","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[10.47351,14.57808,12.71473,14.37892,12.37109,14.56409,12.54123,14.82349],"lastInterp":false,"lastTime":4084.565273,"lastTimeOrig":4084.565273,"raceCat":"SENIOR (Open)","raceSpeeds":[10.47351,12.18954,12.35971,12.80941,12.71928,12.99359,12.92698,13.13708],"raceTimes":[0.0,640.41636,1100.51835,1628.04886,2094.5238,2636.70756,3097.25172,3632.08022,4084.56527],"speed":"13.14 km/h","status":"Finisher"},"185":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Samantha Fawcett","":"","LastName":"ELIZABETH CAHILL","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[15.2461,14.74106,8.22715,14.39461,13.05987,14.52686,13.76497,14.62571],"lastInterp":false,"lastTime":4097.399576,"lastTimeOrig":4097.399576,"raceCat":"SENIOR (Open)","raceSpeeds":[15.2461,14.98932,11.76576,12.32865,12.46827,12.76987,12.90313,13.09593],"raceTimes":[0.0,439.94245,894.95772,1710.23474,2176.20131,2689.79047,3151.51485,3638.79574,4097.39958],"speed":"13.10 km/h","status":"Finisher"},"135":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Marc Elker","":"","LastName":"KURT JAMESON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[11.70052,9.07655,13.84953,15.10138,14.83941,15.06161,12.91682,13.80183],"lastInterp":false,"lastTime":4143.290016,"lastTimeOrig":4143.290016,"raceCat":"SENIOR (Open)","raceSpeeds":[11.70052,10.22284,11.20051,11.97375,12.45478,12.82473,12.8378,12.95088],"raceTimes":[0.0,573.25727,1312.23908,1796.54457,2240.70308,2692.70256,3138.03374,3657.31052,4143.29002],"speed":"12.95 km/h","status":"Finisher"},"136":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Peter Farnley","":"","LastName":"MATT WILLIAMS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[10.48896,15.87116,12.02247,15.71693,10.3527,15.60936,11.61701,15.17085],"lastInterp":false,"lastTime":4143.853416,"lastTimeOrig":4143.853416,"raceCat":"SENIOR (Open)","raceSpeeds":[10.48896,12.6306,12.42116,13.10835,12.4458,12.88089,12.68376,12.94912],"raceTimes":[0.0,639.47263,1062.08847,1619.9944,2046.75739,2694.6466,3124.35079,3701.72887,4143.85342],"speed":"12.95 km/h","status":"Finisher"},"113":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Joseph Booth","":"","LastName":"ROSA KOSOWICZ","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.73226,11.95048,14.39245,11.86051,14.96657,10.8141,14.58497,11.10124],"lastInterp":false,"lastTime":4252.124495,"lastTimeOrig":4252.124495,"raceCat":"SENIOR (Open)","raceSpeeds":[12.73226,12.32899,12.94777,12.65769,13.06066,12.62358,12.87085,12.6194],"raceTimes":[0.0,526.80385,1088.07028,1554.10668,2119.6308,2567.79001,3188.03626,3647.92115,4252.1245],"speed":"12.62 km/h","status":"Finisher"},"137":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Katherine Fodor","":"","LastName":"SUZY GASZCZAK","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[10.61968,15.08851,10.48499,15.73195,9.74015,16.12606,10.67013,16.10332],"lastInterp":false,"lastTime":4291.917976,"lastTimeOrig":4291.917976,"raceCat":"SENIOR (Open)","raceSpeeds":[10.61968,12.46569,11.72723,12.52428,11.84701,12.39518,12.11537,12.50239],"raceTimes":[0.0,631.60163,1076.13901,1715.85374,2142.20946,2830.84393,3246.77963,3875.39472,4291.91798],"speed":"12.50 km/h","status":"Finisher"},"153":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Lucy Kerrigan","":"","LastName":"NICK TURNBULL","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.954,10.50922,13.54608,10.86636,13.59007,10.91352,13.27478,10.3234],"lastInterp":false,"lastTime":4531.594795,"lastTimeOrig":4531.594795,"raceCat":"SENIOR (Open)","raceSpeeds":[12.954,11.60424,12.18656,11.82732,12.14232,11.91865,12.09517,11.84114],"raceTimes":[0.0,517.7863,1156.02632,1651.18095,2268.44404,2761.99597,3376.59207,3881.86646,4531.59479],"speed":"11.84 km/h","status":"Finisher"},"144":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Beth Haines","":"","LastName":"HANNAH SCHNEIDER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0],"lapSpeeds":[10.3168,14.69027,10.47409,14.07259,9.33117,13.7372,9.63049],"lastInterp":false,"lastTime":4127.300856,"lastTimeOrig":4127.300856,"raceCat":"SENIOR (Open)","raceSpeeds":[10.3168,12.1211,11.51741,12.06508,11.39723,11.73025,11.37592],"raceTimes":[0.0,650.14395,1106.73219,1747.11309,2223.74214,2942.55916,3430.82508,4127.30086],"speed":"11.38 km/h","status":"Finisher"},"114":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"William Brassington","":"","LastName":"JOEL BRASSINGTON","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0],"lapSpeeds":[9.88053,12.85717,10.08634,12.82454,10.29358,13.26646,10.81992],"lastInterp":false,"lastTime":4165.663952,"lastTimeOrig":4165.663952,"raceCat":"SENIOR (Open)","raceSpeeds":[9.88053,11.17401,10.78629,11.2326,11.03134,11.35004,11.27115],"raceTimes":[0.0,678.85073,1200.53675,1865.53598,2388.54928,3040.15975,3545.75111,4165.66395],"speed":"11.27 km/h","status":"Finisher"},"105":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Hannah Alton","":"","LastName":"CLAIRE BUKY-WEBSTER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0],"lapSpeeds":[9.98954,11.82784,10.41915,12.67233,10.66505,11.76764,11.50255],"lastInterp":false,"lastTime":4193.606912,"lastTimeOrig":4193.606912,"raceCat":"SENIOR (Open)","raceSpeeds":[9.98954,10.83124,10.69031,11.12532,11.03012,11.14655,11.19605],"raceTimes":[0.0,671.44298,1238.52907,1882.2863,2411.58154,3040.49619,3610.48343,4193.60691],"speed":"11.20 km/h","status":"Finisher"},"143":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Katia Hadaschik","":"","LastName":"SARA BARMAN","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0],"lapSpeeds":[11.12456,14.11449,7.07274,14.22205,7.2355,12.32831,9.14789],"lastInterp":false,"lastTime":4702.415222,"lastTimeOrig":4702.415222,"raceCat":"SENIOR (Open)","raceSpeeds":[11.12456,12.44242,9.92956,10.73994,9.79146,10.13919,9.98462],"raceTimes":[0.0,602.93663,1078.15088,2026.49728,2498.11736,3425.13129,3969.19674,4702.41522],"speed":"9.98 km/h","status":"Finisher"},"123":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Aalia Clay","":"","LastName":"MARTHA CROOKS","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0],"lapSpeeds":[11.18926,7.6209,11.99994,9.18734,12.33341,8.72089],"lastInterp":false,"lastTime":4081.566872,"lastTimeOrig":4081.566872,"raceCat":"SENIOR (Open)","raceSpeeds":[11.18926,9.06661,9.87091,9.69066,10.12455,9.86005],"raceTimes":[0.0,599.45035,1479.58354,2038.53669,2768.60701,3312.44749,4081.56687],"speed":"9.86 km/h","status":"Finisher"},"171":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Harrison Lyons","":"","LastName":"SHARON SPICER","Licence":"","Team":"Independent","interp":[0,0,0,0,0,0,0,0,0],"lapSpeeds":[12.45427,14.77204,12.41752,14.50507,13.6236,14.61443,12.38639,13.42971],"lastInterp":false,"lastTime":3987.452586,"lastTimeOrig":3988.0,"raceCat":"SENIOR (Open)","raceSpeeds":[12.45427,13.5145,13.12792,13.4471,13.48203,13.65842,13.46094,13.45702],"raceTimes":[0.0,538.56268,992.62342,1532.77988,1995.19779,2487.53514,2946.49302,3488.00721,3987.45259],"speed":"13.46 km/h","status":"DNF"},"172":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Lingkan Rei","":"","LastName":"KAYA SIMON","Licence":"","Team":"Independent","interp":[0,0,0,0,0],"lapSpeeds":[11.49065,11.4208,7.52395,4.91117],"lastInterp":false,"lastTime":3428.244197,"lastTimeOrig":3429.0,"raceCat":"SENIOR (Open)","raceSpeeds":[11.49065,11.45562,9.75624,7.82605],"raceTimes":[0.0,583.72706,1171.02444,2062.49801,3428.2442],"speed":"7.83 km/h","status":"DNF"},"107":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Megan Barclay","":"","LastName":"HARRY  HORSMAN","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"109":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Ruby Beardsall","":"","LastName":"SANTIAGO ROIG DINARES","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"116":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorMixed","FirstName":"Natasha Caleia-Ramos","":"","LastName":"MATTHEW SHIRLEY","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"118":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Damian Cassidy","":"","LastName":"OLIVER LEWIS","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"155":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Benjamin Knowles","":"","LastName":"LUCA TETTAMANTI","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"164":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"james mitchell","":"","LastName":"ANDREW PARSONS","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"178":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Conor Courtney","":"","LastName":"MIKE PEARS","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"183":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"David Smith","":"","LastName":"VAN SWAN","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"184":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorFemale","FirstName":"Alex Joss","":"","LastName":"SOPHIE RAHIER","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"},"189":{"flr":1.0,"relegated":false,"Age":"","Category":"SeniorOpen","FirstName":"Bill O'Meara","":"","LastName":"SPARE389","Licence":"","Team":"Independent","interp":[],"lapSpeeds":[],"lastInterp":false,"lastTime":0.0,"lastTimeOrig":0.0,"raceCat":"SENIOR (Open)","raceSpeeds":[],"raceTimes":[],"speed":"","status":"DNS"}},"catDetails":[{"name":"All","startOffset":0,"gender":"Open","catType":"Custom","laps":0,"pos":[147,146,106,159,104,134,110,119,142,169,162,151,174,167,179,117,156,130,129,125,132,182,133,111,140,154,163,175,112,108,165,120,131,161,150,102,121,176,173,100,180,128,115,139,145,148,141,157,138,152,181,126,158,127,166,122,177,168,185,135,136,113,137,153,144,114,105,143,123,171,172,107,109,116,118,155,164,178,183,184,189],"gapValue":[0,23.25237,74.0613,115.37356,234.0643,296.56088,352.61592,352.74835,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-3,-3,-3,-3,-3,-3,-3,-3,-3,-3,-4,-4,-4,-4,-4,-4,-4,-4,-5,-5,-5,-5,-6,0,0,0,0,0,0,0,0,0,0,0,0],"iSort":0},{"name":"SeniorOpen (Open)","startOffset":0,"gender":"Open","catType":"Component","laps":12,"pos":[147,146,106,159,104,134,110,119,142,169,162,151,174,167,179,117,156,130,129,125,132,182,133,140,154,163,112,165,120,131,161,150,102,121,176,173,180,115,139,145,148,141,152,181,122,177,168,135,136,114,118,155,164,178,183,189],"starters":50,"finishers":50,"gapValue":[0,23.25237,74.0613,115.37356,234.0643,296.56088,352.61592,352.74835,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-3,-3,-3,-3,-4,-4,-4,-4,-5,0,0,0,0,0,0],"iSort":1,"distanceUnit":"km"},{"name":"SeniorMixed (Open)","startOffset":0,"gender":"Open","catType":"Component","laps":10,"pos":[175,100,128,157,138,126,158,127,166,113,153,171,107,109,116],"starters":12,"finishers":11,"gapValue":[0,209.63677,296.09476,-1,-1,-1,-1,-1,-1,-2,-2,0,0,0,0],"iSort":2,"distanceUnit":"km"},{"name":"SeniorFemale (Open)","startOffset":0,"gender":"Open","catType":"Component","laps":11,"pos":[111,108,185,137,144,105,143,123,172,184],"starters":9,"finishers":8,"gapValue":[0,-1,-3,-3,-4,-4,-4,-5,0,0],"iSort":3,"distanceUnit":"km"},{"name":"Overall (Open)","startOffset":0.0,"gender":"Open","catType":"Custom","laps":12,"pos":[147,146,106,159,104,134,110,119,142,169,162,151,174,167,179,117,156,130,129,125,132,182,133,111,140,154,163,175,112,108,165,120,131,161,150,102,121,176,173,100,180,128,115,139,145,148,141,157,138,152,181,126,158,127,166,122,177,168,185,135,136,113,137,153,144,114,105,143,123,171,172,107,109,116,118,155,164,178,183,184,189],"starters":71,"finishers":69,"gapValue":[0,23.25237,74.0613,115.37356,234.0643,296.56088,352.61592,352.74835,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-3,-3,-3,-3,-3,-3,-3,-3,-3,-3,-4,-4,-4,-4,-4,-4,-4,-4,-5,-5,-5,-5,-6,0,0,0,0,0,0,0,0,0,0,0,0],"iSort":4,"distanceUnit":"km"}],"flags":{},"gpsPoints":[[1004,1570,10],[1005,1600,10],[1015,1637,10],[1032,1679,10],[1051,1722,10],[1078,1763,10],[1106,1799,10],[1144,1828,10],[1181,1858,10],[1222,1878,10],[1266,1892,10],[1308,1898,10],[1351,1902,10],[1394,1909,10],[1442,1911,10],[1490,1904,10],[1534,1889,10],[1572,1865,10],[1606,1834,10],[1640,1796,10],[1673,1760,10],[1708,1724,10],[1745,1696,10],[1791,1679,10],[1843,1674,10],[1885,1683,10],[1912,1701,10],[1941,1706,10],[1974,1694,10],[2001,1661,10],[2012,1604,10],[2020,1560,10],[2026,1506,10],[2053,1468,10],[2089,1458,10],[2127,1467,10],[2166,1456,10],[2177,1417,10],[2177,1378,10],[2185,1342,10],[2198,1304,10],[2232,1275,10],[2279,1276,10],[2302,1312,10],[2288,1351,10],[2252,1368,10],[2227,1405,10],[2213,1451,10],[2202,1500,10],[2193,1548,10],[2183,1602,10],[2172,1655,10],[2145,1701,10],[2102,1726,10],[2058,1719,10],[2008,1705,10],[1960,1727,10],[1927,1762,10],[1896,1791,10],[1863,1829,10],[1832,1869,10],[1802,1906,10],[1771,1942,10],[1733,1972,10],[1689,1994,10],[1644,2020,10],[1602,2043,10],[1558,2066,10],[1509,2081,10],[1460,2091,10],[1405,2094,10],[1355,2094,10],[1306,2083,10],[1252,2077,10],[1197,2070,10],[1137,2066,10],[1083,2054,10],[1056,2041,10],[1042,2030,10],[1029,2013,10],[1020,1998,10],[999,1974,10],[974,1950,10],[943,1922,10],[913,1902,10],[879,1879,10],[848,1859,10],[817,1846,10],[789,1836,10],[769,1828,10],[754,1821,10],[747,1822,10],[729,1812,10],[690,1793,10],[629,1762,10],[564,1732,10],[503,1712,10],[458,1684,10],[434,1661,10],[407,1624,10],[381,1600,10],[366,1582,10],[359,1560,10],[365,1536,10],[361,1514,10],[343,1494,10],[309,1474,10],[279,1445,10],[266,1411,10],[279,1383,10],[297,1367,10],[315,1366,10],[334,1382,10],[348,1409,10],[358,1443,10],[370,1468,10],[380,1493,10],[392,1502,10],[414,1496,10],[433,1484,10],[441,1454,10],[435,1418,10],[414,1386,10],[381,1355,10],[354,1317,10],[347,1270,10],[354,1226,10],[368,1178,10],[385,1126,10],[406,1086,10],[414,1047,10],[408,1020,10],[392,1014,10],[373,1015,10],[360,1030,10],[345,1049,10],[336,1077,10],[321,1109,10],[300,1147,10],[278,1185,10],[257,1214,10],[230,1232,10],[196,1242,10],[153,1246,10],[110,1233,10],[62,1210,10],[29,1175,10],[5,1133,10],[2,1098,10],[0,1068,10],[4,1034,10],[20,990,10],[44,957,10],[74,931,10],[108,919,10],[149,901,10],[193,889,10],[241,873,10],[284,860,10],[320,839,10],[355,830,10],[381,825,10],[405,838,10],[422,860,10],[412,890,10],[396,922,10],[388,949,10],[390,974,10],[402,995,10],[437,1001,10],[480,1006,10],[525,1016,10],[573,1036,10],[617,1054,10],[654,1060,10],[705,1058,10],[744,1057,10],[787,1034,10],[807,1006,10],[808,972,10],[782,961,10],[746,962,10],[711,971,10],[674,974,10],[636,975,10],[596,969,10],[557,955,10],[527,927,10],[509,895,10],[512,856,10],[541,828,10],[580,821,10],[619,838,10],[647,867,10],[663,902,10],[691,926,10],[724,931,10],[746,919,10],[751,894,10],[733,869,10],[701,847,10],[681,813,10],[693,789,10],[713,778,10],[736,780,10],[747,806,10],[769,831,10],[802,846,10],[846,852,10],[877,847,10],[902,835,10],[924,812,10],[934,785,10],[923,760,10],[900,747,10],[858,739,10],[813,728,10],[775,708,10],[757,673,10],[765,649,10],[787,634,10],[812,637,10],[837,648,10],[866,664,10],[903,672,10],[933,660,10],[940,638,10],[931,616,10],[923,589,10],[933,565,10],[951,543,10],[976,522,10],[995,523,10],[1017,543,10],[1031,570,10],[1037,603,10],[1026,640,10],[1012,680,10],[996,721,10],[985,763,10],[976,809,10],[964,852,10],[959,894,10],[941,925,10],[920,951,10],[911,984,10],[906,1011,10],[898,1043,10],[890,1073,10],[882,1105,10],[870,1137,10],[862,1171,10],[853,1204,10],[837,1237,10],[821,1266,10],[798,1287,10],[771,1286,10],[747,1268,10],[736,1242,10],[719,1207,10],[692,1165,10],[649,1135,10],[600,1126,10],[563,1151,10],[530,1175,10],[492,1192,10],[451,1210,10],[416,1235,10],[396,1265,10],[397,1289,10],[415,1315,10],[436,1341,10],[464,1375,10],[492,1406,10],[525,1433,10],[565,1446,10],[601,1442,10],[635,1417,10],[670,1405,10],[710,1417,10],[745,1413,10],[781,1423,10],[823,1426,10],[862,1423,10],[901,1416,10],[948,1393,10],[993,1358,10],[1016,1307,10],[1031,1257,10],[1038,1203,10],[1051,1153,10],[1063,1100,10],[1076,1050,10],[1091,1002,10],[1107,956,10],[1122,908,10],[1145,862,10],[1171,818,10],[1201,777,10],[1234,746,10],[1272,720,10],[1313,700,10],[1358,687,10],[1400,678,10],[1443,673,10],[1485,668,10],[1518,646,10],[1540,606,10],[1551,563,10],[1555,517,10],[1540,468,10],[1507,429,10],[1461,415,10],[1412,425,10],[1372,450,10],[1336,485,10],[1296,520,10],[1260,547,10],[1220,567,10],[1179,580,10],[1132,572,10],[1096,565,10],[1073,548,10],[1052,522,10],[1032,493,10],[1016,480,10],[986,469,10],[927,473,10],[882,505,10],[835,535,10],[802,569,10],[771,603,10],[738,638,10],[701,671,10],[664,702,10],[630,734,10],[595,763,10],[557,798,10],[512,818,10],[471,816,10],[442,791,10],[427,758,10],[433,727,10],[447,700,10],[462,670,10],[485,640,10],[511,611,10],[537,579,10],[569,555,10],[606,534,10],[645,521,10],[683,513,10],[722,510,10],[762,504,10],[805,492,10],[845,474,10],[878,450,10],[908,422,10],[935,389,10],[952,356,10],[968,330,10],[991,313,10],[1015,313,10],[1039,329,10],[1059,345,10],[1072,354,10],[1082,375,10],[1108,376,10],[1137,360,10],[1153,333,10],[1150,303,10],[1148,271,10],[1153,236,10],[1169,207,10],[1197,187,10],[1234,177,10],[1267,165,10],[1296,167,10],[1315,184,10],[1327,195,10],[1342,205,10],[1362,210,10],[1388,196,10],[1419,191,10],[1451,182,10],[1485,176,10],[1509,166,10],[1532,159,10],[1550,151,10],[1564,121,10],[1558,101,10],[1541,88,10],[1523,74,10],[1523,48,10],[1534,30,10],[1546,12,10],[1561,2,10],[1577,0,10],[1595,8,10],[1604,18,10],[1611,30,10],[1616,40,10],[1618,51,10],[1634,76,10],[1654,94,10],[1671,106,10],[1694,130,10],[1730,161,10],[1764,187,10],[1801,205,10],[1841,234,10],[1878,267,10],[1913,304,10],[1942,341,10],[1968,374,10],[1989,404,10],[2009,429,10],[2027,464,10],[2044,502,10],[2061,540,10],[2077,582,10],[2091,628,10],[2103,671,10],[2112,716,10],[2107,758,10],[2088,788,10],[2044,802,10],[1993,822,10],[1948,856,10],[1925,905,10],[1913,952,10],[1903,1000,10],[1893,1045,10],[1887,1091,10],[1890,1134,10],[1876,1174,10],[1845,1192,10],[1814,1177,10],[1799,1144,10],[1816,1110,10],[1831,1071,10],[1838,1026,10],[1832,980,10],[1815,942,10],[1794,911,10],[1765,878,10],[1733,845,10],[1698,816,10],[1659,793,10],[1621,775,10],[1579,761,10],[1536,753,10],[1492,748,10],[1447,745,10],[1401,743,10],[1356,751,10],[1315,768,10],[1276,788,10],[1240,813,10],[1207,848,10],[1183,889,10],[1163,934,10],[1148,978,10],[1133,1017,10],[1116,1059,10],[1104,1105,10],[1090,1148,10],[1078,1189,10],[1065,1233,10],[1054,1277,10],[1043,1322,10],[1032,1365,10],[1021,1408,10],[1017,1449,10],[1009,1485,10],[1004,1521,10],[1003,1553,10],[1002,1574,2]],"courseCoordinates":[-0.09208,51.45143,-0.09208,51.45146,-0.09207,51.45149,-0.09204,51.45153,-0.09201,51.45157,-0.09197,51.4516,-0.09193,51.45163,-0.09188,51.45166,-0.09183,51.45169,-0.09177,51.4517,-0.0917,51.45172,-0.09164,51.45172,-0.09158,51.45173,-0.09152,51.45173,-0.09145,51.45173,-0.09138,51.45173,-0.09132,51.45172,-0.09126,51.45169,-0.09121,51.45167,-0.09116,51.45163,-0.09112,51.4516,-0.09106,51.45157,-0.09101,51.45154,-0.09095,51.45153,-0.09087,51.45152,-0.09081,51.45153,-0.09077,51.45155,-0.09073,51.45155,-0.09068,51.45154,-0.09064,51.45151,-0.09063,51.45146,-0.09062,51.45142,-0.09061,51.45137,-0.09057,51.45134,-0.09051,51.45133,-0.09046,51.45134,-0.0904,51.45133,-0.09039,51.45129,-0.09039,51.45126,-0.09038,51.45122,-0.09036,51.45119,-0.09031,51.45116,-0.09024,51.45116,-0.09021,51.4512,-0.09023,51.45123,-0.09028,51.45125,-0.09032,51.45128,-0.09034,51.45132,-0.09035,51.45137,-0.09037,51.45141,-0.09038,51.45146,-0.0904,51.4515,-0.09044,51.45155,-0.0905,51.45157,-0.09056,51.45156,-0.09063,51.45155,-0.0907,51.45157,-0.09075,51.4516,-0.09079,51.45163,-0.09084,51.45166,-0.09089,51.4517,-0.09093,51.45173,-0.09098,51.45176,-0.09103,51.45179,-0.09109,51.45181,-0.09116,51.45183,-0.09122,51.45185,-0.09128,51.45187,-0.09135,51.45189,-0.09142,51.4519,-0.0915,51.4519,-0.09158,51.4519,-0.09165,51.45189,-0.09172,51.45188,-0.0918,51.45188,-0.09189,51.45187,-0.09197,51.45186,-0.09201,51.45185,-0.09203,51.45184,-0.09205,51.45183,-0.09206,51.45181,-0.09209,51.45179,-0.09212,51.45177,-0.09217,51.45175,-0.09221,51.45173,-0.09226,51.45171,-0.09231,51.45169,-0.09235,51.45168,-0.09239,51.45167,-0.09242,51.45166,-0.09244,51.45165,-0.09245,51.45166,-0.09248,51.45165,-0.09254,51.45163,-0.09262,51.4516,-0.09272,51.45157,-0.0928,51.45156,-0.09287,51.45153,-0.0929,51.45151,-0.09294,51.45148,-0.09298,51.45146,-0.093,51.45144,-0.09301,51.45142,-0.093,51.4514,-0.09301,51.45138,-0.09304,51.45136,-0.09309,51.45134,-0.09313,51.45132,-0.09315,51.45128,-0.09313,51.45126,-0.0931,51.45125,-0.09308,51.45125,-0.09305,51.45126,-0.09303,51.45128,-0.09301,51.45131,-0.093,51.45134,-0.09298,51.45136,-0.09297,51.45137,-0.09293,51.45136,-0.09291,51.45135,-0.09289,51.45132,-0.0929,51.45129,-0.09293,51.45126,-0.09298,51.45123,-0.09302,51.4512,-0.09303,51.45116,-0.09302,51.45112,-0.093,51.45108,-0.09298,51.45103,-0.09294,51.45099,-0.09293,51.45096,-0.09294,51.45093,-0.09297,51.45093,-0.09299,51.45093,-0.09301,51.45094,-0.09303,51.45096,-0.09305,51.45099,-0.09307,51.45101,-0.0931,51.45105,-0.09313,51.45108,-0.09316,51.45111,-0.0932,51.45112,-0.09325,51.45113,-0.09331,51.45114,-0.09337,51.45112,-0.09344,51.4511,-0.09349,51.45107,-0.09352,51.45103,-0.09353,51.451,-0.09353,51.45098,-0.09352,51.45095,-0.0935,51.45091,-0.09347,51.45088,-0.09342,51.45085,-0.09337,51.45084,-0.09331,51.45083,-0.09325,51.45082,-0.09318,51.4508,-0.09312,51.45079,-0.09307,51.45077,-0.09302,51.45076,-0.09298,51.45076,-0.09295,51.45077,-0.09292,51.45079,-0.09294,51.45082,-0.09296,51.45085,-0.09297,51.45087,-0.09297,51.45089,-0.09295,51.45091,-0.0929,51.45092,-0.09284,51.45092,-0.09277,51.45093,-0.0927,51.45095,-0.09264,51.45096,-0.09259,51.45097,-0.09251,51.45097,-0.09246,51.45097,-0.09239,51.45095,-0.09237,51.45092,-0.09236,51.45089,-0.0924,51.45088,-0.09245,51.45088,-0.0925,51.45089,-0.09256,51.45089,-0.09261,51.45089,-0.09267,51.45089,-0.09273,51.45088,-0.09277,51.45085,-0.0928,51.45082,-0.09279,51.45079,-0.09275,51.45076,-0.09269,51.45076,-0.09264,51.45077,-0.0926,51.4508,-0.09257,51.45083,-0.09253,51.45085,-0.09248,51.45085,-0.09245,51.45084,-0.09245,51.45082,-0.09247,51.4508,-0.09252,51.45078,-0.09255,51.45075,-0.09253,51.45073,-0.0925,51.45072,-0.09247,51.45072,-0.09245,51.45074,-0.09242,51.45076,-0.09237,51.45078,-0.09231,51.45078,-0.09226,51.45078,-0.09223,51.45077,-0.0922,51.45075,-0.09218,51.45072,-0.0922,51.4507,-0.09223,51.45069,-0.09229,51.45068,-0.09236,51.45067,-0.09241,51.45065,-0.09244,51.45062,-0.09243,51.4506,-0.0924,51.45059,-0.09236,51.45059,-0.09232,51.4506,-0.09228,51.45061,-0.09223,51.45062,-0.09218,51.45061,-0.09217,51.45059,-0.09219,51.45057,-0.0922,51.45055,-0.09218,51.45052,-0.09216,51.4505,-0.09212,51.45049,-0.09209,51.45049,-0.09206,51.4505,-0.09204,51.45053,-0.09203,51.45056,-0.09205,51.45059,-0.09207,51.45063,-0.09209,51.45067,-0.09211,51.4507,-0.09212,51.45074,-0.09214,51.45078,-0.09215,51.45082,-0.09217,51.45085,-0.0922,51.45087,-0.09222,51.4509,-0.09222,51.45093,-0.09223,51.45095,-0.09225,51.45098,-0.09226,51.45101,-0.09227,51.45104,-0.09229,51.45107,-0.0923,51.4511,-0.09232,51.45113,-0.09235,51.45115,-0.09238,51.45117,-0.09242,51.45117,-0.09245,51.45116,-0.09247,51.45113,-0.09249,51.4511,-0.09253,51.45106,-0.09259,51.45104,-0.09266,51.45103,-0.09272,51.45105,-0.09277,51.45107,-0.09282,51.45109,-0.09288,51.4511,-0.09293,51.45113,-0.09296,51.45115,-0.09296,51.45118,-0.09293,51.4512,-0.0929,51.45122,-0.09286,51.45125,-0.09282,51.45128,-0.09277,51.4513,-0.09272,51.45132,-0.09266,51.45131,-0.09261,51.45129,-0.09256,51.45128,-0.09251,51.45129,-0.09245,51.45129,-0.0924,51.4513,-0.09234,51.4513,-0.09229,51.4513,-0.09223,51.45129,-0.09216,51.45127,-0.0921,51.45124,-0.09206,51.45119,-0.09204,51.45115,-0.09203,51.4511,-0.09201,51.45105,-0.092,51.45101,-0.09198,51.45096,-0.09196,51.45092,-0.09193,51.45088,-0.09191,51.45083,-0.09188,51.45079,-0.09184,51.45075,-0.0918,51.45072,-0.09175,51.45069,-0.09169,51.45066,-0.09164,51.45065,-0.09157,51.45063,-0.09151,51.45063,-0.09145,51.45062,-0.09139,51.45062,-0.09134,51.4506,-0.09131,51.45056,-0.09129,51.45052,-0.09129,51.45048,-0.09131,51.45044,-0.09136,51.4504,-0.09142,51.45039,-0.09149,51.4504,-0.09155,51.45042,-0.0916,51.45045,-0.09166,51.45048,-0.09171,51.45051,-0.09177,51.45053,-0.09183,51.45054,-0.0919,51.45053,-0.09195,51.45052,-0.09198,51.45051,-0.09201,51.45049,-0.09204,51.45046,-0.09206,51.45045,-0.09211,51.45044,-0.09219,51.45044,-0.09226,51.45047,-0.09233,51.4505,-0.09237,51.45053,-0.09242,51.45056,-0.09247,51.45059,-0.09252,51.45062,-0.09257,51.45065,-0.09262,51.45068,-0.09267,51.4507,-0.09273,51.45073,-0.09279,51.45075,-0.09285,51.45075,-0.09289,51.45073,-0.09291,51.4507,-0.09291,51.45067,-0.09288,51.45065,-0.09286,51.45062,-0.09283,51.45059,-0.09279,51.45057,-0.09276,51.45054,-0.09271,51.45052,-0.09266,51.4505,-0.0926,51.45049,-0.09255,51.45048,-0.09249,51.45047,-0.09243,51.45047,-0.09237,51.45046,-0.09231,51.45044,-0.09226,51.45042,-0.09222,51.4504,-0.09218,51.45037,-0.09216,51.45034,-0.09213,51.45031,-0.0921,51.4503,-0.09206,51.4503,-0.09203,51.45031,-0.092,51.45033,-0.09198,51.45034,-0.09197,51.45035,-0.09193,51.45036,-0.09189,51.45034,-0.09187,51.45032,-0.09187,51.45029,-0.09187,51.45026,-0.09187,51.45023,-0.09184,51.4502,-0.0918,51.45018,-0.09175,51.45018,-0.0917,51.45016,-0.09166,51.45017,-0.09163,51.45018,-0.09162,51.45019,-0.09159,51.4502,-0.09156,51.4502,-0.09153,51.45019,-0.09148,51.45019,-0.09144,51.45018,-0.09139,51.45018,-0.09135,51.45017,-0.09132,51.45016,-0.09129,51.45015,-0.09127,51.45012,-0.09128,51.45011,-0.09131,51.4501,-0.09133,51.45008,-0.09133,51.45006,-0.09132,51.45004,-0.0913,51.45003,-0.09128,51.45002,-0.09125,51.45002,-0.09123,51.45002,-0.09122,51.45003,-0.0912,51.45004,-0.0912,51.45005,-0.09119,51.45006,-0.09117,51.45009,-0.09114,51.4501,-0.09112,51.45011,-0.09108,51.45013,-0.09103,51.45016,-0.09098,51.45018,-0.09093,51.4502,-0.09087,51.45023,-0.09082,51.45026,-0.09077,51.45029,-0.09073,51.45032,-0.09069,51.45035,-0.09066,51.45038,-0.09063,51.4504,-0.09061,51.45043,-0.09058,51.45047,-0.09056,51.4505,-0.09053,51.45054,-0.09051,51.45058,-0.0905,51.45062,-0.09048,51.45066,-0.09049,51.4507,-0.09052,51.45072,-0.09058,51.45074,-0.09065,51.45076,-0.09072,51.45079,-0.09075,51.45083,-0.09077,51.45087,-0.09078,51.45092,-0.0908,51.45096,-0.09081,51.451,-0.0908,51.45104,-0.09082,51.45107,-0.09087,51.45109,-0.09091,51.45108,-0.09093,51.45105,-0.09091,51.45101,-0.09089,51.45098,-0.09088,51.45094,-0.09089,51.4509,-0.09091,51.45086,-0.09094,51.45084,-0.09098,51.45081,-0.09103,51.45078,-0.09108,51.45075,-0.09114,51.45073,-0.09119,51.45071,-0.09125,51.4507,-0.09131,51.45069,-0.09138,51.45069,-0.09144,51.45069,-0.09151,51.45069,-0.09157,51.45069,-0.09163,51.45071,-0.09169,51.45072,-0.09174,51.45075,-0.09179,51.45078,-0.09182,51.45082,-0.09185,51.45086,-0.09187,51.4509,-0.0919,51.45093,-0.09192,51.45097,-0.09194,51.45101,-0.09196,51.45105,-0.09198,51.45109,-0.09199,51.45112,-0.09201,51.45117,-0.09202,51.45121,-0.09204,51.45124,-0.09206,51.45128,-0.09206,51.45132,-0.09207,51.45135,-0.09208,51.45138,-0.09208,51.45141,-0.09209,51.45143],"riderDashboard":"{-{!DOCTYPE html}-}\n{-{html}-}\n{-{!--\nHtml Template for Rider Dashboard.\nGenerated from CrossMgr software.\nCopyright Edward Sitarski\nFor details, see sites.google.com/site/CrossMgrSoftware\n--}-}\n{-{head}-}\n{-{meta charset=\"UTF-8\"}-}\n{-{link rel=\"icon\" type=\"image/png\" href=\"data:image/png;base64,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\" /}-}\n{-{meta name=\"author\" content=\"Edward Sitarski\"}-}\n{-{meta name=\"copyright\" content=\"Edward Sitarski\"}-}\n{-{meta name=\"generator\" content=\"CrossMgr\"}-}  \n{-{meta name=\"keywords\" content=\"CrossMgr, Cycling, Race, Results\"}-}\n{-{title id=\"idTitle\"}-}TTIITTLLEE{-{/title}-}\t{-{!-- Don't change this text! --}-}\n{-{style type=\"text/css\"}-}\nbody { font-family: sans-serif; }\n.hidden { display: none; }\ndiv label input {\nmargin-right:220px;\n}\nselect {\nfont-size: 110%;\n}\n@media print { .noprint { display: none; } }\n{-{/style}-}\n{-{script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"}-}{-{/script}-}\n{-{script type=\"text/javascript\"}-}\ngoogle.charts.load('current', {'packages':['table','corechart','timeline']});\ngoogle.setOnLoadCallback(onLoad);\nvar payload = null;\nvar bib = null;\nvar data = null;\nvar catDetails = null;\nvar raceName = null;\nvar bibRef = null;\nvar categoryCur = null;\nArray.prototype.back = function() {\nreturn this[this.length-1];\n}\nArray.prototype.binSearch = function( v ) {\nvar L = this.length, i = -1, m;\nwhile( L - i }-} 1 ) {\nif( this[m = ((L + i)}-}}-}1)] {-{ v )\ni = m;\nelse\nL = m;\n}\nreturn L;\n}\nfunction getOrdinal( n ) {\nvar s = ['th', 'st', 'nd', 'rd'], v = n%100;\nreturn n + (s[(v-20)%10]||s[v]||s[0]);\n}\nfunction byte2Hex(n) {\nvar nybHexString = \"0123456789ABCDEF\";\nreturn String(nybHexString.substr((n }-}}-} 4) & 0x0F,1)) + nybHexString.substr(n & 0x0F,1);\n}\nfunction RGB2Color(r,g,b) {\nreturn '#' + byte2Hex(r) + byte2Hex(g) + byte2Hex(b);\n}\nfunction makeColorGradient(frequency1, frequency2, frequency3,\nphase1, phase2, phase3,\ncenter, width, len)\n{\nif (len == undefined)      len = 50;\nif (center == undefined)   center = 128;\nif (width == undefined)    width = 127;\nvar grad = [];\nfor (var i = 0; i {-{= len; ++i)\n{\nvar red = Math.sin(frequency1*i + phase1) * width + center;\nvar grn = Math.sin(frequency2*i + phase2) * width + center;\nvar blu = Math.sin(frequency3*i + phase3) * width + center;\ngrad.push( RGB2Color(red,grn,blu) );\n}\nreturn grad.slice(1);  \n}\nvar colors = makeColorGradient(2.4,2.4,2.4,0,2,4,128,127,500);\nvar catList = [];\nfunction dataProlog() {\nif( payload ) { for( v in payload ) window[v] = payload[v]; payload = null; }\ncategoryCur = null;\nfor( var i = 0; i {-{ catDetails.length; ++i ) {\nif( catDetails[i].name == 'All' )\ncontinue;\nvar cat = catDetails[i];\nfor( var p = 0; p {-{ cat.pos.length; ++p ) {\nif( cat.pos[p] == bib ) {\ncat.place = (p+1) + '/' + cat.pos.length;\ncat.iCat = i;\ncatList.push( cat );\nif( !categoryCur || cat.pos.length {-{ categoryCur.pos.length )\ncategoryCur = cat;\nbreak;\n}\n}\n}\ncatList.sort( function(x, y) { return x.pos.length - y.pos.length || x.iCat - y.iCat; } );\ndocument.getElementById( 'idRaceName' ).innerHTML = raceName;\n}\nfunction GetName( bib ) {\nvar d = data[bib];\nif( !d )\treturn '';\nif( d.LastName && d.FirstName )\treturn d.FirstName + ' ' + d.LastName;\nreturn d.LastName || d.FirstName || '';\n}\nfunction GetBibName( bib ) {\nreturn bib + ': ' + GetName(bib);\n}\nfunction GetDateFromSecs( t ) {\nvar secs = ~~t;\nvar h = ~~(secs / (60*60));\nvar m = (~~(secs / 60) % 60);\nvar s = ~~(secs % 60);\nvar ms = (t - secs) * 1000.0;\nreturn new Date( 0, 0, 0, h, m, s, ms );\n}\nfunction FormatTimeHMS( t, highPrecision )\n{\nvar tStr = '';\nif( t {-{ 0 )\n{\ntStr = '-';\nt = -t;\n}\nvar secs = ~~t;\nvar h = ~~(secs / (60*60));\nvar m = (~~(secs / 60) % 60);\nvar s = (~~(secs % 60) + t - secs).toFixed( highPrecision ? 3 : 0 );\nif( h }-} 0 )\ntStr += h + 'h' + (m{-{10?'0':'') + m + 'm' + (s{-{10?'0':'') + s + 's';\nelse if( m }-} 0 )\ntStr += m + 'm' + (s{-{10?'0':'') + s + 's';\nelse\ntStr += s + 's';\nreturn tStr;\n}\nfunction FormatTime( t, highPrecision )\n{\nvar tStr = '';\nif( t {-{ 0 )\n{\ntStr = '-';\nt = -t;\n}\nvar secs = ~~t;\nvar h = ~~(secs / (60*60));\nvar m = (~~(secs / 60) % 60);\nvar s = (~~(secs % 60) + t - secs).toFixed( highPrecision ? 3 : 0 );\nif( h }-} 0 )\ntStr += h + (m {-{ 10 ? ':0' : ':') + m + (s {-{ 10 ? ':0' : ':') + s;\nelse\ntStr += m + (s {-{ 10 ? ':0' : ':') + s;\nreturn tStr;\n}\nfunction FormatTimeGap( t, highPrecision ) {\nvar tStr = '';\nif( t {-{ 0 )\n{\ntStr = '-';\nt = -t;\n}\nvar secs = ~~t;\nvar h = ~~(secs / (60*60));\nvar m = (~~(secs / 60) % 60);\nvar s = (~~(secs % 60) + t - secs).toFixed( highPrecision ? 3 : 0 );\nif( h }-} 0 )\ntStr += h + (m {-{ 10 ? 'h0' : 'h') + m + (s {-{ 10 ? \"'0\" : \"'\") + s;\nelse\ntStr += m + (s {-{ 10 ? \"'0\" : \"'\") + s;\ntStr += '\"';\nreturn tStr;\n}\nfunction FormatDistanceGap( d, distanceUnit ) {\nvar suffix = 'behind';\nif( d {-{ 0 ) {\nd *= -1;\nsuffix = 'ahead';\n}\nif( distanceUnit == 'km' ) {\nif( d {-{ 0.1 )\nreturn (d*1000.0).toFixed(1) + ' m ' + suffix;\nreturn d.toFixed(1) + ' ' + distanceUnit + ' ' + suffix;\n}\nelse {\nif( d {-{= 0.1 )\nreturn (d*5280.0).toFixed(0) + ' ft ' + suffix;\nreturn d.toFixed(1) + ' ' + distanceUnit + ' ' + suffix;\n}\n}\nfunction getPositionByLap( bibIn ) {\nvar timeLapPosBib = [];\nfor( var i = 0; i {-{ categoryCur.pos.length; ++i ) {\nvar bibCur = categoryCur.pos[i];\nvar d = data[bibCur];\nfor( var r = 1; r {-{ d.raceTimes.length; ++r )\ntimeLapPosBib.push( {time:d.raceTimes[r] - d.raceTimes[0], lap:r, pos:i, bib:bibCur} );\n}\nif( timeLapPosBib.length == 0 )\nreturn [];\ntimeLapPosBib.sort( function(x, y) {return (x.time - y.time) || (y.lap - x.lap) || (x.pos - y.pos);} );\nvar positionByLap = [];\nvar competitorCount = categoryCur.pos.length;\nvar seenLeader = {}; seenLeader[timeLapPosBib[0].bib] = true;\nfor( var i = 0; i {-{ timeLapPosBib.length; ++i ) {\nvar bibCur = timeLapPosBib[i].bib;\nif( !seenLeader[bibCur] ) {\nseenLeader[bibCur] = true;\ncontinue;\n}\nseenLeader = {}; seenLeader[bibCur] = true;\nvar seen = {};\nvar positionThisLap = [];\nfor( var j = i; j {-{ timeLapPosBib.length && positionThisLap.length {-{ competitorCount; ++j ) {\nvar bibCur = timeLapPosBib[j].bib;\nif( !seen[bibCur] ) {\npositionThisLap.push( timeLapPosBib[j] );\nseen[bibCur] = true;\n}\n}\npositionThisLap.sort( function(x, y) {return (y.lap - x.lap) || (x.time - y.time) || (x.pos - y.pos);} );\ncompetitorCount = positionThisLap.length;\nfor( var j = 0; j {-{ positionThisLap.length; ++j ) {\nif( positionThisLap[j].bib == bibIn ) {\npositionByLap.push( j + 1 );\nbreak;\n}\n}\n}\nreturn positionByLap;\n}\nfunction updateCategories() {\nvar categorySelect = document.getElementById( 'idCategorySelect' );\ncategorySelect.innerHTML = '';\ncategoryCur = null;\nfor( var i = 0; i {-{ catList.length; ++i ) {\nvar cat = catList[i];\nif( !categoryCur )\ncategoryCur = cat;\nvar op = document.createElement( 'option' );\nop.value = i;\nop.text = cat.name;\nop.selected = (cat == categoryCur ? true : false);\ncategorySelect.add( op );\n}\nupdateCompare();\n}\nfunction updateCategoryResults() {\nvar d = data[bib];\nvar cr = [];\nfor( var i = 0; i {-{ catList.length; ++i ) {\ncr.push( '{-{strong}-}' + catList[i].place + '{-{/strong}-} in ' + catList[i].name );\n}\ncr.push( '{-{br/}-}{-{br/}-}' );\nif( d.status == 'Finisher' && d.raceTimes && d.raceTimes.length }-}= 2 ) {\nvar s = 'Finished in ' + FormatTimeHMS(d.raceTimes.back() - d.raceTimes[0], true);\nif( d.speed )\ns += ' at ' + d.speed;\ncr.push( s );\n}\nelse if( d.status != 'Finisher' )\ncr.push( d.status );\ndocument.getElementById( 'idCategoryResults' ).innerHTML = 'Placed: ' + cr.join('&nbsp;&nbsp;&nbsp;');\n}\nfunction categorySelectChange( select ) {\ncategoryCur = catList[select.options[select.selectedIndex].value];\nupdateCompare();\nupdateCompareDisplays();\n}\nfunction updateCompare() {\nvar categorySelect = document.getElementById( 'idCategorySelect' );\nvar compareSelect = document.getElementById( 'idCompareSelect' );\ncompareSelect.innerHTML = '';\nbibRef = null;\nvar iBib = null;\nfor( var i = 0; i {-{ categoryCur.pos.length; ++i ) {\nvar bibCur = categoryCur.pos[i];\nif( bibCur == bib ) {\niBib = i;\ncontinue;\n}\nif( !bibRef )\nbibRef = bibCur;\nvar d = data[bibCur];\nif( !(d.raceTimes && d.raceTimes.length }-}= 2) )\ncontinue;\nif( !(i {-{ 20 || (iBib != null && (iBib-3 {-{ i || i {-{ iBib+2))) )\ncontinue;\nvar op = document.createElement( 'option' );\nop.value = bibCur;\nop.text = (i+1) + '.  ' + GetName(bibCur);\ncompareSelect.add( op );\n}\n}\nfunction compareSelectChange( select ) {\nbibRef = null;\nif( select.options.length )\nbibRef = select.options[select.selectedIndex].value;\nupdateCompareDisplays();\n}\nfunction updateLapTable() {\nvar container = document.getElementById( 'idLapTable' );\nif( !container.table )\ncontainer.table = new google.visualization.Table( container );\nvar spacer = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';\nvar d = data[bib];\nvar hasSpeed = (d.speed && d.lapSpeeds && d.lapSpeeds.length }-} 0);\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'number', 'Lap' );\ndataTable.addColumn( 'number', 'Lap Time' );\ndataTable.addColumn( 'number', 'Race Time' + (!hasSpeed ? spacer : '') );\nif( hasSpeed )\ndataTable.addColumn( 'number', 'Lap Speed' + ' (' + d.speed.split(' ')[1] + ')' + spacer );\nfor( var r = 1; r {-{ d.raceTimes.length; ++r ) {\nvar lapTime = d.raceTimes[r] - d.raceTimes[r-1];\nvar raceTime = d.raceTimes[r] - d.raceTimes[0];\nvar row = [r, { v:lapTime, f:FormatTime(lapTime, true) }, { v:raceTime, f:FormatTime(raceTime, true) + (!hasSpeed ? spacer : '') }];\nif( hasSpeed )\nrow.push( { v:d.lapSpeeds[r-1], f:d.lapSpeeds[r-1].toFixed(2) + spacer } );\ndataTable.addRow( row );\n}\nvar options = {allowHtml: true};\nif( dataTable.getNumberOfRows() }-} 10 )\noptions['page'] = 'enable';\ncontainer.table.draw( dataTable, options );\n}\nfunction GetGap( bib, bibRef ) {\nvar d = data[bib], dRef = data[bibRef];\nif( !d || !dRef || !d.raceTimes || !dRef.raceTimes || d.raceTimes.length==0 || dRef.raceTimes.length==0 )\nreturn {v:0, f:''};\nif( d.raceTimes.length != dRef.raceTimes.length ) {\nvar lapsDown = dRef.raceTimes.length - d.raceTimes.length;\nreturn {v:lapsDown*1000.0*60.0*60.0, f:-lapsDown + (Math.abs(lapsDown) }-} 1 ? ' laps' : ' lap') + (lapsDown {-{ 0 ? ' more' : '')};\n}\nvar g = (d.raceTimes.back() - d.raceTimes[0]) - (dRef.raceTimes.back() - dRef.raceTimes[0]);\nreturn {v:g, f:FormatTimeGap(g)};\n}\nfunction GetGapDistance( bib, bibRef ) {\nvar d = data[bib], dRef = data[bibRef];\nif( !d || !dRef || !d.raceTimes || !dRef.raceTimes || d.raceTimes.length==0 || dRef.raceTimes.length==0 ||\n!d.speed )\nreturn {v:0, f:''};\nvar speedUnit = d.speed.split(' ')[1];\nvar distanceUnit = (speedUnit.substring(0,1) == 'm' ? 'miles' : 'km');\nvar distance = 0, t = 0;\nif( d.lapSpeeds && d.lapSpeeds.length }-} 0 ) {\nt = (d.raceTimes.back() - d.raceTimes.slice(-2,-1)[0]) / (60.0*60.0);\ndistance = t * d.lapSpeeds.back();\n}\nelse {\nt = (d.raceTimes.back() - d.raceTimes[0]) / (60.0*60.0);\ndistance = t * d.speed;\n}\nif( d.raceTimes.length != dRef.raceTimes.length ) {\nvar lapsDown = dRef.raceTimes.length - d.raceTimes.length;\nreturn {v:lapsDown*distance, f:FormatDistanceGap(lapsDown*distance,distanceUnit)};\n}\nvar g = ((d.raceTimes.back() - d.raceTimes[0]) - (dRef.raceTimes.back() - dRef.raceTimes[0])) / (60.0*60.0);\nvar distanceGap = (g / t) * distance;\nreturn {v:distanceGap, f:FormatDistanceGap(distanceGap, distanceUnit)};\n}\nfunction GetPlace( bib ) {\nfor( var i = 0; i {-{ categoryCur.pos.length; ++i )\nif( categoryCur.pos[i] == bib )\nreturn {v:i, f:(i+1) + '/' + categoryCur.pos.length};\nreturn '';\n}\nfunction GetTime( bib ) {\nvar d = data[bib];\nif( !d || !d.raceTimes || !d.raceTimes.length )\nreturn {v:0, f:''};\nvar t = d.raceTimes.back() - d.raceTimes[0];\nreturn {v:t, f:FormatTime(t, true) };\n}\nfunction GetEstimatedLapTime( bib ) {\nvar d = data[bib];\nif( !d || !d.raceTimes || d.raceTimes.length {-{ 2 )\nreturn 99999999999;\nif( d.raceTimes }-} 2 )\nreturn (d.raceTimes.back() - d.raceTimes[1]) / (d.raceTimes.length-2);\nreturn (d.raceTimes.back() - d.raceTimes[0]) / (d.raceTimes.length-1);\n}\nfunction GetPercentComparison( bib, bibRef ) {\nvar d = data[bib], dRef = data[bibRef];\nif( !d || !dRef || !d.raceTimes || !dRef.raceTimes || d.raceTimes.length {-{ 2 || dRef.raceTimes.length {-{ 2 )\nreturn {v:0, f:''};\nvar t = d.raceTimes.back() - d.raceTimes[0], tRef = dRef.raceTimes.back() - dRef.raceTimes[0];\nif( d.raceTimes.length {-{ dRef.raceTimes.length )\nt += GetEstimatedLapTime(bib) * (dRef.raceTimes.length - d.raceTimes.length);\nelse if( d.raceTimes.length }-} dRef.raceTimes.length )\ntRef += GetEstimatedLapTime(bibRef) * (d.raceTimes.length - dRef.raceTimes.length);\nvar p = 1.0 - t/tRef;\nreturn {v:p, f:(p == 0 ? '' : (Math.abs(p)*100).toFixed(1) + (p{-{0 ? '% slower' : p}-}0 ? '% faster' : ''))};\n}\nfunction updateInfoTable() {\nvar container = document.getElementById( 'idInfoTable' );\nif( !container.table )\ncontainer.table = new google.visualization.Table( container );\nvar d = data[bib];\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'string', 'Name' );\ndataTable.addColumn( 'number', 'Place' );\ndataTable.addColumn( 'number', 'Time' );\ndataTable.addColumn( 'number', 'Gap' );\nif( d.speed ) {\ndataTable.addColumn( 'number', 'Est. Distance' );\ndataTable.addColumn( 'number', 'Avg Speed' + ' (' + d.speed.split(' ')[1] + ')' );\n}\ndataTable.addColumn( 'number', 'Comparison' );\nfor( var i = 0; i {-{ 2; ++i ) {\nvar bibCur = (i == 0 ? bib : bibRef);\nvar gap = (i != 0 ? {v:0,f:''} : GetGap(bib, bibRef));\nvar riderName = GetName(bibCur);\nvar d = data[bibCur];\nvar row = [ GetName(bibCur), GetPlace(bibCur), GetTime(bibCur), gap];\nif( d.speed ) {\nrow.push( i != 0 ? {v:0,f:''} : GetGapDistance(bib, bibRef) );\nvar s = parseFloat(d.speed.split(' ')[0]);\nrow.push( {v:s, f:s.toFixed(2)} );\n}\nrow.push( GetPercentComparison(bibCur, bibRef) );\ndataTable.addRow( row );\n}\ncontainer.table.draw( dataTable );\n}\nfunction updateGanttChart() {\nvar container = document.getElementById( 'idGanttChart' );\nif( !container.chart )\ncontainer.chart = new google.visualization.Timeline( container );\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'string', 'Rider' );\ndataTable.addColumn( 'string', 'Lap' );\ndataTable.addColumn( 'date', 'Start' );\ndataTable.addColumn( 'date', 'End' );\nvar maxLaps = 0;\nfor( var i = 0; i {-{ 2; ++i ) {\nvar bibCur = (i == 0 ? bib : bibRef);\nvar riderName = GetName(bibCur);\nvar d = data[bibCur];\nif( !d.raceTimes )\ncontinue;\nvar tLast = 0.0\nmaxLaps = Math.max( maxLaps, d.raceTimes.length );\nfor( var r = 1; r {-{ d.raceTimes.length; ++r ) {\nvar tNext = tLast + d.raceTimes[r] - d.raceTimes[r-1];\ndataTable.addRow( [\nriderName,\n'Lap ' + r,\nGetDateFromSecs(tLast),\nGetDateFromSecs(tNext)] );\ntLast = tNext;\n}\n}\nvar options = {\ncolors: colors.slice( maxLaps+1 ),\n};\ncontainer.chart.draw( dataTable, options );\n}\nvar numLabels = 4;\nfunction getTimeTicks( tMin, tMax, tFormat ) {\nvar d = (tMax - tMin) / numLabels;\nvar intervals = [0.01,0.05,0.1,0.2,0.5, 1, 2, 5, 10, 15, 20, 30, 1*60, 2*60, 5*60, 10*60, 15*60, 20*60, 30*60, 1*60*60, 2*60*60, 4*60*60, 8*60*60, 12*60*60, 24*60*60, 2*24*60*60, 5*24*60*60, 10*24*60*60, 20*24*60*60, 50*24*60*60 ];\nd = intervals[intervals.binSearch(d)];\nvar dMin = Math.floor(tMin / d) * d, dMax = Math.floor(tMax / d + 1) * d;\nvar ticks = [];\nfor( var t = dMin; t {-{= dMax; t += d )\nticks.push( {v:t, f:tFormat=='hms' ? FormatTimeHMS(t, d{-{1) : tFormat=='gap' ? FormatTimeGap(t, d{-{1) : FormatTime(t,d{-{1)} );\nreturn ticks;\n}\nfunction getPositionTicks( pMin, pMax ) {\nvar d = (pMax - pMin) / numLabels;\nvar intervals = [1, 2, 5, 10, 20, 25, 50, 100, 200, 500, 1000, 2000, 5000, 10000, 20000, 50000, 100000];\nd = intervals[intervals.binSearch(d)];\nvar dMin = Math.max(1, Math.floor(pMin / d) * d), dMax = Math.floor(pMax / d) * d;\nif( dMax {-{ pMax )\ndMax += d;\nvar ticks = [];\nfor( var p = dMin; p {-{= dMax; p += d )\nticks.push( {v:p, f:getOrdinal(p)} );\nreturn ticks;\n}\nfunction updateLapTimesChart() {\nvar container = document.getElementById( 'idLapTimesChart' );\nif( !container.chart )\ncontainer.chart = new google.visualization.LineChart( container );\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'string', 'Lap' );\ndataTable.addColumn( 'number', GetName(bib) );\nif( bibRef )\ndataTable.addColumn( 'number', GetName(bibRef) );\nvar dRef = data[bibRef];\nvar d = data[bib];\nvar tMin = 999999999, tMax = 0.0;\nvar rMax = Math.min(dRef.raceTimes.length, d.raceTimes.length);\nfor( var r = 1; r {-{ rMax; ++r ) {\nvar row = [\n'' + r,\n{\tv:r {-{ d.raceTimes.length ? d.raceTimes[r] - d.raceTimes[r-1] : 0,\nf:FormatTimeHMS(r {-{ d.raceTimes.length ? d.raceTimes[r] - d.raceTimes[r-1] : 0)\n}\n];\nif( bibRef )\nrow.push( {\tv:dRef.raceTimes[r] - dRef.raceTimes[r-1],\nf:FormatTimeHMS(dRef.raceTimes[r] - dRef.raceTimes[r-1]) } );\nfor( var k = 1; k {-{ row.length; ++k ) {\ntMin = Math.min( tMin, row[k].v );\ntMax = Math.max( tMax, row[k].v );\n}\ndataTable.addRow( row );\n}\nvar timeTicks = getTimeTicks( tMin, tMax, 'hms' );\nvar options = {\ntitle: 'Lap Times',\nvAxis: {\ntitle: \"lap time\",\nticks:timeTicks,\nviewWindow:{ min:timeTicks[0].v, max:timeTicks.back().v }\n},\nhAxis: {title: \"lap\"},\ncolors: ['blue', '#8888FF'],\npointSize: 5,\nchartArea: {left: '10%', width: '70%'},\nanimation: {duration: 250},\n};\ncontainer.chart.draw( dataTable, options );\n}\nfunction updateGapChart() {\nvar container = document.getElementById( 'idGapChart' );\nif( !container.chart )\ncontainer.chart = new google.visualization.LineChart( container );\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'string', 'Lap' );\ndataTable.addColumn( 'number', 'Gap' );\nvar dRef = data[bibRef];\nvar d = data[bib];\nvar tMin = 999999999, tMax = 0.0;\nvar rMax = Math.min(dRef.raceTimes.length, d.raceTimes.length);\nfor( var r = 1; r {-{ rMax; ++r ) {\nvar ab = bibRef ? (d.raceTimes[r] - d.raceTimes[0]) - (dRef.raceTimes[r] - dRef.raceTimes[0]) : 0.0;\ntMin = Math.min( tMin, ab );\ntMax = Math.max( tMax, ab );\ndataTable.addRow( [ '' + r, {v: ab, f: FormatTimeHMS(ab)} ] );\n}\nvar timeTicks = getTimeTicks( tMin, tMax, 'gap' );\nvar options = {\ntitle: 'Gap: ' + GetName(bib) + ' \\u21E8 ' + GetName(bibRef),\nvAxis: {\ntitle: \"gap\",\nticks:timeTicks,\nviewWindow:{min:timeTicks[0].v, max:timeTicks.back().v}\n},\nhAxis: {title: \"lap\"},\ncolors: ['blue'],\nlegend: 'none',\npointSize: 5,\nchartArea: {left: '10%', width: '70%'},\nanimation: {duration: 250},\n};\ncontainer.chart.draw( dataTable, options );\n}\nfunction updateLapPositionChart() {\nvar container = document.getElementById( 'idLapPositionChart' );\nif( !container.chart )\ncontainer.chart = new google.visualization.LineChart( container );\nvar pos1 = getPositionByLap( bib );\nvar pos2 = bibRef ? getPositionByLap( bibRef ) : [];\nvar dataTable = new google.visualization.DataTable();\ndataTable.addColumn( 'string', 'Lap' );\ndataTable.addColumn( 'number', GetName(bib) );\nif( bibRef )\ndataTable.addColumn( 'number', GetName(bibRef) );\nvar dLeader = data[bibRef];\nvar d = data[bib];\nvar positionMin = 999999, positionMax = 0;\nvar iMax = Math.min(pos1.length, pos2.length);\nfor( var i = 0; i {-{ iMax; ++i ) {\nvar row = [ '' + (i+1), pos1[i]];\npositionMin = Math.min(positionMin, pos1[i]);\npositionMax = Math.max(positionMax, pos1[i]);\nif( bibRef ) {\nrow.push( pos2[i] );\npositionMin = Math.min(positionMin, pos2[i]);\npositionMax = Math.max(positionMax, pos2[i]);\n}\ndataTable.addRow( row );\n}\ntickMarks = getPositionTicks( positionMin, positionMax );\nvar options = {\ntitle: 'Race Position by Lap',\nvAxis: {\ntitle: \"position\",\ndirection:-1,\nticks:tickMarks,\nminValue:positionMin,\nmaxValue:positionMax,\nviewWindow:{ min:tickMarks[0], max:tickMarks.back() }\n},\nhAxis: {title: \"lap\"},\ncolors: ['blue', '#8888FF'],\npointSize: 5,\nchartArea: {left: '10%', width: '70%'},\nanimation: {duration: 250},\n};\ncontainer.chart.draw( dataTable, options );\n}\nfunction updateCompareDisplays() {\nupdateInfoTable();\nupdateGanttChart();\nupdateLapTimesChart();\nupdateGapChart();\nupdateLapPositionChart();\n}\nfunction onLoad() {\ndataProlog();\nvar d = data[bib];\ndocument.getElementById('idHeader').innerHTML = GetBibName(bib) + (d.Team ? ' (' + d.Team + ')' : '');\nupdateCategoryResults();\nupdateCategories();\nupdateLapTable();\nupdateCompareDisplays();\n}\n{-{/script}-}\n{-{/head}-}\n{-{body}-}\n{-{h1 id=\"idHeader\"}-}{-{/h1}-}\n{-{h4 id=\"idRaceName\"}-}Race Name{-{/h4}-}\n{-{p id=\"idCategoryResults\"}-}Category Results{-{/p}-}\n{-{div id=\"idLapTable\"}-}{-{/div}-}\n{-{br/}-}\nCategory:&nbsp;{-{select id=\"idCategorySelect\" onchange=\"categorySelectChange(this)\"}-}{-{/select}-}&nbsp;&nbsp;&nbsp;&nbsp;Compare&nbsp;to:&nbsp;{-{select id=\"idCompareSelect\" onchange=\"compareSelectChange(this)\"}-}{-{/select}-}\n{-{br/}-}{-{br/}-}\n{-{div id=\"idInfoTable\"}-}{-{/div}-}\n{-{br/}-}\n{-{div id=\"idGanttChart\" style=\"width: 720px; height: 136px;\"}-}{-{/div}-}\n{-{div id=\"idLapTimesChart\" style=\"width: 900px; height: 180px;\"}-}{-{/div}-}\n{-{div id=\"idGapChart\" style=\"width: 900px; height: 180px;\"}-}{-{/div}-}\n{-{div id=\"idLapPositionChart\" style=\"width: 900px; height: 180px;\"}-}{-{/div}-}\n{-{a href=\"http://www.sites.google.com/site/crossmgrsoftware\" target=\"_blank\"}-}Powered by CrossMgr{-{/a}-}\n{-{/body}-}\n{-{/html}-}\n","gpsTotalElevationGain":27.000000000000007,"gpsAltigraph":[[0.0,25.8],[3.00306,25.8],[6.90617,25.8],[11.37023,25.8],[16.12108,25.8],[21.04349,25.8],[25.55389,25.8],[30.33753,25.8],[35.08109,25.8],[39.63307,25.8],[44.23168,25.8],[48.49501,25.8],[52.81419,25.6],[57.16189,25.6],[61.94833,25.6],[66.84456,25.6],[71.54465,25.6],[75.95535,25.6],[80.61343,25.6],[85.69495,25.6],[90.60123,25.6],[95.61623,25.6],[100.22226,25.6],[105.12953,25.6],[110.34559,25.6],[114.66511,25.8],[117.90064,26.0],[120.86361,26.2],[124.4075,26.4],[128.65738,26.6],[134.43568,26.6],[138.96054,26.6],[144.33421,26.4],[148.98142,26.2],[152.72111,26.2],[156.56729,26.2],[160.67061,26.0],[164.71728,26.0],[168.60971,26.0],[172.37219,26.2],[176.35325,26.2],[180.86575,26.4],[185.50982,26.4],[189.7395,26.4],[193.87072,26.4],[197.88931,26.4],[202.3264,26.4],[207.09139,26.4],[212.09316,26.6],[217.08099,26.6],[222.50579,26.8],[227.95709,26.8],[233.25687,27.0],[238.25671,27.0],[242.75931,27.0],[247.92383,27.0],[253.19701,27.0],[257.98712,27.2],[262.18882,27.4],[267.2243,27.8],[272.25621,28.0],[277.11307,28.2],[281.84428,28.4],[286.64169,28.6],[291.60285,28.6],[296.78238,28.8],[301.61139,28.8],[306.51071,28.8],[311.67096,29.0],[316.62367,29.2],[322.17718,29.2],[327.16631,29.4],[332.14268,29.4],[337.65737,29.6],[343.17206,29.6],[349.21699,29.8],[354.66722,29.6],[357.68114,29.6],[359.45796,29.6],[361.62651,29.4],[363.42508,29.4],[366.5058,29.4],[370.04949,29.4],[374.22693,29.6],[377.81639,29.6],[381.93723,29.8],[385.58442,29.8],[388.93396,30.0],[391.88084,30.4],[394.14199,30.6],[395.74282,31.0],[396.51312,31.2],[398.51375,31.6],[402.89254,31.8],[409.67762,31.4],[416.91285,30.8],[423.3308,30.0],[428.6237,29.2],[431.94083,28.2],[436.49803,27.4],[440.09219,27.0],[442.39062,27.0],[444.71998,27.0],[447.13692,27.4],[449.39935,27.6],[452.0923,28.0],[456.09359,28.0],[460.19584,27.8],[463.88576,27.6],[466.93264,27.4],[469.36654,27.2],[471.10246,27.0],[473.59002,27.0],[476.69621,26.8],[480.19024,26.8],[482.97771,27.0],[485.63566,27.0],[487.11181,27.2],[489.39786,27.2],[491.69146,27.4],[494.78898,27.6],[498.40146,27.6],[502.23811,27.6],[506.74373,27.4],[511.39095,27.4],[516.11226,27.2],[520.61371,27.0],[525.5919,27.0],[531.07629,26.8],[535.61927,26.4],[539.58504,26.0],[542.32562,25.6],[544.05341,25.4],[545.92768,25.2],[547.96651,25.0],[550.35207,25.0],[553.27426,24.8],[556.84111,25.0],[561.1894,25.0],[565.5377,25.2],[569.13947,25.4],[572.37501,25.6],[575.84844,25.8],[580.16768,26.0],[584.73261,26.0],[590.00583,26.0],[594.82954,26.0],[599.70152,25.8],[603.16593,25.8],[606.17539,25.6],[609.64741,25.6],[614.26761,25.4],[618.39194,25.4],[622.31868,25.2],[625.993,25.0],[630.45174,24.8],[634.98544,24.8],[640.01385,24.6],[644.51259,24.6],[648.74955,24.6],[652.32668,24.6],[655.01796,24.6],[657.72561,24.6],[660.50258,24.6],[663.65769,24.6],[667.25471,24.6],[670.04994,24.6],[672.50505,24.6],[674.95847,24.6],[678.48687,24.6],[682.80612,24.6],[687.42013,24.8],[692.60351,24.8],[697.38194,24.8],[701.11468,24.8],[706.24732,25.0],[710.12943,25.0],[715.08028,25.0],[718.51044,25.2],[721.84701,25.2],[724.70537,25.4],[728.31043,25.6],[731.88755,25.6],[735.63609,25.6],[739.37967,25.6],[743.43706,25.6],[747.64308,25.4],[751.71815,25.4],[755.41199,25.2],[759.31367,25.2],[763.33836,25.2],[767.27583,25.2],[771.56338,25.2],[775.61679,25.2],[779.51566,25.4],[783.13996,25.4],[786.51228,25.4],[788.98424,25.4],[791.58732,25.4],[794.62547,25.4],[798.45554,25.4],[802.34992,25.4],[805.06507,25.4],[807.30138,25.4],[809.66789,25.4],[812.45536,25.4],[815.79532,25.4],[819.42202,25.4],[823.8383,25.4],[827.074,25.4],[829.79031,25.6],[832.93082,25.8],[835.89867,26.0],[838.61382,26.2],[841.20178,26.6],[845.49986,26.8],[850.13929,26.8],[854.44412,26.8],[858.33362,26.8],[860.89591,26.6],[863.54292,26.4],[866.11648,26.2],[868.84772,26.2],[872.20219,26.0],[875.95642,26.0],[879.1774,26.0],[881.50676,26.2],[883.90619,26.4],[886.70142,26.4],[889.25741,26.6],[892.11954,26.8],[895.3886,26.8],[897.33206,26.8],[900.26815,27.0],[903.3078,27.2],[906.6894,27.4],[910.52268,27.6],[914.75882,27.8],[919.17095,27.8],[923.5394,27.8],[928.18654,27.6],[932.6803,27.6],[936.82301,27.4],[940.42018,27.4],[943.803,27.4],[947.15112,27.2],[949.98573,27.0],[953.19113,27.0],[956.30642,27.0],[959.61994,27.0],[963.07742,27.0],[966.60774,27.0],[969.97516,27.0],[973.64284,27.2],[976.97812,27.2],[980.09142,27.2],[982.7962,27.2],[985.80409,27.4],[988.66804,27.4],[992.4953,27.4],[997.5487,27.2],[1002.73339,27.0],[1007.73309,26.8],[1012.2655,26.4],[1016.27296,26.2],[1020.43316,26.2],[1025.0004,26.0],[1029.24171,26.0],[1032.85444,26.2],[1035.30465,26.2],[1038.43302,26.4],[1041.72882,26.4],[1046.15204,26.4],[1050.36693,26.4],[1054.57749,26.4],[1058.81228,26.4],[1062.44294,26.4],[1066.62782,26.6],[1070.3021,26.6],[1074.50318,26.6],[1078.06508,26.6],[1081.80478,26.8],[1085.9758,27.0],[1089.8706,27.2],[1093.87634,27.4],[1099.13522,27.4],[1104.80702,27.4],[1110.40988,27.4],[1115.62095,27.2],[1121.12256,27.0],[1126.27945,26.8],[1131.6524,26.8],[1136.82648,26.8],[1141.8244,26.6],[1146.75905,26.6],[1151.77759,26.6],[1156.87794,26.6],[1162.04676,26.4],[1167.12666,26.4],[1171.68265,26.4],[1176.27246,26.4],[1180.76239,26.4],[1185.46008,26.2],[1189.77969,26.2],[1194.09896,26.2],[1198.36239,26.0],[1202.36354,26.0],[1206.90653,26.0],[1211.27498,26.0],[1215.958,25.8],[1221.06241,25.8],[1226.18196,26.0],[1230.94616,26.0],[1235.89902,26.0],[1240.60412,26.0],[1245.66825,26.0],[1250.96312,26.0],[1255.4471,25.8],[1259.93704,25.8],[1264.23772,25.8],[1268.94531,25.6],[1272.67809,25.6],[1275.57542,25.8],[1278.87123,26.0],[1282.39212,26.2],[1284.47074,26.6],[1287.71619,26.8],[1293.62309,26.8],[1299.16262,26.8],[1304.69157,26.6],[1309.40234,26.4],[1314.00436,26.0],[1318.84289,25.6],[1323.7533,25.6],[1328.62114,25.4],[1333.30383,25.6],[1337.81635,25.6],[1343.00679,25.6],[1347.87242,25.6],[1352.03608,25.6],[1355.78524,25.4],[1359.45294,25.4],[1362.62824,25.2],[1365.63533,25.0],[1368.97168,24.8],[1372.78803,24.8],[1376.65223,24.8],[1380.77195,24.8],[1384.77945,24.8],[1389.01643,24.8],[1393.11998,25.0],[1397.00991,25.0],[1400.97383,25.0],[1405.03125,25.0],[1409.4983,25.0],[1413.83035,25.0],[1417.95926,25.0],[1422.03435,25.0],[1426.32756,25.0],[1429.95582,25.0],[1433.1003,25.0],[1435.93072,25.0],[1438.35607,25.2],[1441.17998,25.2],[1443.79156,25.2],[1445.3236,25.4],[1447.67816,25.8],[1450.31375,26.0],[1453.66823,26.2],[1456.74166,26.6],[1459.75669,26.6],[1462.98432,26.8],[1466.46533,26.8],[1469.76661,26.8],[1473.18556,26.6],[1477.05905,26.4],[1480.53808,26.2],[1483.457,26.0],[1485.96351,26.0],[1487.63452,26.0],[1489.45815,26.2],[1491.44877,26.4],[1494.33915,26.6],[1497.5749,26.8],[1500.88431,27.0],[1504.25667,27.2],[1506.88039,27.4],[1509.296,27.6],[1511.32245,27.8],[1514.60072,28.0],[1516.67759,28.2],[1518.74205,28.0],[1521.10641,27.8],[1523.66484,27.4],[1525.82209,27.2],[1527.95587,26.8],[1529.77951,26.4],[1531.45743,26.2],[1533.40488,26.0],[1534.79868,26.0],[1536.10889,26.0],[1537.221,26.2],[1538.35222,26.4],[1541.32961,26.6],[1544.06586,27.0],[1546.13032,27.4],[1549.44751,27.6],[1554.15745,28.0],[1558.53086,28.2],[1562.61178,28.2],[1567.50666,28.2],[1572.51967,28.0],[1577.61423,27.8],[1582.25501,27.6],[1586.50493,27.4],[1590.15668,27.2],[1593.32255,27.0],[1597.31093,27.0],[1601.46957,27.0],[1605.59983,27.0],[1610.11583,27.0],[1614.88083,27.0],[1619.37458,26.8],[1623.92695,26.6],[1628.18011,26.6],[1631.75477,26.6],[1636.35348,26.6],[1641.8581,26.4],[1647.46306,26.2],[1652.89337,25.8],[1657.81773,25.4],[1662.69653,25.0],[1667.26417,24.6],[1671.96714,24.4],[1676.20163,24.4],[1680.43777,24.4],[1684.02787,24.4],[1687.40215,24.4],[1691.06984,24.4],[1694.8287,24.2],[1698.98368,24.2],[1703.59503,24.0],[1708.1876,24.0],[1712.34624,24.0],[1716.12885,24.0],[1720.5106,24.0],[1725.1727,24.2],[1729.68522,24.2],[1734.15783,24.2],[1738.41211,24.4],[1742.84472,24.4],[1747.21097,24.4],[1751.61184,24.6],[1756.12837,24.6],[1760.77249,24.6],[1765.27518,24.6],[1769.69074,24.4],[1774.11874,24.4],[1778.53744,24.4],[1783.27973,24.4],[1788.05561,24.4],[1792.93631,24.4],[1797.63811,24.4],[1801.79309,24.4],[1806.35984,24.4],[1811.06857,24.2],[1815.62124,24.2],[1819.92037,24.2],[1824.45243,24.4],[1829.02007,24.4],[1833.60397,24.4],[1838.08005,24.6],[1842.55614,24.6],[1846.69131,24.6],[1850.33027,24.6],[1853.93143,24.6],[1857.15683,24.4],[1859.27408,24.2],[1859.79815,25.8]],"lengthKm":1.8631681971443266};
/* !!! payload end !!! */
var raceName = null;
var organizer = null;
var timestamp = null;
var email = null;
var raceAddress = null;
var raceIsRunning = null;
var raceWasRunning = null;
var raceIsUnstarted = null;
var raceIsFinished = null;
var data = null;
var catDetails = null;
var isTimeTrial = null;
var winAndOut = null;
var catDetailsByName = {};
var lapDetails = null;
var hideDetails = null;		
var showDetails = false;	
var showCourseAnimation = true;
var version = null;
var raceNotes = null;
var primes = null;
var arrivalMode = null;
var mapMode = null;
var cycleCategoriesMode = null;
var catPosIndex = null;
var showCategorySummary = null;
var kioskMode = null;
var licenseLinkTemplate = null;
var flags = null;
var canvas = null;
var r = 100.0;				
var t = 0.0;				
var tLast = 0.0;			
var tDelta = 0.0;			
var tMax = 0.0;				
var laneMax = 8;			
var lapCur = 0;				
var framesPerSecond = 32;	
var speedup = 1.0;			
var categories = [];		
var categoryCur = 'All';	
var animationSeconds = 90;	
var suspendAnimation = false;	
var numsToWatchStr = null;	
var categoryStr = null;		
var numsToWatch = {};		
var resultsDiv = null;
var showLapsFrequency = -1;	
var lapDataOption = 0;		
var loopContinuously = true;
var fontMult = 1.0;			
var showTimeDecimals = false;
var displayUnits = 'km';
var reverseDirection = null;	
var finishTop = null;			
var tRace = null;				
var raceStartTime = null;		
var animationObj = null;		
var situationObj = null;
var lapChartObj = null;
var catUpdateTime = {};			
var rfid = null;				
var gpsPoints = null;			
var gpsTotalElevationGain = null;	
var gpsAltigraph = null;		
var gpsIsPointToPoint = null;	
var courseCoordinates = null;	
var courseViewerTemplate = null;
var travelMap = null;	
var infoFields = null;			
var langCur = null;				
var roadRaceFinishTimes = null;	
var gpsPointsTest =  [ ];
var checkeredFlag = new Image();
checkeredFlag.src =
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAgCAYAAAD5VeO1AAAEsklEQVRIibWVX0jTaxjHH//029lcVqvM0taNGUHNinGOnkGohJWtQ4KaFEVySlSSUixzTFwZxYnROv2ByisLgwqCIRRhF4EcKsjgeBrDgUqYDhvLJtoyt33OTZPCKLX83L0Xz+f78uV5eUVmiM/na/b7/TUznfsuL1++PM4nbt682V5VVbXkp4jLy8uP6/V6Hj58yPPnz1mwYAEGg2Hs6NGjuT8kttvtxuXLl4dFhNWrV3PhwgXi4uIQEaxW65jP58uflbijo2Phhw8f/m1tbSUpKYlnz54BcP/+fUpLSwmFQkQikbDX6z1ps9lipy222Wyxbre7LdpzU1MTPT09AHg8HrZs2YLb7QagsbGRnJyc/rq6Ov205Lt3725ftWoVT5484erVq4gIS5cuxel0YjQaERF0Oh3Xr1+frGnjxo3B3t5ewzfFTU1NtfPmzUNEKCgowGKxEBMTQ3x8PE6nk4aGBmJjYzGZTLx//57z58+jUqm4ceMGoVAo8ObNm+Kvint7ew0TExOBy5cvk5GRgc/nA+DWrVs4HI5oS7S0tEzWAnDt2jX8fj8Aw8PDrVPEJ06cSHv9+nUPwOjoKBUVFQwMDADgdDoxmUy8evWKjx8/snXrVtavX4/L5eLx48eo1WrS09Pp6OhwtbW1ab4QX7x4UTGZTENr166lq6uL/fv3IyLo9Xru3r2LTqdDRFixYgV2ux0RQUTIysqisrISESE1NTVcU1Pz+5RbHzt27EF04NSpU+zduxcRISUlBY/HQ1VVFSLCkSNHCIVCNDY2snjxYrq6uohEIpw9ezZ8+PDhyilir9d7IBQKcfr0afbs2UMkEgHAbrfz6NGjyV6vXLnCyMjI5PnMmTOMjo4SiUTwer1TxQ0NDcXv3r0bA+ju7ubgwYMEAgEA6urqyMvLY2hoiP7+flauXElmZiZ9fX2cO3cOEWHDhg08ffq0ZYq4trbWoNfrJ4xGIy9evMBgMCAiGAwGmpubiYmJQUTIyMigoqJisueysjJ27tyJiJCZmemvrq7+ZYr8D7O5Mz4+HkVRuHfv3uRATk4Ob9++Zd++fcTFxXHnzh2CwSBlZWVs2rSJkZERJiYmsFqtfovFsm6KWETEYDBo8rdt++fSpUtBgHA4jM1mY3Bw8Iuew+FwdH+pr69nfHycUCg05vF4fv2q+HN27dp1cnBwcGB8fJzs7GwKCwsZHh6mvb0dRVEwm834fD4KCgoQETZv3ozL5TrwXXGU34zG/Jrqam+018LCQnJzcyd7djgcmEwmRISioqKOaYuj6HS6VLPZ3JeSkkJ3dzeBQIDi4mIOHToEQDAYpL6+/j+bzRY/Y7mIyPbt25U/S0tvj42NDQN0dnZisVgIh8MEg0GX2+3WzUr8OTt27Kjt7OwcSEtLQ0QoKSkZd7vdX9+M2bBmzZrsvLw8v6IolJeXW3+aOEpycvISU1bWg/nz56f/dPknYrUajUWjUpnnKkC0anWhWlGOFxUVTf8zngmLtNp1apXKISIL5yZg0aLEBLXasTAh4duf8Y+QoFbXqBWlZM4CEjWafK1GYxWR2b3a7wYkJqapVaq/tVpt0pwELFu2TJOgVv8lIskiIv8DQ4HqhmfkzxMAAAAASUVORK5CYII=";
var colours = [
'rgb(255, 0, 0)',
'rgb(0, 0, 255)',
'rgb(255, 255, 0)',
'rgb(255, 0, 255)',
'rgb(0, 255, 255)'
];
var topThreeColours = [
'rgb(255,215,0)',
'rgb(230,230,230)',
'rgb(205,133,63)',
'rgb(128,128,128)',
'rgb(128,128,128)'
];
function isCanvasSupported() {
var elem = document.createElement('canvas');
return !!(elem.getContext && elem.getContext('2d'));
}
var canvasSupported = true;
Array.prototype.back = function() {
return this[this.length-1];
};
Array.prototype.binSearch = function( v ) {
var L = this.length, i = -1, m;
while( L - i > 1 )
{
if( this[m = ((L + i)>>1)] < v )
i = m;
else
L = m;
}
return L;
}
Array.prototype.swap = function( x, y ) {
var tmp = this[x];
this[x] = this[y];
this[y] = tmp;
}
String.prototype.escapeHTML = function ()
{                                        
var r =                                                               
this.replace(/&/g,'&amp;').
replace(/>/g,'&gt;').
replace(/</g,'&lt;').
replace(/"/g,'&quot;').
replace(/'/g,'&rsquo;');
return r;
};
String.prototype.escapeID = function() {
return this.replace(/[&<>"'(){}\[\]!@#$%^* ]/g,'_');
};
function encode_utf8( s ) {
return unescape( encodeURIComponent(s) );
}
function decode_utf8( s ) {
return decodeURIComponent( escape(s) );
}
function isEmptyObject( obj ) {
for ( var name in obj ) {
return false;
}
return true;
}
var hidden, visibilityChange; 
if (typeof document.hidden !== "undefined") { 
hidden = "hidden";
visibilityChange = "visibilitychange";
} else if (typeof document.mozHidden !== "undefined") {
hidden = "mozHidden";
visibilityChange = "mozvisibilitychange";
} else if (typeof document.msHidden !== "undefined") {
hidden = "msHidden";
visibilityChange = "msvisibilitychange";
} else if (typeof document.webkitHidden !== "undefined") {
hidden = "webkitHidden";
visibilityChange = "webkitvisibilitychange";
}
var showCustomCategories = true;
var flagImages = null;
function GetFlagImage( uci ) {
if( !flagImages ) {
if( !flags )
return null;
flagImages = {};
for( var cc in flags ) {
img = new Image();
img.src = flags[cc];
img.className = 'flag';
flagImages[cc] = img;
}
}
return flagImages[uci.substring(0, 3)];
}
var translations = {
'languageCode':	['en',				'fr',					'es'],
'language':		['English',			'Franais',				'Espaol'],
'hello':		['Hello!',			'Bonjour!',				'Hola!'],
'Email Comments/Suggestions': ['Email Comments/Suggestions', 'Email Commentaires/Suggestions', 'E-mail Comentarios/Sugerencias'],
'Powered by':	['Powered by',		'Propuls par',			'Desarrollado por'],
'created':		['created',			'cr',					'creada'],
'Refresh':		['Refresh',			'Actualiser',			'Actualizar'],
'by':			['by',				'par',					'por'],
'at':			['at',				'',					'en'],
'miles':		['miles',			'miles',				'millas'],
'Gap':			['Gap',				'cart',				'Lapso'],
'Name':			['Name',			'Nom',					'Nombre'],
'LastName':		['Last Name',		'Dernier nom',			'Apellido'],
'FirstName':	['First Name',		'Prnom',				'Nombre'],
'Team':			['Team',			'quipe',				'Equipo'],
'Category':		['Category',		'Catgorie',			'Categoria'],
'Nat.':			['Nat.',			'Nat.',					'Nac.'],
'State':		['State',			'tat',					'Estado'],
'Prov.':		['Prov.',			'Prov.',				'Prov.'],
'City':			['City',			'Ville',				'Ciudad'],
'License':		['License',			'Licence',				'Licencia'],
'Age':			['Age',				'ge',					'Edad'],
'Time':			['Time',			'Temps',				'Tiempo'],
'Lap':			['Lap',				'Tour',					'Vuelta'],
'lap':			['lap',				'tour',					'vuelta'],
'laps':			['laps',			'tours',				'vueltas'],
'laps of':		['laps of',			'tours de',				'vueltas de'],
'Laps of':		['laps of',			'tours de',				'vuelta de'],
'Laps to go':	['laps to go',		'tours  faire',		'vueltas antes de la meta'],
'to go':		['to go',			' faire',				'antes de la meta'],
'of':			['of',				'de',					'de'],
'1st lap':		['1st lap',			'premier tour',			'primera vuelta'],
'more laps of':	['more laps of',	'tours de plus de',		'vueltas ms de'],
'Estimated':	['Estimated',		'Estim',				'Estimado'],
'Distance':		['distance',		'la distance',			'la distancia'],
'Start':		['start',			'au dbut',				'el comienzo'],
'ClockStartTime':	['Clock Start',		"Heure de dbut",	'Inicio reloj'],
'ClockFinishTime':	['Clock Finish',	"Heure d'arrives",	'Acadabo reloj'],
'StartTime':	['Stopwatch Start',	"Premier chrono",		'Primero tiempo'],
'FinishTime':	['Stopwatch Stop',	"Deuxime chrono",		'Segundo tiempo'],
'ByFinishers':	['Show by Finishers',"Afficher par des arrives","Mostrado de finalistas"],
'CycleCategories':	['Cycle Categories',"Faites dfiler les catgories .","Puede cambiar entre las categoras."],
'Winner':		['winner',			'gagnant',				'ganador'],
'starters':		['starters',		'entres',				'aperitivos'],
'finishers':	['finishers',		'arrives',				'finalistas'],
'registered':	['registered',		"inscrit",				"registrado"],
'Show 100s of Seconds': ['Show 100s of Seconds', 'Afficer 100s de seconds', 'Mostrar 100s de segundos'],
'Hide Lap Info':['Hide Lap Info',	'Masquer les infos de tour',	'Ocultar la info de vuelta'],
'Show Every Lap':['Show Every Lap',	'Afficher tous les tours', 'Mostrar todas las vueltas'],
'Show Every {} Laps': ['Show Every {} Laps','Afficher tous les {} tours', 'Mostrar cada {} vueltas'],
'Show:':		['Show:',			'Afficher:',			'Mostrar:'],
'All':			['All',				'Tous',					'Todo'],
'Lap Times':	['Times',			'Temps',				'Tiempos'],
'Race Times':	['Race Times',		'Temps de course',		'Tiempos de carrera'],
'Race Time':	['Race',			'Temps de la course',		'Tiempo de carrera'],
'Time Gaps':	['Gaps',			"carts",				'Diferencia'],
'Gap Percents':	['Percent',			'Pour cent',			'Ciento'],
'Lap Speed':	['Speed',			'Vitesse',				'Velocidad'],
'Projected Time':['Projected Time',	'Temps prvu',			'Tiempo projectada'],
'Est. Distance Gap': ['Est. Distance',	"Distance est.", 		'Est. distancia'],
'Race Chart':	['Race Chart',		'Tableau de la course',		'Tabla de carrera'],
'Race Position':	['Race Position',	'Position de course',		'Posicin de carrera'],
'Show Start Offsets':	['Show Start Offsets',	'Afficher commencer dcalages',	'Mostrar empezar a desplazamientos'],
'Show Laps Times':	['Show Lap Times',	'Afficher les temps au tours',	'Mostrar tiempos de vuelta'],
'Show Details':	['Show Details',	'Afficher les dtails',	'Mostrar los detalles'],
'Race Lightning':	['Race Lightning',		"clair de course",	'Rayo de carrera'],
'Loop Continuously':['Loop Continuously',	'Boucle continue',	'Repetir continuamente'],
'Playback Speed':['Playback Speed',	'Vitesse de lecture',		'Velocidad de reproduccin'],
'Units:':		['Units:',			'Units:',					'Unidades:'],
'Play':			['Play',			'Lecture',					'Reproducir'],
'Rewind':		['Rewind',			'Rembobinez',				'Rebobinar'],
'Stop':			['Stop',			'Stop',						'Detener'],
'Size':			['Size',			'Taille',					'Ramao'],
'Text':			['Text',			'Texte',					'Texto'],
'Highlight Numbers': ['Highlight Numbers', 'Numros de souligner', 'Nmeros de relieve'],
'Track':		['Oval Track',		'Piste oval',				'Pista ovalada'],
'GPX':			['GPX Course',		'GPX',						'GPX'],
'Apply':		['Apply',			'Appliquer',				'Aplicar'],
'Chip Timing':	['Chip Timing',		'RFID Chronomtrage',		'Cronometraje RFID'],
'Google Earth Ride': ['See Course on Google Earth', 'Montrez cours sur Google Earth', 'Mostrar curso en Google Earth'],
'Course Map': 	['See Course on Google Maps', "Montrez cours sur Google Maps", "Mostrar curso en Google Maps"],
'Participant Map':['Participant Map', 'Carte des participants', 'Maps de los participantes'],
'Get Directions':['Get Directions',	"Obtenir un itinraire",	"Cmo llegar"],
'Total':		['Total',			'Gain',						'Ganancia'],
'Elevation':	['Elevation',		'total',					'total'],
'Gain':			['Gain',			"d'altitude",				'de la elevacin'],
'time penalty':	['time penalty',	"pnalit de temps",		"penalizacin de tiempo"],
'Factor':		['Factor%',			'Facteur%',					'Factor%'],
'ElapsedTime':	['ElapsedTime',		'Chrono',					'Tiempo transcurrido'],
'TimeSlider':	['Time Slider',		'Curseur de temps',			'Deslizador de tiempo'],
'TimeSliderInstructions':	['Slide to Change Time', "Faites glisser pour changer Temps", "Deslice para cambiar Tiempo"],
'ClickGroupInstructions':	['Click Group for Details', "Cliquez sur Groupe pour plus de dtails", "Haga clic en Grupo para detalles"],
'Situation':	['Situation',		'Situation',				'Situacin'],
'Leaders':		['Leaders',			'Tte',						'Cabeza'],
'Chase Group':	['Chase Group',		'Chase',					'Caza'],
'LapsDown':		['Laps Down',		'Rours de retard',			'Vueltas atrs'],
'CategorySummary':	['Category Summary',"Catgorie rsum",			"Resumen de la categora"],
'ShowCategorySummary':['Show Category Summary',"Afficher le catgorie rsum",	"Mostrar el resumen de la categora"],
'ShowCustomCategories':['Custom Categories',"Catgories personnalises",	"Categoras personalizadas"],
'CC':			['CC',				"CP",						"CP"],
'Sponsor':		['Sponsor',			"Promoteur",				"Patrocinador"],
'Cash':			['Cash',			"Argent",					"Dinero"],
'Merchandise':	['Merchandise',		"Marchendise",				"Mercanca"],
'Lapped':		['Lapped',			"Doubls",					"Doblados"],
'Notes':		['Notes',			"Remarques",				"Notas"],
'race in progress':	['race in progress - results unofficial', "course en cours - rsultats non officiels",	"carrera en curso - resultados extraoficiales"],
'last':			['','','']
};
(function() {
var key = 'Show Every {} Laps';
var showLaps = [2, 3, 5, 10, 15, 20, 25, 50, 100];
var showTr = translations[key];
for( let i = 0; i < showLaps.length; ++i ) {
let tr = [];
for( let j = 0; j < showTr.length; ++j )
tr.push( showTr[j].replace('{}', showLaps[i]) );
translations[key.replace('{}', showLaps[i])] = tr;
}
})();
function _( f ) {
let t = translations[f];
return t ? t[langCur] : f;
}
function ordinal( value ) {
value = parseInt( value );
if( langCur == 1 ) return value == 1 ? (value+'er') : (value+'e');
if( langCur == 2 ) return value + '.&#xb0;';
if( Math.floor((value % 100)/10) != 1 )
return value + ['th','st','nd','rd','th','th','th','th','th','th'][value%10];
return value + "th";
}
var degreesToRadians = Math.PI / 180.0;
var radiansToDegrees = 180.0 / Math.PI;
function CompassBearing( lat1, lon1, lat2, lon2 )
{
lat1 *= degreesToRadians;
lat2 *= degreesToRadians;
var diffLong = (lon2 - lon1) * degreesToRadians;
var x = Math.sin(diffLong) * Math.cos(lat2);
var y = Math.cos(lat1) * Math.sin(lat2) - (Math.sin(lat1) * Math.cos(lat2) * Math.cos(diffLong));
var bearing = Math.atan2(x, y) * radiansToDegrees;
while( bearing < 0.0 )
bearing += 360.0;
return bearing;
}
function GetLapRatio( leaderRaceTimes, tCur, iLapHint )
{
var maxLaps = leaderRaceTimes.length - 1;
if( maxLaps < 1 )
return [0, 0.0];
if( 0 <= iLapHint && iLapHint < maxLaps &&
leaderRaceTimes[iLapHint] <= tCur && tCur < leaderRaceTimes[iLapHint+1] ) {
lapRatio = (tCur - leaderRaceTimes[iLapHint]) / (leaderRaceTimes[iLapHint + 1] - leaderRaceTimes[iLapHint]);
}
else if( tCur <= leaderRaceTimes[0] ) {
iLapHint = 0;
lapRatio = 0.0;
}
else if ( tCur >= leaderRaceTimes.back() ) {
iLapHint = maxLaps - 1;
lapRatio = 1.0;
}
else {
iLapHint = Math.max( 0, Math.min(maxLaps, iLapHint) );
for( iLapHint = (leaderRaceTimes[iLapHint] < tCur ? iLapHint+1 : 0); iLapHint < maxLaps; ++iLapHint ) {
if( leaderRaceTimes[iLapHint] <= tCur )
break;
}
lapRatio = (tCur - leaderRaceTimes[iLapHint]) / (leaderRaceTimes[iLapHint + 1] - leaderRaceTimes[iLapHint]);
}
return [iLapHint, lapRatio];
}
function doReload( forceRefresh ) {
if( !forceRefresh )
return RefreshPayload();
var params = [
'raceCat=' + encodeURIComponent(encode_utf8(categoryCur)),
'highlight=' + document.getElementById('idNumsToWatch').value,
'lang=' + getLanguageCode()
];
if( cycleCategoriesMode )
params.push( 'cycleCategoriesMode=t' );
if( showCategorySummary )
params.push( 'showCategorySummary=t' );
if( arrivalMode )
params.push( 'arrivalMode=t' );
if( mapMode )
params.push( 'mapMode=t' );
if( kioskMode )
params.push( 'kioskMode=t' );
var href = window.location.href;
var qMark = href.indexOf( '?' );
if( qMark != -1 )
href = href.substring( 0, qMark );
href += '?' + params.join('&');
CloseWebSocket();
if( window.location.href != href )
window.location.href = href;
else
window.location.reload( true );
}
var reloadTriggered = false;
function TriggerReload( leaderRaceTimes, tCur, iLapHint ) {
if( !raceIsRunning || reloadTriggered )
return;
const maxLaps = leaderRaceTimes.length - 1;
if( maxLaps < 1 )
return;
if( 0 <= iLapHint && iLapHint < maxLaps &&
leaderRaceTimes[iLapHint] <= tCur && tCur < leaderRaceTimes[iLapHint+1] ) {
if( leaderRaceTimes[iLapHint+1] - tCur < 1.0 ) {
reloadTriggered = true;
setTimeout( RefreshPayload, Math.round(7000 + Math.random() * 5000) );
}
}
}
function OpenRiderDashboardViewerWindow( bib ) {
let dataToGo = {};
let catDetailsToGo = [];
for( let i = 0; i < catDetails.length; ++i ) {
const c = catDetails[i];
for( let p = 0; p < c.pos.length; ++p ) {
if( c.pos[p] == bib ) {
catDetailsToGo.push( c );
for( let q = 0; q < c.pos.length; ++q )
dataToGo[c.pos[q]] = data[c.pos[q]];
break;
}
}
}	
const payload = {'bib': bib, 'raceName': raceNameText + ': ' + raceDate, 'data':dataToGo, 'catDetails':catDetailsToGo};
const d = data[bib];
const name = (d.FirstName && d.LastName ? d.FirstName + ' ' + d.LastName : d.FirstName ? d.FirstName : d.LastName);
const newTitle = bib + ': ' + name + ' Dashboard';
const template = riderDashboard.replace(/{-{/g, '<').replace(/}-}/g, '>').replace(
'payload = null;', 'payload=' + JSON.stringify(payload) + ';' ).replace(
'TTIITTLLEE', newTitle.escapeHTML() );
let w = window.open( '', '', '', true );
w.document.write( template );
w.document.close();
}
function GetLocationCount() {
if( !travelMap )
return [];
let locCnt = {};
for( bib in data ) {
const d = data[bib];
const city = d['City'];
if( !city ) continue;
const region = (d['Prov'] || d['State'] || d['StateProv']);
if( !region ) continue;
const location = city + ', ' + region;
if( location in locCnt )
locCnt[location] += 1;
else
locCnt[location] = 1;
}
let locationCount = [];
for( location in locCnt )
locationCount.push( [location, locCnt[location]] );
return locationCount;
}
function OpenTravelMapWindow() {
var locationCount = GetLocationCount();
if( locationCount.length == 0 )
return;
var payload = {
'raceName': raceNameText + ': ' + raceDate,
'locationCount':locationCount
};
if( courseCoordinates )
payload.raceCoords = [courseCoordinates[1],courseCoordinates[0]];
if( raceAddress )
payload.raceAddress = raceAddress;
var template = travelMap.replace(/{-{/g, '<').replace(/}-}/g, '>').replace(
'payload = null;', 'payload=' + JSON.stringify(payload) + ';' );
var w = window.open( '', '', '', true );
w.document.write( template );
w.document.close();
}
function OpenCourseViewerWindow()
{
if( !courseCoordinates || !courseViewerTemplate )
return;
var payload = {};
var fields = ['courseCoordinates', 'raceNameText', 'raceDate', 'email', 'displayUnits', 'organizer',
'gpsAltigraph', 'gpsIsPointToPoint', 'gpsTotalElevationGain', 'lengthKm' ];
for( var f = 0; f < fields.length; ++f ) {
var key = fields[f];
var value = window[key];
if( value )
payload[key] = value;
}
var newTitle = 'Map: ' + payload['raceNameText'] + ' ' + payload['raceDate'];
var template = courseViewerTemplate.replace(/{-{/g, '<').replace(/}-}/g, '>').replace(
'payload = null;', 'payload=' + JSON.stringify(payload) + ';' ).replace(
'TTIITTLLEE', newTitle.escapeHTML() );
var w = window.open( '', '', '', true );
w.document.write( template );
w.document.close();
}
function LineNormal( x1, y1, x2, y2, normLen )
{
var dx = x2 - x1, dy = y2 - y1;
var scale = (normLen / 2.0) / Math.sqrt( dx*dx + dy*dy );
dx *= scale;
dy *= scale;
return [x1 + dy, y1 - dx, x1 - dy, y1 + dx];
}
function getRiderPositionTime( num )
{
let info = data[num];
if( !info )
return [null, null];
const raceTimes = info['raceTimes'];
if( !raceTimes || raceTimes.length == 0 )
return [null, null];
let p;
if( t <= raceTimes[0] ) {
const firstLapRatio = info['flr'];
p = 1.0 - firstLapRatio;
p -= Math.floor(p) - 1.0;
return [p, t];
}
let tSearch = t;
const finishTime = info['finishTime'];
if( finishTime != null && finishTime < t )
tSearch = finishTime;
if( tSearch >= raceTimes.back() ) {
const lastRaceTime = raceTimes.back();
p = raceTimes.length + (tSearch - lastRaceTime) / (lastRaceTime - raceTimes[raceTimes.length-2]);
}
else {
let i = info['iLast'];
if( !(raceTimes[i-1] < tSearch && tSearch <= raceTimes[i]) ) {
++i;
if( !(raceTimes[i-1] < tSearch && tSearch <= raceTimes[i]) ) {
i = raceTimes.binSearch( tSearch );
if( raceTimes[i] < tSearch )
++i;
}
info['iLast'] = i;
}
if( i == 1 ) {
const firstLapRatio = info['flr'];
p = (tSearch - raceTimes[i-1]) / (raceTimes[i] - raceTimes[i-1]);
p = 1.0 - firstLapRatio + p * firstLapRatio;
p -= Math.floor(p) - 1.0;
}
else
p = i + (tSearch - raceTimes[i-1]) / (raceTimes[i] - raceTimes[i-1]);
}
return [p, tSearch];
}
function DrawCircle( ctx, x, y, radius ) {
ctx.beginPath();
ctx.arc(x, y, radius, 0.0, Math.PI*2, true);
ctx.closePath();
ctx.fill();
ctx.stroke();
}
function DrawLine( ctx, x1, y1, x2, y2 ) {
ctx.beginPath();
ctx.moveTo( x1, y1 );
ctx.lineTo( x2, y2 );
ctx.stroke();
}
function TimeDifference( a, b ) {
if( showTimeDecimals ) {
a *= 100.0;
b *= 100.0;
}
const t = ~~a - ~~b;
if( showTimeDecimals )
t /= 100.0;
return t;
}
function FormatTime( t ) {
let tStr = '';
if( t < 0 ) {
tStr = '-';
t = -t;
}
const secs = ~~t;
const h = ~~(secs / (60*60));
const m = (~~(secs / 60) % 60);
const s = ~~(secs % 60);
if( h > 0 )
tStr += h + (m < 10 ? ':0' : ':') + m + (s < 10 ? ':0' : ':') + s;
else
tStr += m + (s < 10 ? ':0' : ':') + s;
if( showTimeDecimals ) {
const decimals = ~~((t - ~~t) * 100);
tStr += (decimals < 10 ? '.0' : '.') + decimals;
}
return tStr;
}
function FormatTimeGap( t ) {
let tStr = '';
if( t < 0 ) {
tStr = '-';
t = -t;
}
const secs = ~~t;
const h = ~~(secs / (60*60));
const m = (~~(secs / 60) % 60);
const s = ~~(secs % 60);
if( h > 0 )
tStr += h + (m < 10 ? 'h0' : 'h') + m + (s < 10 ? "'0" : "'") + s;
else
tStr += m + (s < 10 ? "'0" : "'") + s;
if( showTimeDecimals ) {
const decimals = ~~((t - ~~t) * 100);
tStr += (decimals < 10 ? '.0' : '.') + decimals;
}
tStr += '"';
return tStr;
}
function getShortName( num ) {
const d = data[num + ''];
let name = '';
if( d['LastName'] ) {
name = d['LastName'];
if( d['FirstName'] )
name += ', ' + d['FirstName'].substring(0, 1) + '.'
}
else if( d['FirstName'] )
name = d['FirstName'];
return name;
}
function FixedFormat( x, Length, Decimals ) {
var s = x.toFixed( Decimals );
if( s.length < Length )
s = Array(Length - s.length + 1).join('0') + s;
return s;
}
function TrackAnimation() {
this.iLapDistance = 0;
this.getXYfromPosition = function( lane, position ) {
position -= ~~(position);
const curveLength = (r/2.0) * Math.PI;
const trackLength = 4*r + 2 * curveLength;
const laneWidth = (r/2.0) / laneMax;
const laneLength = lane * laneWidth;
let riderLength = trackLength * position;
if( riderLength <= r/2 )
return [2*r + r/2.0 + riderLength, r + r/2.0 + laneLength];
riderLength -= r/2;
if( riderLength <= curveLength )
{
a = Math.PI * riderLength / curveLength;
rd = r/2 + laneLength;
return [3*r + rd*Math.sin(a), r + rd*Math.cos(a)];
}
riderLength -= curveLength;
if( riderLength <= 2*r )
return [3*r - riderLength, r/2 - laneLength];
riderLength -= 2*r;
if( riderLength <= curveLength )
{
a = Math.PI * (1.0 + riderLength / curveLength);
rd = r/2 + laneLength;
return [r + rd*Math.sin(a), r + rd*Math.cos(a)];
}	
riderLength -= curveLength;
return [r + riderLength, r + r/2 + laneLength];
}
this.getRiderXYPT = function( num, lane ) {
const positionTime = getRiderPositionTime( num );
if ( positionTime[0] == null )
return [null, null, null, null];
if( data[num]['finishTime'] != null && t >= data[num]['finishTime'] ) {
lapCur = Math.max( lapCur, data[num]['raceTimes'].length );	
return [null, null, positionTime[0], positionTime[1]];
}
lapCur = Math.max(lapCur, ~~positionTime[0]);	
let xypt = this.getXYfromPosition( lane, positionTime[0] );
if( reverseDirection )
xypt[0] = r * 4 - xypt[0];
if( finishTop )
xypt[1] = r * 2 - xypt[1];
xypt.push( positionTime[0] );
xypt.push( positionTime[1] );
return xypt;
}
this.resetCache = function() { this.cache = {}; }
this.Refresh = function() {
if( !canvas || !canvasSupported || document[hidden] )
return;
let dc = canvas.getContext('2d');
dc.textBaseline = "top";
const width = canvas.width;
const height = canvas.height;
const backColour = 'white';
dc.fillStyle = backColour;
dc.fillRect(0, 0, width, height );
if( width < 80 || height < 80 )
return;
r = ~~(width / 4);
if( r * 2 > height )
r = ~~(height / 2);
r -= (r & 1);			
const tHeight = r / 8;
const fontHeight = ~~(tHeight * fontMult);
const fontStr = fontHeight + "px Arial";
const fontStrHightlight = ~~(tHeight * 1.6 * fontMult) + "px Arial";
dc.font = fontStr;
//trackColour = 'rgb(0,255,0)';
trackColour = '#7FE57F';
dc.fillStyle = trackColour;
dc.strokeStyle = trackColour;
DrawCircle( dc, r, r, r );
DrawCircle( dc, 3*r, r, r );
dc.fillRect( r, 0, 2*r, 2*r + 2 );
const laneWidth = (r/2) / laneMax;
dc.fillStyle = backColour;
dc.strokeStyle = backColour;
DrawCircle( dc, r, r, r/2 - laneWidth );
DrawCircle( dc, 3*r, r, r/2 - laneWidth );
const pp = [r, r/2 + laneWidth, 2*r, r - 2*laneWidth + 1];
dc.fillRect( pp[0], pp[1], pp[2], pp[3] );
dc.strokeRect( pp[0], pp[1], pp[2], pp[3] );
for( let i = 0; i <= 3; ++i ) {
const p = 0.25 * i;
let p1 = this.getXYfromPosition(-1, p);
let p2 = this.getXYfromPosition(laneMax+0.25, p);
if( reverseDirection ) {
p1[0] = 4*r - p1[0];
p2[0] = 4*r - p2[0];
}
if( finishTop ) {
p1[1] = 2*r - p1[1];
p2[1] = 2*r - p2[1];
}
if( i == 0 ) {
const sfWidth = 8;
dc.strokeStyle = '#FFFFFF';
dc.fillRect( p1[0] - sfWidth / 2, Math.min(p1[1], p2[1]), sfWidth, r );
dc.strokeStyle = 'black';
dc.lineWidth = 2;
}
else {
dc.lineWidth = 1;
dc.strokeStyle = 'rgb(64,64,64)';
}
DrawLine( dc, p1[0], p1[1], p2[0], p2[1] );
}
dc.strokeStyle = 'black';
dc.fillStyle = 'black';
dc.lineWidth = 1;
numSize = (r/2)/laneMax;
lapCur = 0;	
let riderRadius = laneWidth * 0.75;
let thickLine = r / 24;
let hasFirstLapRatio = false;
firstLapRatio = 1.0;
let leaders = [];
let topThree = {};
let riderPosition = {};
if( data ) {
let riderXYPT = [];
const cd = catDetailsByName[categoryCur];
for( let p = 0; p < cd.pos.length; ++p ) {
const num = cd.pos[p];
if( !hasFirstLapRatio ) {
hasFirstLapRatio = true;
if( cd['firstLapDistance'] && cd['lapDistance'] )
firstLapRatio = cd['firstLapDistance'] / cd['lapDistance'];
}
const xypt = this.getRiderXYPT( num, num % laneMax );
if( xypt[2] == null )
continue;
xypt.splice( 0, 0, num );
riderXYPT.push( xypt );
}
riderXYPT.sort(function(x, y)
{
let r = (y[3] ? y[3] : 0) - (x[3] ? x[3] : 0);	
if( r == 0 )
r = (x[4] ? x[4] : 0) - (y[4] ? y[4] : 0);	
if( r == 0 )
r = (x[0] - y[0]);							
return -r;
});
for( let i = riderXYPT.length - 1; i >= 0 && leaders.length < 3; --i )
leaders.push( riderXYPT[i][0] );
for( let i = 0; i < leaders.length; ++i )
topThree[leaders[i]] = i;
for( let i = 0; i < riderXYPT.length; ++i )
{
var rxypt = riderXYPT[i];
riderPosition[rxypt[0]] = riderXYPT.length - i;
var x = rxypt[1];
if( x == null )
continue;
num = rxypt[0];
var y = rxypt[2];
dc.fillStyle = colours[num % colours.length];
var j = topThree[num];
if( j != undefined )
{
dc.strokeStyle = topThreeColours[j];
dc.lineWidth = thickLine;
if( numsToWatch[num] != undefined )
dc.font = fontStrHightlight;
}
else
{
j = numsToWatch[num];
if( j != undefined )
{
dc.strokeStyle = 'white';
dc.lineWidth = thickLine * 1.5;
dc.font = fontStrHightlight;
}
}
if( isNaN(x) || isNaN(y) )
continue;
//DrawCircle( dc, x, y, riderRadius );
dc.beginPath(); dc.arc(x, y, riderRadius, 0.0, Math.PI*2, true); dc.closePath(); dc.fill(); dc.stroke();
dc.fillStyle = 'black';
dc.fillText(num+'', x+numSize, y-numSize );
if( j != undefined )
{
dc.strokeStyle = 'black';
dc.lineWidth = 1;
dc.font = fontStr;
}
}
}
dc.fillStyle = 'black';
if( lapCur > 0 ) {
let table = [[],[]];
if( leaders.length > 0 ) {
const leaderRaceTimes = data[leaders[0]]['raceTimes'];
const maxLaps = leaderRaceTimes.length - 1;
const glr = GetLapRatio( leaderRaceTimes, t, this.iLapDistance );
this.iLapDistance = glr[0];
TriggerReload( leaderRaceTimes, t, this.iLapDistance );
let lapRatio = glr[1];
lapRatio = Math.floor(lapRatio * 10.0) / 10.0		
table[0].push( FixedFormat(this.iLapDistance + lapRatio, 5, 1) + ' ' + _('Laps of') + ' ' + maxLaps );
table[1].push( FixedFormat(maxLaps - this.iLapDistance - lapRatio, 5, 1) + ' ' + _('Laps to go') );
const leaderCategory = data[leaders[0]]['raceCat'];
const cat = (leaderCategory && catDetailsByName ? catDetailsByName[leaderCategory] : null);
if( cat ) {
let distanceCur = null;
let distanceRace = null;
if( cat['lapDistance'] ) {
let flr = data[leaders[0]]['flr']; if( !flr ) flr = 1.0;
let distanceLap = cat['lapDistance'];
if( cat['distanceUnit'] != displayUnits )
distanceLap *= (displayUnits == 'km' ? 1.60934 : 0.621371);
distanceRace = distanceLap * (flr + maxLaps - 1);
if( this.iLapDistance == 0 )
distanceCur = lapRatio * (distanceLap * flr);
else
distanceCur = distanceLap * (flr + this.iLapDistance - 1 + lapRatio);
}
else if( cat['raceDistance'] && leaderRaceTimes[0] != leaderRaceTimes.back() ) {
distanceRace = cat['raceDistance'];
if( cat['distanceUnit'] != displayUnits )
distanceRace *= (displayUnits == 'km' ? 1.60934 : 0.621371);
distanceCur = (t - leaderRaceTimes[0]) / (leaderRaceTimes.back() - leaderRaceTimes[0]) * distanceRace;
distanceCur = Math.max( 0.0, Math.min(distanceCur, distanceRace) );
}
if( distanceCur != null ) {
if( distanceCur != distanceRace )
distanceCur = Math.floor( distanceCur * 10.0 ) / 10.0;
table[0].push( FixedFormat(distanceCur, 5, 1) + ' ' + _(displayUnits) + ' ' + _('of') + ' ' + distanceRace.toFixed(1) );
table[1].push( FixedFormat(distanceRace - distanceCur, 5, 1) + ' ' + _(displayUnits) + ' ' + _('to go') );
}
}
}
let xRight  = 3*r + r/7;
for( let col = table[0].length - 1; col >= 0; --col ) {
let tWidth = 0;
for( let row = 0; row < table.length; ++row ) {
tWidth = Math.max( tWidth, dc.measureText(table[row][col]).width );
}
xRight -= tWidth;
let yCur = r + r/2 - laneWidth - fontHeight * 1.2 - fontHeight;
for( let row = 0; row < table.length; ++row ) {
const value = table[row][col];
let tShow = value.replace(/^0+/, '');
if( tShow.substring(0, 1) == '.' )
tShow = '0' + tShow;
dc.fillText( tShow, xRight + dc.measureText(Array(value.length - tShow.length + 1).join('0')).width, yCur );
yCur += fontHeight;
}
xRight -= fontHeight / 2.5;
}
}
let leaderWidthMax = 0;
let xLeft = ~~(r * 0.8);
if( leaders )
{
const x = xLeft;
let y = r / 2 + laneWidth * 1.5;
dc.fillText( 'Leaders:', x, y );
y += tHeight * 1.2;
thickLine = tHeight / 5;
riderRadius = tHeight / 3.5;
for( let i = 0; i < leaders.length; ++i ) {
const num = leaders[i];
dc.lineWidth = 1;
dc.strokeStyle = backColour;
dc.fillStyle = trackColour;
dc.fillRect( x - thickLine/4, y - thickLine/4, tHeight + thickLine/2, tHeight  + thickLine/2 );
dc.strokeStyle = topThreeColours[i];
dc.lineWidth = thickLine;
dc.fillStyle = colours[num % colours.length];
DrawCircle( dc, x + tHeight / 2, y + tHeight / 2, riderRadius );
dc.fillStyle = 'black';
const leadStr = num + ' ' + getShortName(num);
const tWidth = dc.measureText(leadStr).width;
if( tWidth > leaderWidthMax )
leaderWidthMax = tWidth;
dc.fillText( leadStr, x + tHeight * 1.2, y );
y += tHeight * 1.2;
}
}
if( numsToWatch ) {
let colCount = 0;
let x = xLeft + tHeight * 1.2 + leaderWidthMax + dc.measureText(' ').width;
const yTop = r / 2 + laneWidth * 1.5 + tHeight * 1.2;
let y = yTop;
let rp = [];
for( n in numsToWatch ) {
let p = riderPosition[n];
if( p != undefined )
rp.push( [p, n] );
}
rp.sort(function(x, y) { return x[0] - y[0]; });
dc.fillStyle = 'black';
for( let i = 0; i < rp.length && i < 3; ++i ) {
const num = rp[i][1];
dc.fillText( '(' + rp[i][0] + ') ' + num + ' ' + getShortName(num), x, y );
y += tHeight * 1.2;
if( y >= r * 1.5 - tHeight * 1.5 ) {
if( ++colCount == 2 )
break;
y = yTop;
x += tWidth * 1.2;
}
}
}
dc.fillStyle = 'black';
const tStr = FormatTime( t );
const tWidth = dc.measureText(tStr).width;
dc.fillText( tStr, 4*r - tWidth, 2*r - tHeight );
}
}
function GeoTrack()
{
this.setData = function( gpsData ) {
this.gpsPoints = gpsData;
this.xMax = 0.0;
this.yMax = 0.0;
let dCum = 0.0;
this.cumDistance = [];
let gpsPointsLength = this.gpsPoints.length;
for( let i = 0; i < gpsPointsLength; ++i ) {
let g = gpsData[i];
this.xMax = Math.max( this.xMax, g[0] );
this.yMax = Math.max( this.yMax, g[1] );
this.cumDistance.push( dCum );
dCum += g[2];
}
this.distanceTotal = dCum;
this.x = 0;
this.yBottom = 0;
this.mult = 1.0;
this.cache = {};
}
this.resetCache = function() { this.cache = {}; }
this.getXYTrack = function()
{
let x = this.x;
let yBottom = this.yBottom;
let mult = this.mult;
let track = [];
const gpsPointsLength = this.gpsPoints.length;
for( let i = 0; i < gpsPointsLength; ++i ) {
const p = this.gpsPoints[i];
track.push( [p[0] * mult + x, yBottom - p[1] * mult] );
}
return track;
}
this.getXY = function( lap, id ) {
if( id == undefined )
id = -1;
lap = lap - (~~lap);									
const lapDistance = lap * this.distanceTotal;			
const lenGpsPoints = this.gpsPoints.length;
let i = -1;
if( id in this.cache ) {
i = this.cache[id] % lenGpsPoints;
if( !(this.cumDistance[i] <= lapDistance && lapDistance <= this.cumDistance[i] + this.gpsPoints[i][2]) ) {
i = (i + 1) % lenGpsPoints;
if( !(this.cumDistance[i] <= lapDistance && lapDistance <= this.cumDistance[i] + this.gpsPoints[i][2]) )
i = -1;
}
}
if( i == -1 ) {
i = this.cumDistance.binSearch(lapDistance);
if( this.cumDistance[i] > lapDistance )
i += lenGpsPoints - 1;
i %= lenGpsPoints;
}
if( gpsIsPointToPoint )
i = Math.min( i, lenGpsPoints - 2 )
this.cache[id] = i;
const pCur = this.gpsPoints[i], pNext = this.gpsPoints[(i+1)%lenGpsPoints];
const segDistance = lapDistance - this.cumDistance[i];
const segRatio = segDistance / pCur[2];
const x = pCur[0] + (pNext[0] - pCur[0]) * segRatio;
const y = pCur[1] + (pNext[1] - pCur[1]) * segRatio;
return [x * this.mult + this.x, this.yBottom - y * this.mult];
}
this.setDisplayRect = function( x, y, width, height ) {
if( width <= 0 || height <= 0 ) {
this.mult = 1.0;
this.x = x;
this.yBottom = y + height;
return;
}
const mult = Math.min( width / this.xMax, height / this.yMax );
const w = this.xMax * mult, h = this.yMax * mult;
const xBorder = (width - w) / 4.0;
const yBorder = (height - h) / 2.0;
this.mult = mult;
this.x = xBorder + x;
this.yBottom = y + height;
}
}
function colorBetween( r1, g1, b1, r2, g2, b2, x ) {
const r = (r1 + (r2 - r1) * x).toFixed(0);
const g = (g1 + (g2 - g1) * x).toFixed(0);
const b = (b1 + (b2 - b1) * x).toFixed(0);
return 'rgb(' + r + ',' + g + ',' + b + ')';
}
function Altigraph() {
this.altigraph = [];
this.yMax = -1000000.0;
this.yMin = 1000000.0
this.xMax = 0.0;
this.setData = function( altigraph )
{
if( !altigraph || altigraph.length == 0 )
altigraph = [];
this.altigraph = altigraph;
this.yMax = -1000000.0;
this.yMin = 1000000.0
this.xMax = 0.0;
for( let i = 0; i < altigraph.length; ++i ) {
if( altigraph[i][1] > this.yMax )
this.yMax = altigraph[i][1];
if( altigraph[i][1] < this.yMin )
this.yMin = altigraph[i][1];
}
if( altigraph.length > 0 )
this.xMax = altigraph[altigraph.length-1][0];
if( this.yMin == this.yMax )
{
this.altigraph = []
gpsAltigraph = null;
gpsTotalElevationGain = null;
}
}
this.empty = function() { return this.altigraph.length == 0; }
this.draw = function( dc, x, y, width, height )
{
if( this.altigraph.length == 0 || this.xMax == 0 || !gpsTotalElevationGain )
return;
dc.save();
y += 2;		
height -= 2;
const fontSize = (height*0.95)/4.0;
dc.font = fontSize + 'px Arial';
const minLabel = '0';
const maxLabel = ((this.yMax - this.yMin) * (displayUnits == 'km' ? 1.0 : 3.28084)).toFixed(0) + (displayUnits == 'km' ? ' m' : ' ft');
const labelWidth = Math.max( dc.measureText(minLabel).width, dc.measureText(maxLabel).width );
let altigraph = this.altigraph;
let teg = 0.0;
for( let i = 1; i < this.altigraph.length; ++i )
teg += Math.max(0.0, altigraph[i][1] - altigraph[i-1][1]);
let tegLabel = '';
let tegWidth = 0;
let tegText = [('Total'), ('Elevation'), ('Gain')];
if( gpsTotalElevationGain )
{
tegLabel = (gpsTotalElevationGain * (displayUnits == 'km' ? 1.0 : 3.28084)).toFixed(0) + (displayUnits == 'km' ? ' m' : ' ft');
tegWidth = dc.measureText(tegLabel).width;
for( let i = 0; i < tegText.length; ++i )
tegWidth = Math.max( tegWidth, dc.measureText(tegText[i]).width );
}
const border = 4;
if( labelWidth + border*2 + tegWidth > width ) {
dc.restore();
return;
}
const xMult = (width - labelWidth - border*2 - tegWidth) / this.xMax;
const yMult = height / (this.yMax - this.yMin);
let points = [];
for( let i = 0; i < this.altigraph.length; ++i )
points.push( [(x + labelWidth + border + altigraph[i][0] * xMult), (y + height - (altigraph[i][1] - this.yMin) * yMult)] );
for( let i = 1; i < this.altigraph.length; ++i ) {
const grade = (altigraph[i][1] - altigraph[i-1][1]) / (altigraph[i][0] - altigraph[i-1][0]);
if( grade > 0 )
dc.fillStyle = colorBetween( 255,255,255, 255,0,0, Math.min(1.0,  grade / 0.12) );
else
dc.fillStyle = colorBetween( 255,255,255,   0,0,0, Math.min(1.0, -grade / 0.12) );
dc.beginPath();
dc.moveTo( points[i-1][0], points[i-1][1] );
dc.lineTo( points[i  ][0], points[i  ][1] );
dc.lineTo( points[i  ][0], y + height );
dc.lineTo( points[i-1][0], y + height );
dc.closePath();
dc.fill();
}
dc.strokeStyle = '#000000';
dc.lineWidth = 2;
dc.beginPath();
dc.moveTo( points[0][0], points[0][1] );
for( let i = 1; i < this.altigraph.length; ++i )
dc.lineTo( points[i][0], points[i][1] );
dc.stroke();
dc.lineWidth = 1;
dc.beginPath();
dc.moveTo( x + labelWidth + border, y + height );
dc.lineTo( x + width - border - tegWidth, y + height );
dc.stroke();
dc.lineWidth = 1;
dc.beginPath();
dc.moveTo( x + labelWidth + border, y );
dc.lineTo( x + labelWidth + border, y + height );
dc.stroke();
dc.beginPath();
dc.moveTo( x + width - tegWidth - border, y );
dc.lineTo( x + width - tegWidth - border, y + height );
dc.stroke();
dc.fillStyle = '#000000';
dc.textAlign = 'right';
dc.textBaseline = 'top';
dc.fillText( maxLabel, x + labelWidth, y );
dc.textBaseline = 'bottom';
dc.fillText( minLabel, x + labelWidth, y + height );
if( gpsTotalElevationGain )
{
dc.textBaseline = 'top';
dc.textAlign = 'left';
let xCur = x + width - tegWidth;
let yCur = y + (height - fontSize * 1.05 * 4) / 2;
for( let i = 0; i < tegText.length; ++i ) {
dc.fillText( tegText[i], xCur, yCur );
yCur += fontSize * 1.05;
}
dc.fillText( tegLabel, xCur, yCur );
}
dc.restore();
}
}
var infoLines = 1;
function GeoAnimation()
{
this.xBanner = 300;
this.geoTrack = new GeoTrack();
this.altigraph = new Altigraph();
this.compassLocation = 'SE';
this.widthLast = -1;
this.heightLast = -1;
this.iLapDistance = 0;
this.tBannerLast = -1;
this.drawCompass = function( dc, width, height, tHeight ) {
dc.save();
const size = width / 20;
let x = this.compassLocation[1] == 'E' ? width - size * 1.4 : size * 1.4;
let y = this.compassLocation[0] == 'N' ? size * 1.4 + tHeight * 3 : height - size * 1.4;
if( this.compassLocation[0] == 'S' && gpsTotalElevationGain )
y -= height / 20;
const factor = 7.0;
const pseg1 = [[0,0], [size/factor,size/factor], [0,size]];		
const pseg2 = [[0,0], [-size/factor,size/factor], [0,size]];
const labels = ['S', 'E', 'N', 'W'];
dc.fillStyle = '#000000';
dc.strokeStyle = '#000000';
dc.lineWidth = 1;
const fontSize = size/4;
dc.font = fontSize + 'px serif';
dc.textAlign = 'center';
for( let i = 0; i < 4; ++i ) {
dc.fillText( labels[i], x + pseg1[2][0]*1.2, y + pseg1[2][1]*1.2 - fontSize/2 );
dc.beginPath();
dc.moveTo( x, y );
for( let p = 0; p < pseg1.length; ++p ) {
dc.lineTo( x + pseg1[p][0], y + pseg1[p][1] );
pseg1[p] = [pseg1[p][1], -pseg1[p][0]];	
}
dc.stroke()
dc.beginPath();
dc.moveTo( x, y );
for( let p = 0; p < pseg2.length; ++p ) {
dc.lineTo( x + pseg2[p][0], y + pseg2[p][1] );
pseg2[p] = [pseg2[p][1], -pseg2[p][0]];	
}
dc.fill()
}
dc.restore();
}
this.drawBanner = function( dc, width, height, tHeight, bannerItems ) {
drawSegment( dc, 0, 0, width, tHeight*1.2, '#0000CC', '#0000EE' );
if( bannerItems.length == 0 )
return
let y = tHeight * 0.1;
tHeight *= 0.85;
let x = this.xBanner;
let tWidth;
const positionFont = (tHeight*.7) + "px Arial";
const numberFont = 'italic bold ' + tHeight + "px Arial";
const nameFont = 'bold ' + tHeight + "px Arial";
while( x < width ) {
for( let i = 0; i < bannerItems.length && x < width; ++i ) {
const position = bannerItems[i][1];
const num = bannerItems[i][0];
const name = getShortName( num );
if( position == 1 ) {
x += tHeight / 2;
tWidth = checkeredFlag.width;
if( x + tWidth > 0 && x < width )
dc.drawImage( checkeredFlag, x, y );
x += tWidth + tHeight / 2;
}
dc.font = positionFont;
tWidth = dc.measureText(position).width;
if( x + tWidth > 0 && x < width ) {
dc.fillStyle = '#FFFFFF';
dc.fillText(position, x, y );
}
x += tWidth + tHeight / 4;
dc.font = numberFont;
tWidth = dc.measureText(num).width;
if( x + tWidth > 0 && x < width) {
dc.fillStyle = '#FFFF00';
dc.fillText(num, x, y );
}
x += tWidth + tHeight / 3;
dc.font = nameFont;
tWidth = dc.measureText(name).width;
if( x + tWidth > 0 && x < width ) {
dc.fillStyle = '#FFFFFF';
dc.fillText(name, x, y );
}
x += tWidth + tHeight;
}
if( x < 0 )
this.xBanner = x;
}
let tBanner = (new Date().getTime()) / 1000.0;
if( this.tBannerLast < 0 )
this.tBannerLast = tBanner;
this.xBanner -= 64.0 * (tBanner - this.tBannerLast);
this.tBannerLast = tBanner;
}
this.resetCache = function() { this.geoTrack.resetCache(); }
this.getRiderXYPT = function( num ) {
const positionTime = getRiderPositionTime( num );
if( positionTime[0] == null )
return [null, null, null, null];
if( data[num]['finishTime'] != null && t >= data[num]['finishTime'] ) {
lapCur = Math.max( lapCur, data[num]['raceTimes'].length );
return [null, null, positionTime[0], positionTime[1]];
}
lapCur = Math.max(lapCur, ~~positionTime[0]);
const xy = this.geoTrack.getXY( positionTime[0], num );
return [xy[0], xy[1], positionTime[0], positionTime[1]];
}
this.Refresh = function() {
if( !canvas || !canvasSupported || document[hidden] )
return;
let dc = canvas.getContext('2d');
dc.textBaseline = "top";
const width = canvas.width;
let height = canvas.height;
let sizeChanged = false;
if( width != this.widthLast || height != this.heightLast ) {
this.widthLast = width;
this.heightLast = height;
sizeChanged = true;
}
const backColour = 'white';
dc.fillStyle = backColour;
if( width < 80 || height < 80 ) {
dc.fillRect(0, 0, width, height );
return;
}
if( gpsTotalElevationGain && !this.altigraph.empty() ) {
const altigraphHeight = height / 8;
if( sizeChanged ) {
dc.fillRect(0, 0, width, height );
this.altigraph.draw( dc, 0, height - altigraphHeight, width, altigraphHeight );
}
height -= altigraphHeight;
}
dc.fillRect(0, 0, width, height );
let r = ~~(width / 4);
if( r * 2 > height )
r = ~~(height / 2);
r -= (r & 1);			
const border = 8;
const tHeight = ~~((r / 8) * fontMult);
const laneWidth = (r/2) / laneMax;
const fontStr = (tHeight*.8) + "px Arial";
const textVSpace = tHeight*0.2;
const fontStrHightlight = ~~(tHeight * 1.1) + "px Arial";
dc.font = fontStr;
const compassSize = (width / 20) * 1.4 * 2;
const trackWidth = width - border * 2 - laneWidth*2 - compassSize;
const topMargin = 2*border + tHeight * infoLines + textVSpace;
const trackHeight = height - topMargin;
this.geoTrack.setDisplayRect( border, topMargin, trackWidth, trackHeight - laneWidth );
dc.beginPath();
const points = this.geoTrack.getXYTrack();
dc.moveTo( points[0][0], points[0][1] );
const pointsLength = points.length;
for( var i = 1; i < pointsLength; ++i )
dc.lineTo( points[i][0], points[i][1] );
if( !gpsIsPointToPoint )
dc.closePath();
dc.lineJoin = "round";
dc.strokeStyle = "#808080";
dc.lineWidth = laneWidth * 1.25 + 2;
dc.stroke();
var trackColour = '#7FE57F';
dc.strokeStyle = trackColour;
dc.lineWidth = laneWidth * 1.25;
dc.stroke();
dc.strokeStyle = '#505050';
dc.lineWidth = 1;
dc.stroke();
this.drawCompass( dc, width, height, tHeight )
const finishLineLen = laneWidth * 2;
let fLine;
if( gpsIsPointToPoint )
fLine = LineNormal( points[points.length-1][0], points[points.length-1][1], points[points.length-2][0], points[points.length-2][1], finishLineLen );
else
fLine = LineNormal( points[0][0], points[0][1], points[1][0], points[1][1], finishLineLen );
dc.beginPath()
dc.moveTo( fLine[0], fLine[1] );
dc.lineTo( fLine[2], fLine[3] );
dc.strokeStyle = "#FFFFFF";
dc.lineWidth = laneWidth / 1.5;
dc.stroke();
dc.strokeStyle = "#000000";
dc.lineWidth = laneWidth / 5;
dc.stroke();
if( gpsIsPointToPoint )
fLine = LineNormal( points[points.length-1][0], points[points.length-1][1], points[points.length-2][0], points[points.length-2][1], laneWidth * 4 );
else
fLine = LineNormal( points[0][0], points[0][1], points[1][0], points[1][1], laneWidth * 4 );
dc.drawImage( checkeredFlag, fLine[2] - checkeredFlag.width/2, fLine[3] - checkeredFlag.height/2 );
dc.strokeStyle = 'black';
dc.fillStyle = 'black';
dc.lineWidth = 1;
numSize = (r/2)/laneMax;
lapCur = 0;
const riderRadius = laneWidth * 0.5;
const thickLine = r / 32;
let hasFirstLapRatio = false;
let firstLapRatio = 1.0;
let leaders = [];
let topThree = {};
let riderPosition = {};
if( data )
{
let riderXYPT = [];
const cd = catDetailsByName[categoryCur];
if( cd ) {
for( let p = 0; p < cd.pos.length; ++p ) {
const num = cd.pos[p];
if( !hasFirstLapRatio ) {
hasFirstLapRatio = true;
if( cd['firstLapDistance'] && cd['lapDistance'] )
firstLapRatio = cd['firstLapDistance'] / cd['lapDistance'];
}
const xypt = this.getRiderXYPT( num );
if( xypt[2] == null )
continue;
xypt.splice( 0, 0, num );
riderXYPT.push( xypt );
}
}
riderXYPT.sort(function(x, y)
{
var r = (y[3] ? y[3] : 0) - (x[3] ? x[3] : 0);	
if( r == 0 )
r = (x[4] ? x[4] : 0) - (y[4] ? y[4] : 0);	
if( r == 0 )
r = (x[0] - y[0]);							
return -r;
});
for( let i = riderXYPT.length - 1; i >= 0 && leaders.length < 5; --i )
leaders.push( riderXYPT[i][0] );
for( let i = 0; i < leaders.length; ++i )
topThree[leaders[i]] = i;
for( let i = 0; i < riderXYPT.length; ++i ) {
const rxypt = riderXYPT[i];
riderPosition[rxypt[0]] = riderXYPT.length - i;
const x = rxypt[1];
if( x == null )
continue;
let num = rxypt[0];
let y = rxypt[2];
dc.fillStyle = colours[num % colours.length];
const j = topThree[num];
if( j != undefined ) {
dc.strokeStyle = topThreeColours[j];
dc.lineWidth = thickLine;
if( numsToWatch[num] != undefined )
dc.font = fontStrHightlight;
}
else {
const j = numsToWatch[num];
if( j != undefined ) {
dc.strokeStyle = '#ffa500';
dc.lineWidth = thickLine * 1.5;
dc.font = fontStrHightlight;
}
}
if( isNaN(x) || isNaN(y) )
continue;
//DrawCircle( dc, x, y, riderRadius );
dc.beginPath(); dc.arc(x, y, riderRadius, 0.0, Math.PI*2, true); dc.closePath(); dc.fill(); dc.stroke();
if( topThree[num] != undefined || numsToWatch[num] != undefined ) {
if( isEmptyObject(numsToWatch) || numsToWatch[num] != undefined ) {
dc.fillStyle = 'black';
dc.fillText(num+'', x+numSize, y-numSize );
}
}
if( j != undefined ) {
dc.strokeStyle = 'black';
dc.lineWidth = 1;
dc.font = fontStr;
}
}
}
dc.fillStyle = '#222';
yCur = tHeight+textVSpace*1.6;
tStr = FormatTime( t );
dc.fillText( tStr, width - dc.measureText(tStr).width, yCur );
yCur += tHeight;
if( leaders.length > 0 ) {
const leaderRaceTimes = data[leaders[0]]['raceTimes'];
if( leaderRaceTimes && leaderRaceTimes.length > 0 && leaderRaceTimes[0] < leaderRaceTimes.back() ) {
let table = [];
const leaderRaceTimes = data[leaders[0]]['raceTimes'];
const maxLaps = leaderRaceTimes.length - 1;
const glr = GetLapRatio( leaderRaceTimes, t, this.iLapDistance );
this.iLapDistance = glr[0];
TriggerReload( leaderRaceTimes, t, this.iLapDistance );
let lapRatio = glr[1];
lapRatio = Math.floor(lapRatio * 10.0) / 10.0		
table.push( FixedFormat(this.iLapDistance + lapRatio, 5, 1) + ' ' + _('Laps of') + ' ' + maxLaps );
table.push( FixedFormat(maxLaps - this.iLapDistance - lapRatio, 5, 1) + ' ' + _('Laps to go') );
const leaderCategory = data[leaders[0]]['raceCat'];
const cat = (leaderCategory && catDetails ? catDetails[leaderCategory] : null);
if( cat ) {
let distanceCur = null, distanceRace = null;
if( cat['lapDistance'] ) {
const flr = data[leaders[0]]['flr']; if( !flr ) flr = 1.0;
let distanceLap = cat['lapDistance'];
if( cat['distanceUnit'] != displayUnits )
distanceLap *= (displayUnits == 'km' ? 1.60934 : 0.621371);
distanceRace = distanceLap * (flr + maxLaps - 1);
if( this.iLapDistance == 0 )
distanceCur = lapRatio * (distanceLap * flr);
else
distanceCur = distanceLap * (flr + this.iLapDistance - 1 + lapRatio);
}
else if( cat['raceDistance'] && leaderRaceTimes.length > 0 && leaderRaceTimes[0] != leaderRaceTimes.back() ) {
distanceRace = cat['raceDistance'];
if( cat['distanceUnit'] != displayUnits )
distanceRace *= (displayUnits == 'km' ? 1.60934 : 0.621371);
distanceCur = (t - leaderRaceTimes[0]) / (leaderRaceTimes.back() - leaderRaceTimes[0]) * distanceRace;
distanceCur = Math.max( 0.0, Math.min(distanceCur, distanceRace) );
}
if( distanceCur != null ) {
if( distanceCur != distanceRace )
distanceCur = Math.floor( distanceCur * 10.0 ) / 10.0;
table.push( '' );
table.push( FixedFormat(distanceCur, 5, 1) + ' ' + _(displayUnits) + ' ' + _('of') + ' ' + distanceRace.toFixed(1) );
table.push( FixedFormat(distanceRace - distanceCur, 5, 1) + ' ' + _(displayUnits) + ' ' + _('to go') );
}
}
let widthMax = 0;
for( let w = 0; w < table.length; ++w )
widthMax = Math.max( widthMax, dc.measureText(table[w]).width );
let yCur, xCur;
if( this.compassLocation[0] == 'N' )
yCur = height - tHeight * (table.length + 1);
else
yCur = tHeight+textVSpace*1.6 + tHeight * 2;
if( this.compassLocation[1] == 'E' )
xCur = width - widthMax;
else
xCur = 0;
for( let w = 0; w < table.length; ++w ) {
yCur += tHeight;
if( !table[w] )
continue;
const value = table[w];
let tShow = value.replace( /^0+/, '' );
if( tShow[0] == '.' )
tShow = '0' + tShow;
dc.fillText( tShow, xCur + dc.measureText(Array(value.length - tShow.length + 1).join('0')).width, yCur );
}
}
}
var bannerItems = [];
for( var i = 0; i < leaders.length; ++i )
bannerItems.push( [leaders[i], i+1] );
if( !isEmptyObject(numsToWatch) )
{
var rp = [];
for( var n in numsToWatch )
{
var p = riderPosition[n];
if( p != undefined )
rp.push( [p, n] );
}
rp.sort(function(x, y) { return x[0] - y[0]; });
for( var i = 0; i < rp.length; ++i )
bannerItems.push( [rp[i][1], rp[i][0]] );
}
this.drawBanner( dc, width, height, tHeight, bannerItems );
}
}
function _initAnimation() {
tLast = (new Date).getTime();
suspendAnimation = false;
}
function NextFrame() {
tDelta = ((new Date).getTime() - tLast);
SetTime( t + (tDelta/1000.0) * speedup );
tLast += tDelta;
if( !suspendAnimation ) {
if( t < tMax )
setTimeout( NextFrame, 1000.0 / framesPerSecond );
else if( loopContinuously && !raceIsRunning ) {
t = 0;
setTimeout( NextFrame, 1000.0 / framesPerSecond );
}
}
}
function HasCustomCategories() {
if( data && infoFields ) {
var customFields = infoFields.filter( h => h.startsWith('CustomCategory') );
for( var num in data ) {
var info = data[num];
for( var f = customFields.length; f--; ) {
if( info[customFields[f]] ) {
return true;
}
}
}
}
return false;
}
function HasDisplayUnit( aData ) {
for( var num in aData ) {
var info = aData[num];
if( info['speed'] )
return true;
}
return false;
}
function GetDistanceUnit( aData ) {
for( var num in aData ) {
var info = aData[num];
if( info['speed'] ) {
var speedUnit = info['speed'].split(' ')[1];
return (speedUnit.substring(0, 1) == 'k' ? 'km' : 'miles');
}
}
return 'km';
}
var lastRaceTime = 0;
function SetData( aData, tCur ) {
if( !catDetails )
catDetails = [];
catDetailsByName = {};
for( var i = 0; i < catDetails.length; ++i )
catDetailsByName[catDetails[i].name] = catDetails[i];
data = (aData || null);
if( tCur != undefined )
t = tCur;
let hasLapSpeeds = false;
let hasMultipleLaps = false;
lastRaceTime = 0;
for( let num in data )
{
const info = data[num];
info['iLast'] = 1;
if( info['raceTimes'] && info['raceTimes'].length > 2 )
hasMultipleLaps = true;
if( info['lapSpeeds'] )
hasLapSpeeds = true;
if( info['status'] == 'Finisher' && info['raceTimes'].length > 1 )
info['finishTime'] = info['raceTimes'].back()
else
info['finishTime'] = info['lastTime']
if( info['finishTime'] )
lastRaceTime = Math.max( info['finishTime'], lastRaceTime );
}
categories = [];	
for( let i = 0; i < catDetails.length; ++i )
categories.push( catDetails[i].name );
let catHTML = [];
if( categories.length > 2 ) {
catHTML.push( '<div id="buttongroup">' );
for( let i = 0; i < categories.length; ++i ) {
const cat = categories[i];
catHTML.push(
'<label class="green">' +
'<input ' +
'type="radio" ' +
'name="categorySelect" ' +
'id="idCat' + i + '" ' +
'onClick="SelectCategory(\''+i+'\');" ' +
(cat == categoryCur ? 'checked="true"': '') +
'/>' +
'<span>' + cat.escapeHTML() + '</span>' +
'</input>' +
'</label>'
);
}
catHTML.push( '</div><hr class="invisible"/>' );
}
else if( categories.length > 1 )
catHTML = ['<h2>' + categories[1].escapeHTML() + '</h2>'];
document.getElementById('idCategories').innerHTML = catHTML.join('');
let options = [
{ i:0, name:'Lap Times',	value:'showLapTimes',		requiresMultipleLaps:false, requiresLapSpeeds:false },
{ i:1, name:'Race Times',	value:'showRaceTimes',		requiresMultipleLaps:true, requiresLapSpeeds:false },
{ i:2, name:'Time Gaps',	value:'showLapGaps',		requiresMultipleLaps:true, requiresLapSpeeds:false },
{ i:3, name:'Gap Percents',	value:'showGapPercent',		requiresMultipleLaps:false, requiresLapSpeeds:false },
{ i:4, name:'Lap Speed',	value:'showLapSpeed',		requiresMultipleLaps:true, requiresLapSpeeds:true },
{ i:5, name:'Est. Distance Gap',value:'showDistanceGap',requiresMultipleLaps:true, requiresLapSpeeds:true }
];
let showOptionsSpan = document.getElementById( 'idShowOptions' );
let firstOption = true;
let showHTML = ['<div id="display_menu"><label class="heading" data-tr="Show:"></label><div class="buttonset">'];
for( let i = 0; i < options.length; ++i ) {
const o = options[i];
if( (o.requiresMultipleLaps && !hasMultipleLaps) || (o.requiresLapSpeeds && !hasLapSpeeds) )
continue;
showHTML.push( '<input type="radio" name="showOptions" id="idShowOption' + i + '" onClick="SetLapDataOption('+o.i+');"' );
if( firstOption ) {
showHTML.push( ' checked="true"' );
firstOption = false;
}
showHTML.push( '/><label for="idShowOption' + i + '" data-tr="' + o.name +'"></label>&nbsp;' );
}
if( HasCustomCategories() ) {
showHTML.push( '&nbsp;&nbsp;&nbsp;' );
showHTML.push( '<input type="checkbox" id="idShowCustomCategories" onClick="ToggleCustomCategories()"' + (showCustomCategories ? ' checked="true"' : '') + '/>' );
showHTML.push( '<label for="idShowCustomCategories" id="idShowCustomCategoriesLabel" data-tr="ShowCustomCategories"></label>' );
}
showHTML.push( '</div></div>' );
showOptionsSpan.innerHTML = showHTML.join('');
if( animationObj != null )
animationObj.Refresh();
}
function Animate( tRunning, aTMax, tCur ) {
StopAnimate();
_initAnimation();
if( !canvas )
return;
t = (tCur || 0);
if( !data )
return;
if( aTMax == undefined ) {
tMax = 0;
for( var num in data )
if( data[num]['raceTimes'].length > 0 )
tMax = Math.max(tMax, data[num]['raceTimes'].back());
}
else
tMax = aTMax;
speedup = (raceIsRunning ? 1.0 : tMax / tRunning);
setTimeout( NextFrame, 1000.0/framesPerSecond );
}
function createChild( parent, tag ) {
let child = document.createElement(tag);
parent.appendChild( child );
return child;
}
function createTextChild( parent, s ) {
let child = document.createTextNode(s);
parent.appendChild( child );
return child;
}
function createMultilineTextChild( parent, s ) {
const lines = s.split('\n');
for( const line of lines ) {
parent.appendChild( document.createTextNode(line) );
parent.appendChild( document.createElement('BR') );
}
}
var statusSortSeq = { 'Finisher':1, 'PUL':2, 'OTL':6, 'DNF':3, 'DQ':4, 'DNS':5, 'NP':7 };
function CmpResultsData( x, y ) {
var xStatus = statusSortSeq[x[4]], yStatus = statusSortSeq[y[4]];
var dStatus = xStatus - yStatus
if( dStatus != 0 )
return dStatus;
var d = x[0] - y[0];
if( d != 0 )
return -d;
if( x[4] == 'Finisher' )
return x[1] - y[1];
var d = x[5] - y[5];
if( d != 0 )
return d;
return x[2] - y[2];
}
function CmpCategoryResultsData( x, y ) {
var c = x[6] - y[6];
if( c )
return c;
return CmpResultsData( x, y );
}
function getStartOffset( num ) {
var d = data[num];
return d.raceTimes && d.raceTimes.length > 0 ? d.raceTimes[0] : 0;
}
function UpdateCatPosIndex() {
for( var c = 0; c < catDetails.length; ++c ) {
var catDetail = catDetails[c];
var posIndex = {};
var finisherCount = 0;
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetail.pos[p];
var d = data[num];
if( d.status == 'Finisher' ) {
posIndex[num] = p+1;
++finisherCount;
}
}
catDetail.posIndex = posIndex;
catDetail.finisherCount = finisherCount;
}
}
function GetAllCategoryResults( num ) {
var results = [];
if( catDetails && catDetails.length > 0 ) {
if( !catDetails[0].posIndex )
UpdateCatPosIndex();
for( var c = 0; c < catDetails.length; ++c ) {
var catDetail = catDetails[c];
if( catDetail.name != 'All' && catDetail.posIndex[num] )
results.push( catDetail.posIndex[num] + '/' + catDetail.finisherCount + ' ' + catDetail.name );
}
}
return results.join( ',  ' );
}
//----------------------------------------------------------------------
function applyRAM( dest, ram ) {
var src, i, k;
src = ram.a;
for( k in src )
dest[k] = src[k];
src = ram.m;
for( k in src )
dest[k] = src[k];
src = ram.r;
for( i = src.length-1; i >= 0; --i )
delete dest[src[i]];
}
function PostMessageRefresh() {
SetData( data, undefined );
SetRaceTime();
setCategory( categoryCur );			
RefreshResultsTable();
RefreshRaceChart();
SituationRefresh();
if( animationObj )
animationObj.resetCache();		
Animate( animationSeconds, undefined, t );
}
function SyncMsgPayload( msg ) {
for( f in msg.reference )
window[f] = msg.reference[f];
}
function isCurrentResults() {
return window.location.href.indexOf("CurrentResults.html") >= 0;
}
function isPreviousResults() {
return window.location.href.indexOf("PreviousResults.html") >= 0;
}
var versionCount = 0;
function ProcessRAM( msg ) {
if( !isCurrentResults() ) {
if( raceName && msg.reference.raceName != raceName )
return true;
}
if( msg.cmd != 'ram' || msg.reference.versionCount != versionCount + 1 )
return false;
if( !data )
data = {};
applyRAM( data, msg.infoRAM );
var c, k, f;
var catDetailsCur = {};
if( catDetails )
for( c = 0; c < catDetails.length; ++c )
catDetailsCur[catDetails[c].name] = catDetails[c];
applyRAM( catDetailsCur, msg.categoryRAM );
catDetails = [];
for( k in catDetailsCur )
catDetails.push( catDetailsCur[k] );
catDetails.sort( function(a, b) {return a.iSort - b.iSort;} );
SyncMsgPayload( msg );
return true;
}
var baselinePending = false;
function ProcessBaseline( msg ) {
if( !isCurrentResults() ) {
if( msg.reference.raceName != raceName )
return true;
}
if( msg.cmd != 'baseline' )
return false;
data = msg.info;
var c, k, f;
catDetails = [];
for( k in msg.categoryDetails )
catDetails.push( msg.categoryDetails[k] );
catDetails.sort( function(a, b) {return a.iSort - b.iSort;} );
SyncMsgPayload( msg );
baselinePending = false;	
return true;
}
var websocket = null;
var timeoutID = null;
function RetryResetWebSocket() {
if( timeoutID === null )
timeoutID = setTimeout( ResetWebSocket, 5000 );
}
function ResetWebSocket() {
if( window.location.port != '8765' )	
return;
if( timeoutID !== null ) {
clearTimeout( timeoutID );
timeoutID = null;
}
if ("WebSocket" in window) {
if( websocket && websocket.readyState != websocket.CLOSED ) {
websocket.close();
websocket = null;
}
var wsurl = 'ws://' + window.location.hostname + ':' + (parseInt(window.location.port) + 1) + '/';
//var wsurl = 'ws://' + 'localhost' + ':' + (parseInt(window.location.port) + 1) + '/';
//console.log( 'wsurl="' + wsurl + '"' );
websocket = new window.WebSocket( wsurl );
websocket.onmessage = function( evt ) {
var isCurResults = isCurrentResults();
var localRaceName = isCurResults ? 'CurrentResults' : raceName;
var msg = JSON.parse( evt.data );
if( !msg.reference ) {
console.log( evt.data );
return;
}
if( msg.reference.raceName == raceName || isCurResults ) {
if( msg.cmd == 'ram' ) {
if( ProcessRAM(msg) )
PostMessageRefresh();
else {
if( !baselinePending ) {
websocket.send( JSON.stringify({'cmd':'send_baseline', 'raceName':localRaceName}) );
baselinePending = true;
}
}
}
else if( msg.cmd == 'baseline' ) {
if( ProcessBaseline(msg) )
PostMessageRefresh();
}
}
else if( msg.cmd == 'reload_previous' && isPreviousResults() ) {
RefreshPayload();
}
};
websocket.onerror = function(e) {
console.log('WebSocket: Error.  Scheduling reconnect in 5 seconds...');
RetryResetWebSocket();
};
websocket.onclose = function(e) {
console.log('WebSocket: Closed.  Scheduling reconnect in 5 seconds...');
RetryResetWebSocket();
};
}
}
function CloseWebSocket() {
if( websocket )
websocket.close();
websocket = null;
}
function RefreshResultsTableArrival( raceTimesLength, raceTimesCopy )
{
var riderBib = [];		
var riderInfo = {};		
var categoryLaps;
var leaderTime;
var catTypes = (categoryCur == 'All' ? ['Start Wave', 'Component'] : ['Start Wave']);
for( var cc = 0; cc < catTypes.length; ++cc ) {
for( var c = 0; c < catDetails.length; ++c ) {
var catDetail = catDetails[c];
var catName = catDetail.name;
if( categoryCur != 'All' ) {
if( catDetail.catType != catTypes[cc] )
continue;
}
else {
if( categoryCur != catName )
continue;
}
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var d = data[num];
if( p == 0 ) {
categoryLaps = raceTimesLength[num];
leaderTime = raceTimesCopy[num].back() - raceTimesCopy[num][0];
if( d['factor'] )
leaderTime *= d.factor / 100.0;
}
if( d['status'] != 'Finisher' || riderInfo[num] || raceTimesLength[num] == 0 )
continue;
var riderLaps = raceTimesLength[num];
var riderTime = raceTimesCopy[num][raceTimesLength[num]-1] - raceTimesCopy[num][0];
if( d.factor )
riderTime *= d.factor / 100.0;
var gap = '';
var gapValue = catDetails[c].gapValue[p];
if( gapValue > 0 )
gap = FormatTimeGap( gapValue );
else if( gapValue < 0 )
gap = gapValue + ' ' + (gapValue == -1 ? _('lap') : _('laps'));
riderInfo[num] = {
'pos': p+1,
'gap': gap,
'catName': catName,
'time': riderTime,
'finishTime': d.clockStartTime + riderTime
};
riderBib.push( num );
}
}
}
riderBib.sort( function(a, b) { return riderInfo[b].finishTime - riderInfo[a].finishTime; } );
//
var curFields = {};
var allFactorsEqual = true;
var firstFactor = null;
var speedUnit = '';
var distanceUnit = '';
for( var i = 0; i < riderBib.length; ++i ) {
var num = riderBib[i];
var d = data[num];
for( var f = 0; f < infoFields.length; ++f )
if( d[infoFields[f]] )
curFields[infoFields[f]] = true;
if( d['factor'] ) {
if( firstFactor == null )
firstFactor = d['factor'];
if( firstFactor != d['factor'] )
allFactorsEqual = false;
}
if( !speedUnit && d['speed'] ) {
speedUnit = d['speed'].split(' ')[1];
distanceUnit = (speedUnit.substring(0, 1) == 'k' ? 'km' : 'miles');
}
}
var hasFactor = !allFactorsEqual;
var lastTimeField = hasFactor ? 'lastTime' : 'lastTimeOrig';
var hasFirstLastName = (curFields['FirstName'] && curFields['LastName']);
if( hasFirstLastName ) {
curFields['FirstName'] = false;
curFields['LastName'] = false;
curFields['Name'] = true;
}
curFields['Category'] = false;
var table = document.createElement('TABLE');
table.className = 'results';
thead = createChild( table, 'THEAD' );
tr = createChild( thead, 'TR' );
createTextChild( td = createChild(tr, 'TH'), _('Bib') );
td.id = 'idNonNumeric';
for( var f = 0; f < infoFields.length; ++f ) {
if( curFields[infoFields[f]] ) {
createTextChild( td = createChild(tr, 'TH'), _(infoFields[f]) );
td.id = 'idNonNumeric';
}
}
createTextChild( td = createChild(tr, 'TH'), _('Seq') );
td.id = 'idNonNumeric';
createTextChild( td = createChild(tr, 'TH'), _('CategorySummary') );
td.id = 'idNonNumeric';
createTextChild( td = createChild(tr, 'TH'), _('ClockFinishTime') );
createTextChild( td = createChild(tr, 'TH'), _('ClockStartTime') );
createTextChild( td = createChild(tr, 'TH'), _('Time') );
if( hasFactor )
createTextChild( td = createChild(tr, 'TH'), _('Factor') );
if( speedUnit )
createTextChild( td = createChild(tr, 'TH'), displayUnits == 'km' ? 'km/h' : 'mph' );
tbody = createChild( table, 'TBODY' );
for( var i = 0; i < riderBib.length; ++i ) {
var num = riderBib[i];
var info = riderInfo[num];
var d = data[num];
tr = createChild(tbody, 'TR');
tr.className = ((i & 1) ? 'odd' : 'even');
var projectedLap = (raceIsRunning && d.interp && d.laps && d.interp[d.laps]);
function createTD( tr ) {
var td = createChild(tr, 'TD');
return td;
}
createTextChild( td = createTD(tr), num );
for( var f = 0; f < infoFields.length; ++f ) {
var field = infoFields[f];
if( curFields[field] ) {
var v;
if( field == 'Name' ) {
if( d['LastName'] && d['FirstName'] )
v = d['LastName'] + ',&nbsp;' + d['FirstName'];
else
v = d['LastName'] || d['FirstName'];
}
else
v = d[field];
td = createTD(tr);
if( v && field == 'License' && licenseLinkTemplate )
v = '<a href="' + licenseLinkTemplate + v + '" target="_blank">'+v+'</a>';
td.innerHTML = v;
if( field != 'Age' && field != 'Factor' )
td.id = 'idNonNumeric'; 
}
}
createTextChild( td = createTD(tr), riderBib.length - i );
createTextChild( td = createTD(tr), GetAllCategoryResults(num) );
td.id = 'idNonNumeric';
createTextChild( td = createTD(tr), FormatTime(info.finishTime) );
createTextChild( td = createTD(tr), FormatTime(d.clockStartTime) );
createTextChild( td = createTD(tr), FormatTime(info.time) );
if( hasFactor )
createTextChild( td = createTD(tr), (d['factor'] ? d['factor'] : 100.0).toFixed(2) );
if( speedUnit ) {
var speed = d['speed'];
if( speed )
createTextChild( td = createTD(tr), FormatSpeed(parseFloat(speed.split(' ')[0]), distanceUnit, false) );
else
createTextChild( td = createTD(tr), '' );
}
}
resultsDiv.appendChild( table );
}
function GetPrimesTable( primeFromBib, pos ) {
if( !primes || primes.length == 0 )
return null;
var primesCur = [];
for( var p = 0; p < pos.length; ++p ) {
if( primeFromBib[pos[p]] != undefined )
for( var i = 0; i < primeFromBib[pos[p]].length; ++i )
primesCur.push( primeFromBib[pos[p]][i] );
}
if( primesCur.length == 0 )
return null;
primesCur.sort( function(x, y) {return x-y;} );
var hasMerchandise=false, hasCash=false, hasPoints=false, hasTimeBonus=false, hasSponsor=false, hasName=false, hasTeam=false;
for( var p = 0; p < primesCur.length; ++p ) {
var prime = primes[primesCur[p]];
var bib = prime.winnerBib;
var info = data[bib];
hasCash = (hasCash || prime.cash);
hasMerchandise = (hasMerchandise || prime.merchandise);
hasSponsor = (hasSponsor || prime.sponsor);
hasPoints = (hasPoints || prime.points);
hasTimeBonus = (hasTimeBonus || prime.timeBonus);
hasName = (hasName || (info['FirstName'] || info['LastName']));
hasTeam = (hasTeam || info['Team']);
}
var table = document.createElement('TABLE');
table.className = 'results';
var thead = createChild( table, 'THEAD' );
var tr = createChild( thead, 'TR' );
var td;
createTextChild( td = createChild(tr, 'TH'), _('Primes') );
td.style.fontSize = '120%';
td.colSpan = (1 + 1 + (hasName?1:0) + (hasTeam?1:0) + 1 + 1 + 1 +
(hasCash?1:0) + (hasMerchandise?1:0) + (hasPoints?1:0) + (hasTimeBonus?1:0) + 1);
td.id = 'idNonNumeric';
var tr = createChild( thead, 'TR' );
createTextChild( td = createChild(tr, 'TH'), '');
createTextChild( td = createChild(tr, 'TH'), _('Bib'));
if( hasName ) {
createTextChild( td = createChild(tr, 'TH'), _('Name'));
td.id = 'idNonNumeric';
}
if( hasTeam ) {
createTextChild( td = createChild(tr, 'TH'), _('Team'));
td.id = 'idNonNumeric';
}
createTextChild( td = createChild(tr, 'TH'), _('laps to go').replace(/^./, function (match) {return match.toUpperCase();}));
createTextChild( td = createChild(tr, 'TH'), _('For'));
td.id = 'idNonNumeric';
createTextChild( td = createChild(tr, 'TH'), _('Position'));
td.id = 'idNonNumeric';
if( hasCash )
createTextChild( td = createChild(tr, 'TH'), _('Cash'));
if( hasMerchandise ) {
createTextChild( td = createChild(tr, 'TH'), _('Merchandise'));
td.id = 'idNonNumeric';
}
if( hasSponsor ) {
createTextChild( td = createChild(tr, 'TH'), _('Sponsor'));
td.id = 'idNonNumeric';
}
if( hasPoints )
createTextChild( td = createChild(tr, 'TH'), _('Points'));
if( hasTimeBonus )
createTextChild( td = createChild(tr, 'TH'), _('Time Bonus'));
var tbody = createChild( table, 'TBODY' );
for( var p = 0; p < primesCur.length; ++p ) {
var prime = primes[primesCur[p]];
var bib = prime.winnerBib;
var info = data[bib];
var tr = createChild( tbody, 'TR' );
createTextChild( td = createChild(tr, 'TD'), (primesCur[p]+1) + '.');
createTextChild( td = createChild(tr, 'TD'), bib );
if( hasName ) {
var s = '';
if( info.LastName )		s = info.LastName;
if( info.FirstName )	s += (s ? ', ' : '') + info.FirstName;
createTextChild( td = createChild(tr, 'TD'), s );
td.id = 'idNonNumeric';
}
if( hasTeam ) {
createTextChild( td = createChild(tr, 'TD'), info.Team ? info.Team : '' );
td.id = 'idNonNumeric';
}
createTextChild( td = createChild(tr, 'TD'), prime.lapsToGo );
createTextChild( td = createChild(tr, 'TD'), prime.effortType != 'Custom' ? _(prime.effortType) : prime.effortCustom );
td.id = 'idNonNumeric';
createTextChild( td = createChild(tr, 'TD'), prime.position ? ordinal(prime.position) : '' );
td.id = 'idNonNumeric';
if( hasCash )
createTextChild( td = createChild(tr, 'TD'), prime.cash ? prime.cash.toFixed(2) : '');
if( hasMerchandise ) {
createTextChild( td = createChild(tr, 'TD'), prime.merchandise ? prime.merchandise : '');
td.id = 'idNonNumeric';
}
if( hasSponsor ) {
createTextChild( td = createChild(tr, 'TD'), prime.sponsor ? prime.sponsor : '');
td.id = 'idNonNumeric';
}
if( hasPoints )
createTextChild( td = createChild(tr, 'TD'), prime.points ? (prime.points != parseInt(prime.points) ? prime.points.toFixed(2) : prime.points) : '');
if( hasTimeBonus )
createTextChild( td = createChild(tr, 'TD'), prime.timeBonus ? FormatTime(prime.timeBonus).replace(/\..+$/,'') : '' );
}
return table;
}
function GetResultNotesTable( catDetail ) {
let resultNoteBibs = [];
for( const p of catDetail.pos ) {
if( data[p].resultNote )
resultNoteBibs.push( p );
}
if( !resultNoteBibs.length )
return null;
resultNoteBibs.sort();
let hasLicense=false, hasUCIID=false, hasName=false, hasTeam=false;
for( const p of resultNoteBibs ) {
const info = data[p];
hasLicense = (hasLicense || info['License'] );
hasUCIID = (hasUCIID || info['UICID'] );
hasName = (hasName || (info['FirstName'] || info['LastName']));
hasTeam = (hasTeam || info['Team']);
}
let table = document.createElement('TABLE');
table.className = 'results';
let thead = createChild( table, 'THEAD' );
let tr = createChild( thead, 'TR' );
let td;
createTextChild( td = createChild(tr, 'TH'), _('Notes') );
td.style.fontSize = '120%';
const colTotal = (1 + 1 + (hasLicense?1:0) + (hasUCIID?1:0) + (hasName?1:0) + (hasTeam?1:0))
td.colSpan = colTotal;
td.id = 'idNonNumeric';
tr = createChild( thead, 'TR' );
createTextChild( td = createChild(tr, 'TH'), '');
createTextChild( td = createChild(tr, 'TH'), _('Bib'));
if( hasName ) {
createTextChild( td = createChild(tr, 'TH'), _('Name'));
td.id = 'idNonNumeric';
}
if( hasLicense ) {
createTextChild( td = createChild(tr, 'TH'), _('License'));
td.id = 'idNonNumeric';
}
if( hasUCIID ) {
createTextChild( td = createChild(tr, 'TH'), _('UCIID'));
td.id = 'idNonNumeric';
}
if( hasTeam ) {
createTextChild( td = createChild(tr, 'TH'), _('Team'));
td.id = 'idNonNumeric';
}
let tbody = createChild( table, 'TBODY' );
for( let i = 0; i < resultNoteBibs.length; ++i ) {
const p = resultNoteBibs[i];
const info = data[p];
tr = createChild( tbody, 'TR' );
createTextChild( td = createChild(tr, 'TD'), (i+1) + '.');
createTextChild( td = createChild(tr, 'TD'), p );
if( hasName ) {
let s = '';
if( info.LastName )		s = info.LastName;
if( info.FirstName )	s += (s ? ', ' : '') + info.FirstName;
createTextChild( td = createChild(tr, 'TD'), s );
td.id = 'idNonNumeric';
}
if( hasLicense ) {
createTextChild( td = createChild(tr, 'TD'), info.License ? info.License : '' );
td.id = 'idNonNumeric';
}
if( hasUCIID ) {
createTextChild( td = createChild(tr, 'TD'), info.UCIID ? info.UCIID : '' );
td.id = 'idNonNumeric';
}
if( hasTeam ) {
createTextChild( td = createChild(tr, 'TD'), info.Team ? info.Team : '' );
td.id = 'idNonNumeric';
}
tr = createChild( tbody, 'TR' );
createTextChild( td = createChild(tr, 'TD'), '');
td.colSpan = 2;
createMultilineTextChild( td = createChild(tr, 'TD'), info.resultNote );
td.id = 'idNonNumeric';
td.colSpan = colTotal - 2;
}
return table;
}
var sameValue = '"';
function RefreshResultsTable()
{
resultsDiv.innerHTML = '';
if( !data )
return;
var primeFromBib = {};
if( primes && primes.length > 0 ) {
for( var i = 0; i < primes.length; ++i ) {
var winnerBib = primes[i].winnerBib;
if( !winnerBib )
continue;
if( primeFromBib[winnerBib] )
primeFromBib[winnerBib].push( i );
else
primeFromBib[winnerBib] = [i];
}
}
var raceTimesLength = {};
var raceTimesCopy = {};
if( raceIsRunning ) {
for( var num in data ) {
var raceTimes = data[num]['raceTimes'];
var adjust = 0.0;
if( isTimeTrial ) {
adjust = data[num]['startTime'];
if( !adjust )
adjust = 0.0;
}
raceTimesLength[num] = raceTimes.binSearch( t - adjust );
raceTimesCopy[num] = raceTimes.slice(0);
}
}
else {
for( var num in data ) {
var raceTimes = data[num]['raceTimes'];
raceTimesLength[num] = raceTimes.length;
raceTimesCopy[num] = raceTimes.slice(0);
}
}
if( isTimeTrial && arrivalMode ) {
RefreshResultsTableArrival( raceTimesLength, raceTimesCopy );
return;
}
if( showLapsFrequency < 0 ) {
var maxLaps = 0;
for( var num in data ) {
if( maxLaps < raceTimesLength[num] )
maxLaps = raceTimesLength[num];
}
var showLaps = document.getElementById('idShowLaps');
for( var i = 0; i < showLaps.options.length; ++i ) {
var freqCur = parseInt(showLaps.options[i].value, 10);
if( freqCur != 0 && (~~(maxLaps / freqCur) <= 12 || i == showLaps.options.length - 1) ) {
showLaps.selectedIndex = i;
showLapsFrequency = freqCur;
break;
}
}
}
var speedUnit = '';
var distanceUnit = '';
for( var c = 0; c < catDetails.length; ++c ) {
var catDetail = catDetails[c];
var catName = catDetail.name;
if( catName == 'All' )
continue;
if( categoryCur != 'All' && categoryCur != catName )
continue;
var curFields = {};
var hasLapSpeeds = false;
var allFactorsEqual = true;
var firstFactor = null;
var showingAllLaps = true;
var starters = 0, finishers = 0, finishersPercent = 0.0;
var finishTimeLast = 'xxx', gapValueLast = -1;
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var d = data[num];
if( d['factor'] ) {
if( firstFactor == null )
firstFactor = d['factor'];
if( firstFactor != d['factor'] )
allFactorsEqual = false;
}
if( !speedUnit && d['speed'] ) {
speedUnit = d['speed'].split(' ')[1];
distanceUnit = (speedUnit.substring(0, 1) == 'k' ? 'km' : 'miles');
}
if( !hasLapSpeeds && d['lapSpeeds'] )
hasLapSpeeds = true;
var raceTimes = raceTimesCopy[num];
if( raceTimesLength[num] != raceTimes.length )
showingAllLaps = false;
}
var hasFactor = !allFactorsEqual;
var lastTimeField = hasFactor ? 'lastTime' : 'lastTimeOrig';
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var d = data[num];
var lastTime = d[lastTimeField];
var raceTimes = raceTimesCopy[num];
if( raceTimes.length > 0 ) {
var firstTime = raceTimes[0];
for( var j = 0; j < raceTimes.length; ++j )
raceTimes[j] -= firstTime;
}
for( var f = 0; f < infoFields.length; ++f )
if( d[infoFields[f]] )
curFields[infoFields[f]] = true;
if( d['status'] != 'DNS' )
starters += 1;
if( d['status'] == 'Finisher' )
finishers += 1;
}
if( starters > 0 )
finishersPercent = (100.0 * finishers) / starters;
var hasFirstLastName = (curFields['FirstName'] && curFields['LastName']);
if( hasFirstLastName ) {
curFields['FirstName'] = false;
curFields['LastName'] = false;
curFields['Name'] = true;
}
if( !showCustomCategories ) {
for( var key in curFields )
if( key.startsWith('CustomCategory') )
curFields[key] = false;
}
var tLapMin = 100000 * 60.0 * 60.0;
var sLapMax = 0.0;
var lapMinCoords = null;
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var info = data[num];
if( info.lapSpeeds ) {
var lapSpeeds = info.lapSpeeds;
for( var i = 0; i < lapSpeeds.length; ++i ) {
var s = lapSpeeds[i];
if( s > sLapMax ) {
sLapMax = s;
lapMinCoords = [p, i+1];
}
}
}
else {
var raceTimes = raceTimesCopy[num];
for( var i = 1; i < raceTimesLength[num]; ++i ) {
var tMax = Math.max(raceTimes[i] - raceTimes[i-1], 0.0);
if( tMax < tLapMin ) {
tLapMin = tMax;
lapMinCoords = [p, i];
}
}
}
}
var table = document.createElement('TABLE');
table.className = 'results';
var leaderNum = catDetails[c].pos[0];
var leaderraceTimes = raceTimesCopy[leaderNum];
var catStr = catName;
var thead = createChild( table, 'THEAD' );
var tr = createChild( thead, 'TR' );
tr.onclick = doReload;
tr.style.cursor = 'pointer';
var td;
createTextChild( td = createChild(tr, 'TH'), catName + (raceIsUnstarted ? ': ' + catDetail.pos.length + ' ' + _('registered') : '') );
var catTitleTD = td;
td.style.fontSize = '120%';
td.colSpan = 4;
td.id = 'idNonNumeric';
var tdTitle = td;
var numHeaders = 0;
thead = createChild( table, 'THEAD' );
tr = createChild( thead, 'TR' );
tr.onclick = doReload;
tr.style.cursor = 'pointer';
createTextChild( td = createChild(tr, 'TH'), _('Pos') );	++numHeaders;
createTextChild( td = createChild(tr, 'TH'), _('Bib') );	++numHeaders;
td.id = 'idNonNumeric';
for( var f = 0; f < infoFields.length; ++f ) {
if( curFields[infoFields[f]] ) {
createTextChild( td = createChild(tr, 'TH'), _(infoFields[f].replace('CustomCategory','CC')) );
td.id = 'idNonNumeric';
++numHeaders;
}
}
if( showCategorySummary ) {
createTextChild( td = createChild(tr, 'TH'), _('CategorySummary') );	++numHeaders;
td.id = 'idNonNumeric';
}
if( isTimeTrial ) {
createTextChild( td = createChild(tr, 'TH'), _('ClockStartTime') );	++numHeaders;
createTextChild( td = createChild(tr, 'TH'), _('StartTime') );	++numHeaders;
createTextChild( td = createChild(tr, 'TH'), _('FinishTime') );	++numHeaders;
}
if( hasFactor ) {
createTextChild( td = createChild(tr, 'TH'), _('ElapsedTime') );	++numHeaders;
createTextChild( td = createChild(tr, 'TH'), _('Factor') );	++numHeaders;
}
createTextChild( td = createChild(tr, 'TH'), _('Time') );	++numHeaders;
if( !hasFactor )
createTextChild( td = createChild(tr, 'TH'), _('Gap') );	++numHeaders;
if( speedUnit ) {
createTextChild( td = createChild(tr, 'TH'), displayUnits == 'km' ? 'km/h' : 'mph' );
++numHeaders;
}
var categoryLaps	= raceTimesLength[leaderNum];
if( winAndOut ) {
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
if( raceTimesLength[num] && raceTimesLength[num] > categoryLaps )
categoryLaps = raceTimesLength[num];
}
}
var leaderTime	= raceTimesLength[leaderNum] ? raceTimesCopy[leaderNum][raceTimesLength[leaderNum]-1] : 99999;
if( categoryLaps > 2 && showLapsFrequency != 0 ) {
for( var i = 1; i < categoryLaps; ++i ) {
if( (i % showLapsFrequency == 0 || i == 1 || i == categoryLaps-1)  ) {
createTextChild( td = createChild(tr, 'TH'), _('Lap') + ' ' + i );
++numHeaders;
}
}
}
if( !showingAllLaps ) {
createTextChild( td = createChild(tr, 'TH'), '...' );
++numHeaders;
}
tdTitle.colSpan = numHeaders;
tbody = createChild( table, 'TBODY' );
for( var p = 0; p < catDetail.pos.length; ++p ) {
var position, num;
if( arrivalMode ) {
if( !catDetail.finisherCount )
UpdateCatPosIndex();
if( p < catDetail.finisherCount ) {
position = catDetail.finisherCount - p;
num = catDetails[c].pos[position-1];
}
else {
position = p + 1;
num = catDetails[c].pos[p];
}
}
else {
position = p + 1;
num = catDetails[c].pos[p];
}
var d = data[num];
function createTD( tr ) {
var td = createChild(tr, 'TD');
return td;
}
tr = createChild(tbody, 'TR');
tr.className = ((r & 1) ? 'odd' : 'even');
var riderLaps	= raceTimesLength[num];
var riderTime	= raceTimesLength[num] ? raceTimesCopy[num][raceTimesLength[num]-1] : 99999;
var raceTimes	= raceTimesCopy[num];
var isFinisher	= (d['status'] == 'Finisher');
var tFinish = (isFinisher ? riderTime : 0.0);
tr.onclick = function(n) { return function() {ToggleNumberHighlight(n);}; }(num);
var posText = (isFinisher ? '' + position + (data[num]['relegated'] ? ' REL' : ''): d['status'] );
createTextChild( td = createTD(tr), posText );
var a = createChild( td = createTD(tr), 'A' );
createTextChild( a, num );
if( d['status'] != 'DNS' && d['status'] != 'NP' && raceTimes.length >= 2 ) {
a.onclick = function(n) { return function() {OpenRiderDashboardViewerWindow(n);}; }(num);
a.href = 'javascript:void(0)';
}
var iFastestLap = -1, iSlowestLap = -1;
if( d.lapSpeeds && d.lapSpeeds.length > 1 ) {
iFastestLap = iSlowestLap = 0;
for( var i = 1; i < d.lapSpeeds.length; ++i ) {
if( d.lapSpeeds[i] > d.lapSpeeds[iFastestLap] )
iFastestLap = i;
if( d.lapSpeeds[i] <= d.lapSpeeds[iSlowestLap] )
iSlowestLap = i;
}
}
for( var f = 0; f < infoFields.length; ++f ) {
var field = infoFields[f];
if( curFields[field] ) {
var v;
if( field == 'Name' ) {
if( d['LastName'] && d['FirstName'] )
v = d['LastName'] + ',&nbsp;' + d['FirstName'];
else
v = d['LastName'] || d['FirstName'];
}
else
v = d[field];
td = createTD(tr);
if( v && field == 'License' && licenseLinkTemplate )
v = '<a href="' + licenseLinkTemplate + v + '" target="_blank">'+v+'</a>';
else if( field == 'UCICode' && v ) {
var img = GetFlagImage( v );
if( img ) {
span = createChild( td, 'SPAN' );
span.style.whiteSpace = "nowrap";
span.appendChild( img.cloneNode(true) );
createTextChild( span, ' ' + v );
v = null;
}
}
if( v )
td.innerHTML = v;
if( field != 'Age' && field != 'Factor' )
td.id = 'idNonNumeric'; 
}
}
if( position == 1 && isFinisher && distanceUnit && d['speed'] ) {
var tFinishStr = FormatTime( tFinish );
var dot = tFinishStr.indexOf('.');
if( dot > 0 )
tFinishStr = tFinishStr.substring(0, dot);
catStr = '';
var cd = catDetail;
if( cd.raceDistance )
catStr += _('Distance') + ': ' + FormatDistance(cd.raceDistance, cd.distanceUnit ? cd.distanceUnit : 'km', true);
if( cd.lapDistance && cd.laps > 1 ) {
if( catStr )
catStr += ', ';
if( cd.firstLapDistance && cd.firstLapDistance != cd.lapDistance ) {
catStr += (
_('1st lap') + ' ' + FormatDistance(cd.firstLapDistance, cd.distanceUnit ? cd.distanceUnit : 'km', true) + ', ' +
(cd.laps-1) + ' ' + _('more laps of') + ' ' + FormatDistance(cd.lapDistance, cd.distanceUnit ? cd.distanceUnit : 'km', true));
}
else
catStr += cd.laps + ' ' + _('laps of') + ' ' + FormatDistance(cd.lapDistance, cd.distanceUnit ? cd.distanceUnit : 'km', true);
}
if( raceStartTime ) {
if( catStr )
catStr += ', ';
catStr += _('Start') + ': ' + FormatTime(raceStartTime + cd.startOffset);
}
catStr +=  '<br/>';
catStr +=
(raceIsRunning ? _('Estimated') + ': ' : '') +
_('Winner') + ': ' + tFinishStr + ' ' + _('at') + ' ' +
FormatSpeed(parseFloat(d['speed'].split(' ')[0]), cd.distanceUnit ? cd.distanceUnit : 'km', true) + ', ' +
starters + ' ' + _('starters') + ', ' +
finishers + ' ' + _('finishers') + ' (' + finishersPercent.toFixed(1) + '%)';
catTitleTD.innerHTML = '<span class="biggerFont">' + catName +
(raceIsRunning ? " (" + _('race in progress') + ')' : '') + '</span>' +
'<br/><span class="smallfont">' + catStr + '</span>';
}
if( showCategorySummary ) {
createTextChild( td = createTD(tr), GetAllCategoryResults(num) );
td.id = 'idNonNumeric'; 
}
if( isTimeTrial ) {
createTextChild( td = createTD(tr), d['clockStartTime'] ? FormatTime(d['clockStartTime']) : '' );
createTextChild( td = createTD(tr), d['startTime'] ? FormatTime(d['startTime']) : '' );
var ttPenalty = (d['ttPenalty'] ? d['ttPenalty'] : 0.0);
createTextChild( td = createTD(tr),
(isFinisher && d['startTime'] && d['lastTimeOrig'])
? FormatTime(d['startTime']+d['lastTimeOrig']-ttPenalty)
: '' );
}
if( hasFactor ) {
var tFinishOrig = (isFinisher ? Math.max(d['lastTimeOrig'] - getStartOffset(num), 0.0) : 0.0);
var finishTimeOrig = (isFinisher ? FormatTime(tFinishOrig) : '');
createTextChild( td = createTD(tr), finishTimeOrig );
var factor = d['factor'];
if( !factor )
factor = 100.0;
createTextChild( td = createTD(tr), factor.toFixed(2) );
}
var finishTime = '';
if( isFinisher && d[lastTimeField] > 0.0 ) {
finishTime = FormatTime(d[lastTimeField] - getStartOffset(num) );
if( isTimeTrial ) {
if( d['ttPenalty'] )
finishTime += '*';
}
else {
if( roadRaceFinishTimes ) {
if( finishTime == finishTimeLast )
finishTime = sameValue;
else
finishTimeLast = finishTime;
}
}
}
createTextChild( td = createTD(tr), finishTime );
if( finishTime == sameValue )
td.className = 'same-value';
var gap = (winAndOut ? FormatTimeGap(0) : '');
var gapValue = catDetail.gapValue[position-1];
if( isFinisher ) {
if( gapValue > 0 ) {
if( roadRaceFinishTimes && gapValue == gapValueLast )
gap = sameValue;
else if( r != 0 && lapDataOption == 3 )
gap = '+' + ((100.0 * gapValue) / (leaderTime - getStartOffset(num))).toFixed(2);
else
gap = FormatTimeGap( gapValue );
}
else if( gapValue < 0 ) {
gap = gapValue + ' ' + (gapValue == -1 ? _('lap') : _('laps'));
}
else if( roadRaceFinishTimes && gapValue == 0.0 && gapValueLast == 0.0 ) {
gap = sameValue;
}
gapValueLast = gapValue;
}
if( !hasFactor ) {
createTextChild( td = createTD(tr), gap );
if( gap == sameValue )
td.className = 'same-value';
}
if( speedUnit ) {
var speed = d['speed'];
if( speed )
createTextChild( td = createTD(tr), FormatSpeed(parseFloat(speed.split(' ')[0]), distanceUnit, false) );
else
createTextChild( td = createTD(tr), '' );
}
if( categoryLaps > 2 && showLapsFrequency != 0 ) {
for( var i = 1; i < categoryLaps; ++i ) {
if( !(i % showLapsFrequency == 0 || i == 1 || i == raceTimesLength[num]-1)  )
continue
if( i >= raceTimesLength[num] ) {
createTextChild( td = createChild(tr, 'TD'), ' ' );
continue;
}
switch( lapDataOption )
{
case 0:	
createTextChild( td = createChild(tr, 'TD'), FormatTime(Math.max(raceTimes[i] - raceTimes[i-1], 0.0)) );
break;
case 1:	
createTextChild( td = createChild(tr, 'TD'), FormatTime(raceTimes[i]) );
break;
case 2:	
if( r == 0 )
createTextChild( td = createChild(tr, 'TD'), FormatTime(Math.max(raceTimes[i] - raceTimes[i-1], 0.0)) );
else {
var v = TimeDifference(raceTimes[i], raceTimesCopy[leaderNum][i]);
createTextChild( td = createChild(tr, 'TD'), FormatTimeGap(v) );
}
break;
case 3:	
if( r == 0 )
createTextChild( td = createChild(tr, 'TD'), FormatTime(Math.max(raceTimes[i] - raceTimes[i-1], 0.0)) );
else
{
var v = (100.0 * (raceTimes[i] - raceTimesCopy[leaderNum][i])) / raceTimesCopy[leaderNum][i];
var sign = '+';
if( v < 0 )
{
sign = '-';
v = -v;
}
createTextChild( td = createChild(tr, 'TD'), sign + v.toFixed(2) + '%' );
}
break;
case 4:	
createTextChild( td = createChild(tr, 'TD'), FormatSpeed(d.lapSpeeds[i-1], distanceUnit, false) );
break;
case 5: 
if( r == 0 )
createTextChild( td = createChild(tr, 'TD'), '-' );
else {
var dt = raceTimes[i] - raceTimesCopy[leaderNum][i];
var s = d.lapSpeeds && d.lapSpeeds.length >= i ? d.lapSpeeds[i-1] : 0.0;
var v = '';
if( s > 0.0 )
{
var distance = s * (dt / (60.0*60.0));
v = FormatDistanceGap( distance, distanceUnit );
}
createTextChild( td = createChild(tr, 'TD'), v );
}
break;
}
var classes = [];
var isFastestLap = (lapMinCoords && p == lapMinCoords[0] && i == lapMinCoords[1]);
if( isFastestLap )													classes.push( 'fastest' );
else { 
if( i == iFastestLap+1 )										classes.push( 'fastest-lap' );
else if( i == iSlowestLap+1 )									classes.push( 'slowest-lap' );
}
if( numsToWatch[num] )												classes.push( 'highlight' );
if( classes )	td.className = classes.join( ' ' );
}
}
if( !showingAllLaps )
createTextChild( td = createTD(tr), '' );
}
var hasTTPenalties = false;
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var d = data[num];
if( d.ttPenalty ) {
hasTTPenalties = true;
break;
}
}
if( hasTTPenalties ) {
tr = createChild( tbody, 'TR' );
tr.className = 'noborder';
for( var k = 0; k < numHeaders; ++k ){
createTextChild( td = createChild(tr, 'TD'), '' );
td.innerHTML = '&nbsp;'
}
var penaltyColCount = numHeaders;
for( var f in curFields )
--penaltyColCount;
for( var p = 0; p < catDetail.pos.length; ++p ) {
var num = catDetails[c].pos[p];
var d = data[num];
if( d.ttPenalty ) {
tr = createChild( tbody, 'TR' );
tr.className = 'noborder';
createTextChild( td = createChild(tr, 'TD'), '' );				
createTextChild( td = createChild(tr, 'TD'), '* ' + num );		
for( var f = 0; f < infoFields.length; ++f )					
{
var field = infoFields[f];
if( curFields[field] )
{
var v;
if( field == 'Name' )
{
if( d['LastName'] && d['FirstName'] )
v = d['LastName'] + ',&nbsp;' + d['FirstName'];
else
v = d['LastName'] || d['FirstName'];
}
else
v = d[field];
td = createChild(tr, 'TD');
td.innerHTML = v;
if( field != 'Age' )
td.id = 'idNonNumeric'; 
}
}
td = createChild( tr, 'TD' );
td.id = 'idNonNumeric'; 
td.setAttribute( 'colspan', penaltyColCount );
td.innerHTML = d.ttPenalty.toFixed(3) + ' sec ' + _('time penalty') + (d.ttNote ? (' - ' + d.ttNote.escapeHTML()) : '');
}
}
}
resultsDiv.appendChild( table );
let primesTable = GetPrimesTable( primeFromBib, catDetail.pos );
if( primesTable )
resultsDiv.appendChild( primesTable );
let resultNotesTable = GetResultNotesTable( catDetail );
if( resultNotesTable )
resultsDiv.appendChild( resultNotesTable );
createChild(resultsDiv, 'P').innerHTML = '&nbsp;'
}
}
function byte2Hex(n) {
const nybHexString = "0123456789ABCDEF";
return String(nybHexString.substr((n >> 4) & 0x0F,1)) + nybHexString.substr(n & 0x0F,1);
}
function RGB2Color(r,g,b) {
return '#' + byte2Hex(r) + byte2Hex(g) + byte2Hex(b);
}
function makeColorGradient(frequency1, frequency2, frequency3,
phase1, phase2, phase3,
center, width, len)
{
if (len == undefined)      len = 50;
if (center == undefined)   center = 128;
if (width == undefined)    width = 127;
let grad = [];
for( let i = 0; i <= len; ++i ) {
const red = Math.sin(frequency1*i + phase1) * width + center;
const grn = Math.sin(frequency2*i + phase2) * width + center;
const blu = Math.sin(frequency3*i + phase3) * width + center;
grad.push( RGB2Color(red,grn,blu) );
}
return grad.slice(1);  
}
function lighterColor( k ) {
let s = '#';
for( let i = 0; i < 3; ++i ) {
let c = parseInt(k.substring(1 + i*2, 1 + i*2 + 2), 16);
c += (255 - c) * 0.6;
c = ~~c;
s += (c < 16 ? '0' : '') + c.toString(16);
}
return s;
}
function drawSegment( c, x, y, w, h, color, colorLighter ) {
c.save();
let gr = c.createLinearGradient( x, y, x, y+h );
gr.addColorStop(0.0, color);
gr.addColorStop(0.33, colorLighter);
gr.addColorStop(1.0, color );
c.fillStyle = gr;
c.fillRect( x, y, w, h );
if( color != '#FFFFFF' ) {
c.strokeStyle = '#000';
c.strokeRect( x, y, w, h );
}
c.restore();
}
function drawDiamond( c, xCenter, yCenter, radius ) {
c.save();
c.beginPath();
c.moveTo( xCenter + radius, yCenter );
c.lineTo( xCenter         , yCenter - radius );
c.lineTo( xCenter - radius, yCenter );
c.lineTo( xCenter         , yCenter + radius );
c.closePath();
let grd = c.createRadialGradient( 0+ xCenter, - radius*0.50 + yCenter, 0, 0 + xCenter, radius + 1 + yCenter, radius );
grd.addColorStop(0, '#FFFFFF');
grd.addColorStop(1, 'rgb(220,220,0)');
c.fillStyle = 'rgb(220,220,0)';
c.fill();
c.fillStyle = grd;
c.fill();
c.lineWidth = 1.0;
c.strokeStyle = 'rgb(128,128,128)';
c.stroke();
c.restore();
}
function drawStar( c, xCenter, yCenter, numPoints, radius, radiusInner ) {
c.save();
c.beginPath();
var angle = (Math.PI * 2.0) / numPoints;
var angle2 = angle / 2.0;
c.moveTo( 0 + xCenter, -radius + yCenter );
for( var p = 0; p < numPoints; ++p ) {
var a = p * angle + angle2 + Math.PI / 2.0;
c.lineTo( Math.cos(a) * radiusInner+ xCenter, -Math.sin(a) * radiusInner+ yCenter );
a = (p + 1) * angle + Math.PI / 2.0;
c.lineTo( Math.cos(a) * radius+ xCenter, -Math.sin(a) * radius+ yCenter );
}
c.closePath();
let grd = c.createRadialGradient( 0+ xCenter, - radius*0.50 + yCenter, 0, 0 + xCenter, radius + 1 + yCenter, radius );
grd.addColorStop(0, '#FFFFFF');
grd.addColorStop(1, 'rgb(255,165,0)');
c.fillStyle = 'rgb(255,165,0)';
c.fill();
c.fillStyle = grd;
c.fill();
c.lineWidth = 1.0;
c.strokeStyle = 'rgb(128,128,128)';
c.stroke();
c.restore();
}
var xFactorCur = 0.0;
var	barHeightCur = 0.0;
var	labelsWidthCur = 0.0;
var segmentsCur = [];
function findPos(obj) {
let curleft = 0, curtop = 0;
if (obj.offsetParent) {
curleft = obj.offsetLeft
curtop = obj.offsetTop
while (obj = obj.offsetParent) {
curleft += obj.offsetLeft
curtop += obj.offsetTop
}
}
return [curleft,curtop];
}
var hoverTimer = null;
var xEvent = null;
var yEvent = null;
function RaceChartProcessMouse( event ) {
let canvasRaceChart = document.getElementById('idRaceChart');
const pos = findPos( canvasRaceChart );
xEvent = event.pageX - canvasRaceChart.offsetLeft;
yEvent = event.pageY - canvasRaceChart.offsetTop;
if( hoverTimer != null )
clearTimeout( hoverTimer );	
hoverTimer = setTimeout( "RaceChartUpdateInfo()", 25 );
}
function RaceChartProcessClick( event ) {
let canvasRaceChart = document.getElementById('idRaceChart');
const pos = findPos( canvasRaceChart );
xEvent = event.pageX - canvasRaceChart.offsetLeft;
yEvent = event.pageY - canvasRaceChart.offsetTop;
for( let s = 0; s < segmentsCur.length; ++s ) {
const seg = segmentsCur[s];
if( seg[0] <= xEvent && xEvent < (seg[0] + seg[2]) &&
seg[1] <= yEvent && yEvent < (seg[1] + seg[3]) )
{
const num = seg[5];
document.getElementById('idNumsToWatch').value = num + '';
SetNumsToWatch();
return;
}
}
}
function getRiderName( num ) {
let name = '';
const riderData = data[num];
if( riderData ) {
if( riderData['LastName'] )
name = riderData['LastName'];
if( riderData['FirstName'] ) {
if( name )
name = name + ', ' + riderData['FirstName'];
else
name = riderData['FirstName'];
}
}
return name;
}
function getRiderTeam( num ) {
let team = '';
const riderData = data[num];
if( riderData && riderData['Team'] )
team = riderData['Team'];
return team;
}
function getRiderNameNum( num ) {
const name = getRiderName(num);
if( name )
return name + ' ' + num;
return num + '';
}
function RaceChartUpdateInfo() {
RefreshRaceChart();
let canvasRaceChart = document.getElementById('idRaceChart');
for( let s = 0; s < segmentsCur.length; ++s )
{
const seg = segmentsCur[s];
if( seg[0] <= xEvent && xEvent < (seg[0] + seg[2]) &&
seg[1] <= yEvent && yEvent < (seg[1] + seg[3]) )
{
let hover = seg[4];
const num = seg[5];
const name = getRiderNameNum( num );
const lap = seg[6];
hover = name + ': ' + _('Lap') + ' ' + hover;
if( showDetails ) {
const d = data[num];
if( d.interp[lap] )
hover += '\n' + _('Projected Time');
const detail = lapDetails[num + ',' + lap];
if( detail ) {
for( var dd = 0; dd < detail.length; ++dd ) {
if( detail[dd] )
hover += '\n' + detail[dd];
}
}
}
hover = hover.trim();
const splitHover = hover.split( '\n' );
const hoverLines = splitHover.length;
const fontHeight = 14;
const height = fontHeight * hoverLines + fontHeight / 2.0;
const margin = fontHeight / 4.0 - 1;
let c = canvasRaceChart.getContext('2d');
c.font = fontHeight + 'px Arial';
c.save();
c.lineWidth = 3;
c.strokeStyle = '#000';
c.strokeRect( seg[0], seg[1], seg[2]-1, seg[3]-1 );
let textWidth = 0;
for( let isp = 0; isp < splitHover.length; ++isp )
textWidth = Math.max( textWidth, c.measureText(splitHover[isp]).width );
const drawDirection = (x + textWidth > canvasRaceChart.width*0.90 ? -1 : 1);
c.lineWidth = 1;
let x = xEvent, y = yEvent;
c.fillStyle = '#FFF';
c.beginPath();
c.moveTo( x, y );
y -= fontHeight;
let yMax = y;
c.lineTo( x, y );
x += drawDirection * textWidth;
c.lineTo( x, y );
y -= height / 2;
c.arc( x, y, height / 2, Math.PI / 2, 3 * Math.PI / 2, drawDirection > 0 );
y -= height / 2;
let yMin = y;
x -= drawDirection * textWidth;
c.lineTo( x, y );
y += height / 2;
c.arc( x, y, height / 2, 3 * Math.PI / 2, drawDirection > 0 ? Math.PI : 0.0, drawDirection > 0 );
c.closePath();
c.fill();
c.stroke();
c.fillStyle = '#000';
c.textBaseline = 'top';
let yText = yMin + (yMax - yMin - splitHover.length*fontHeight) / 2;
for( let isp = 0; isp < splitHover.length; ++isp, yText += fontHeight )
c.fillText( splitHover[isp], xEvent - (drawDirection < 0 ? textWidth : 0), yText );
c.restore();
c.lineWidth = 2;
return;
}
}
}
function RefreshRaceChart() {
let canvasRaceChart = document.getElementById('idRaceChart');
if( !data || !canvasRaceChart || !canvasSupported || winAndOut )
return;
let iFromCategory = {};
for( let i = 0; i < categories.length; ++i )
iFromCategory[categories[i]] = i;
let showStartOffsetOption = document.getElementById('idShowStartOffsetOption');
let showStartOffsetButton = document.getElementById('idShowStartOffsets');
const showStartOffsets = showStartOffsetButton.checked;
showDetails = document.getElementById('idShowDetails').checked;
const showLapTimes = document.getElementById('idShowLapTimes').checked;
let categoriesUsed = {};
let dataMax = 0;
let resultsData = [];
let lapsMax = 0;
for( let c = 0; c < catDetails.length; ++c ) {
const catDetail = catDetails[c];
const catName = catDetail.name;
if( catName == 'All' )
continue;
if( categoryCur != 'All' && categoryCur != catName )
continue;
for( let p = 0; p < catDetail.pos.length; ++p ) {
const num = catDetail.pos[p];
const d = data[num];
const raceTimes = d['raceTimes'].slice(0);	
if( catDetail.catType != 'Start Wave' && raceTimes.length > 0 ) {
for( let j = 1; j < raceTimes.length; ++j )
raceTimes[j] -= raceTimes[0];
raceTimes[0] = 0;
}
resultsData.push( [	raceTimes.length,
raceTimes.length ? raceTimes.back() : 99999,
num,
raceTimes,
d['status'],
d['finishTime'],
iFromCategory[catName]
] );
categoriesUsed[catName] = true;
if( raceTimes.length > 0 ) {
if( raceTimes.back() > dataMax )
dataMax = raceTimes.back();
if( raceTimes.length > lapsMax )
lapsMax = raceTimes.length;
}
}
}
if( resultsData.length == 0 || lapsMax == 0 ) {
canvasRaceChart.height = 8;
return;
}
let categoryCount = 0;
for( let c in categoriesUsed )
++categoryCount;
const rowMin = 14, rowMax = rowMin*2, rows = resultsData.length + categoryCount + 2;
if( canvasRaceChart.height / rows < rowMin )
canvasRaceChart.height = ~~(rowMin * rows);
else if( canvasRaceChart.height / rows > rowMax )
canvasRaceChart.height = ~~(rowMax * rows);
const width = canvasRaceChart.width;
const height = canvasRaceChart.height;
let dc = canvasRaceChart.getContext('2d');
const backColour = 'white';
dc.textBaseline = "top";
dc.fillStyle = backColour;
dc.fillRect(0, 0, width, height );
resultsData.sort( CmpCategoryResultsData );
const iNum = 2;
const iRaceTimes = 3;
const iStatus = 4;
const iCategory = 6;
showStartOffsetOption.className = 'hidden';
let startOffset = resultsData[0][iRaceTimes][0];
for( let i = 1; i < resultsData.length; ++i ) {
if( resultsData[i][iRaceTimes][0] != startOffset ) {
showStartOffsetOption.className = 'shown';
startOffset = 0.0;
break;
}
}
if( startOffset != 0.0 ) {
for( let i = 0; i < resultsData.length; ++i ) {
var raceTimes = resultsData[i][iRaceTimes];
for( let j = 0; j < raceTimes.length; ++j )
raceTimes[j] -= startOffset;
}
dataMax -= startOffset;
}
else if( !showStartOffsets ) {
dataMax = 0;
for( let i = 0; i < resultsData.length; ++i ) {
const num = resultsData[i][iNum];
const d = data[num];
const raceTimes = resultsData[i][iRaceTimes];
if( raceTimes.length > 0 ) {
startOffset = raceTimes[0];
if( startOffset ) {
for( let j = 0; j < raceTimes.length; ++j )
raceTimes[j] -= startOffset;
}
if( raceTimes.back() > dataMax )
dataMax = raceTimes.back();
}
}
}
lapsMax = resultsData.length > 0 ? resultsData[0][iRaceTimes].length : 0;
const colors = makeColorGradient(2.4,2.4,2.4,0,2,4,128,127,500);
let lighterColors = [];
for( let i = 0; i < colors.length; ++i )
lighterColors.push( lighterColor(colors[i]) );
let barHeight = ~~(height / (resultsData.length + 3 + (categoryCur == 'All' ? categories.length-1 : 0)));
if( barHeight < 4 || dataMax == 0 )
return;
barHeight = Math.min( barHeight, 18 );
let minimizeLabels = false;
const normalTextHeight = barHeight * 0.80;
let textHeight = normalTextHeight;
const fontStr = textHeight + "px Arial";
dc.font = fontStr;
let textWidthLeft = dc.measureText('0000').width;
for( let i = 0; i < resultsData.length; ++i ) {
let rd = resultsData[i];
let num = rd[iNum];
textWidthLeft = Math.max(	dc.measureText(getRiderNameNum(num) + '0:0').width,
dc.measureText(categories[rd[iCategory]] + '0:0').width,
textWidthLeft );
}
const legendSep = 4;			
let labelsWidthLeft = textWidthLeft + legendSep;
const labelsWidthRight = dc.measureText('0000').width + legendSep;
let drawLabels = true;
if( labelsWidthLeft + labelsWidthRight > width ) {
labelsWidthLeft = labelsWidthRight = 0;
drawLabels = false;
}
let xLeft = labelsWidthLeft;
let xRight = width - labelsWidthRight;
let yBottom = barHeight * (resultsData.length + categoryCount + 1);
let yTop = 2 * barHeight;
let lineWidth = 0.5;
const fontLegendStr = (normalTextHeight*.75) + "px Arial";
dc.font = fontLegendStr;
textHeight = (normalTextHeight * .75);
let textWidth = dc.measureText( dataMax < 60*60 ? '00:00' : '00:00:00' ).width;
const numLabels = (xRight - xLeft) / (textWidth * 2.0);
const idealInterval = dataMax / numLabels;
const intervals = [1, 2, 5, 10, 15, 20, 30, 1*60, 2*60, 5*60, 10*60, 15*60, 20*60, 30*60, 1*60*60, 2*60*60, 4*60*60, 8*60*60, 12*60*60, 24*60*60];
let d = 1;
for( ; d < intervals.length - 1 && intervals[d] < idealInterval; ++d )
continue;
d = intervals[d];
const dFactor = (xRight - xLeft) / dataMax;
dc.strokeStyle = 'black';
dc.fillStyle = 'black';
dc.lineWidth = lineWidth;
for( let tCur = 0; tCur < dataMax; tCur += d ) {
const x = xLeft + tCur * dFactor;
const s = FormatTime(tCur);
const w = dc.measureText(s).width;
dc.fillText( s, x - w/2, barHeight + 2 );
if( !minimizeLabels )
dc.fillText( s, x - w/2, yBottom + 4 );
DrawLine( dc, x, yBottom+3, x, yTop-3 );
}
dc.font = fontStr;
dc.textBaseline = 'middle';
textHeight = normalTextHeight;
textWidth = dc.measureText('0000').width;
dc.lineCap = 'butt';
dc.lineJoin = 'miter';
let categoryStartOffset = 0;
const xFactor = (width - labelsWidthLeft - labelsWidthRight) / dataMax;
let yCur;
let yLast = 2 * barHeight;
let yHighlight = null;
let segmentsCur = [];
let iCategoryLast = -1;
const yTextOffset = barHeight / 2;
for( let i = 0; i < resultsData.length; ++i ) {
if( i == 0 || resultsData[i][iCategory] != iCategoryLast ) {
if( !showStartOffsets )
categoryStartOffset = resultsData[i][iRaceTimes] ? resultsData[i][iRaceTimes][0] : 0;
iCategoryLast = resultsData[i][iCategory];
if( i == 0 ) {
dc.fillStyle = '#FFFFFF';
const w = dc.measureText(categories[iCategoryLast] + '0:00').width;
dc.fillRect( legendSep, yLast, w + 1, barHeight + 1 );
dc.fillStyle = '#000000';
dc.fillText( categories[iCategoryLast], legendSep, yLast - yTextOffset );
DrawLine( dc, 0, yLast, width - labelsWidthRight + 1, yLast );
}
else {
const negOffset = -4;
dc.fillStyle = '#FFFFFF';
dc.fillRect( negOffset, yLast, width - labelsWidthRight + 1 - negOffset, barHeight + 1 );
dc.strokeRect( negOffset, yLast, width - labelsWidthRight + 1 - negOffset, barHeight );
dc.fillStyle = '#000000';
dc.fillText( categories[iCategoryLast], legendSep, yLast + yTextOffset );
yLast += barHeight;
}
}
const num = resultsData[i][iNum];
const raceTimes = resultsData[i][iRaceTimes];
let xLast = labelsWidthLeft;
let xCur = xLast;
yCur = yLast + barHeight;
if( resultsData[i][iStatus] != 'Finisher' ) {
dc.fillStyle = dnfBackgroundColour;
dc.fillRect( 0, yLast, width, yCur - yLast + 1 );
}
dc.strokeStyle = "#0F0F0F";
for( let j = 0; j < raceTimes.length; ++j ) {
if( raceIsRunning && raceTimes[j] > t )
break;
const tCur = raceTimes[j] - categoryStartOffset;
xCur = ~~(labelsWidthLeft + tCur * xFactor);
if( j === 0 ) {
dc.fillStyle = resultsData[i][iStatus] == 'Finisher' ? '#FFFFFF' : dnfBackgroundColour;
dc.fillRect( xLast, yLast, xCur - xLast + 1, yCur - yLast + 1 );
dc.strokeRect( xLast, yLast, xCur - xLast + 1, yCur - yLast + 1 );
}
else {
const riderData = data[num];
const hover = j + ', ' + FormatTime(raceTimes[j] - raceTimes[j-1]);
drawSegment( dc, xLast, yLast, xCur - xLast + 1, yCur - yLast + 1, colors[j], lighterColors[j] );
segmentsCur.push( [xLast, yLast, xCur - xLast + 1, yCur - yLast + 1, hover, num, j] );
let hasDetails = false;
if( showDetails ) {
const detail = lapDetails[num + ',' + j];
if( detail && detail[0] ) {
dc.fillStyle = '#000000';
dc.fillText( detail[0], xLast + 2, yLast + yTextOffset );
hasDetails = true;
}
}
if( showLapTimes && !hasDetails ) {
const s = FormatTime( raceTimes[j] - raceTimes[j-1] );
const w = dc.measureText(s).width;
if( w < (xCur - xLast) - legendSep * 2) {
dc.fillStyle = '#404040';
dc.fillText( s, xLast + legendSep, yLast + yTextOffset );
}
}
}
xLast = xCur;
}
xCur = ~~(labelsWidthLeft + dataMax * xFactor);
dc.fillStyle = resultsData[i][iStatus] == 'Finisher' ? '#FFFFFF' : dnfBackgroundColour;
dc.fillRect( xLast, yLast, width - xLast, yCur - yLast + 1 );
dc.strokeRect( xLast, yLast, xCur - xLast + 1, yCur - yLast + 1 );
dc.fillStyle = '#000000';
let lab = getRiderName( resultsData[i][iNum] );
if( lab )
lab += ' ' + resultsData[i][iNum];
else
lab = resultsData[i][iNum] + '';
dc.fillStyle = '#000000';
dc.fillText( lab, labelsWidthLeft - dc.measureText(lab).width - legendSep, yLast + yTextOffset );
if( !minimizeLabels ) {
lab = resultsData[i][iNum] + '';
dc.fillText( lab, width - labelsWidthRight + legendSep, yLast + yTextOffset );
}
if( numsToWatch[resultsData[i][iNum]] != undefined ) {
dc.save()
dc.strokeStyle = "#000000";
let lineWidth = 2;
dc.lineWidth = lineWidth;
dc.strokeRect( lineWidth / 2, yLast, width - lineWidth / 2, yCur - yLast + 1 - lineWidth );
dc.restore();
}
if( showDetails ) {
xLast = labelsWidthLeft;
xCur = xLast;
for( let j = 0; j < raceTimes.length; ++j ) {
if( raceIsRunning && raceTimes[j] > t )
break;
const tCur = raceTimes[j] - categoryStartOffset;
xCur = ~~(labelsWidthLeft + tCur * xFactor);
if( j != 0 ) {
const num = resultsData[i][iNum];
const d = data[num];
if( d && d.interp[j] )
drawDiamond( dc, xCur, (yCur + yLast) / 2.0, barHeight / 2.0 );
else {
const detail = lapDetails[num + ',' + j];
if( detail && detail[1] )
drawStar( dc, xCur, (yCur + yLast) / 2.0, 5, barHeight / 2.0, barHeight / 4.0 );
}
}
xLast = xCur;
}
}
yLast = yCur;
}
xFactorCur = xFactor;
barHeightCur = barHeight;
labelsWidthCur = labelsWidthLeft;
}
function Rect( x, y, width, height ) {
this.x = x;
this.y = y;
this.width = width;
this.height = height;
}
Rect.prototype.GetLeft = function() { return this.x; }
Rect.prototype.GetRight = function() { return this.x + this.width; }
Rect.prototype.GetTop = function() { return this.y; }
Rect.prototype.GetBottom = function() { return this.y + this.height; }
Rect.prototype.GetWidth = function() { return this.width; }
Rect.prototype.GetHeight = function() { return this.height; }
Rect.prototype.SetTop = function( y ) { this.y = y; }
Rect.prototype.SetBottom = function( y ) { this.y = y - this.height; }
Rect.prototype.SetLeft = function( x ) { this.x = x; }
Rect.prototype.SetRight = function( x ) { this.x = x - this.width; }
Rect.prototype.ContainsXY = function(x, y) {
return this.x <= x && x <= this.x + this.width && this.y <= y && y <= this.y + this.height;
}
Rect.prototype.print = function( label ) {
console.log( label + ': Rect(' + this.x + ',' + this.y + ',' + this.width + ',' + this.height + ')' );
}
Rect.prototype.Intersects = function( r ) {
return !(
r.x + r.width < this.x ||
this.x + this.width < r.x ||
r.y + r.height < this.y ||
this.y + this.height < r.y
);
}
var _resultsNums = [];
var _raceTMax = null;
var _lastCategory = '';
function GetValidResultsNums() {
if( _lastCategory == categoryCur )
return _resultsNums;
_resultsNums = [];
_raceTMax = null;
for( let c = 0; c < catDetails.length; ++c ) 	{
const catDetail = catDetails[c];
if( categoryCur != catDetail.name )
continue;
for( let p = 0; p < catDetail.pos.length; ++p ) {
const num = catDetail.pos[p];
const d = data[num];
const raceTimes = d['raceTimes'];
if( raceTimes && raceTimes.length >= 2 )
_resultsNums.push( num );
}
break;
}
_lastCategory = categoryCur;
return _resultsNums;
}
function GetRaceTMax() {
if( _lastCategory == categoryCur && _raceTMax != null )
return _raceTMax;
const resultsNums = GetValidResultsNums();
_raceTMax = 0.0;
for( let i = 0; i < resultsNums.length; ++i ) {
const d = data[resultsNums[i]];
if( d ) {		
const raceTimes = d['raceTimes'];
if( raceTimes.back() > _raceTMax )
_raceTMax = raceTimes.back();
}
}
return _raceTMax;
}
function ShortFormatTimeGap( t ) {
let tStr = FormatTimeGap( t );
if( tStr.substring(0, 3) == "0'0" )
tStr = tStr.substring(3);
else if( tStr.substring(0,2) == "0'" )
tStr = tStr.substring(2);
return tStr;
}
function GetLapLE( raceTimes, t ) {
let lap = raceTimes.binSearch( t );
if( lap >= raceTimes.length )
lap = raceTimes.length - 1;
return raceTimes[lap] > t ? lap-1 : lap;
}
function GetPositionSpeed( raceTimes, t ) {
const lap = GetLapLE( raceTimes, t );
const lapStartTime = raceTimes[lap];
let lapTime = 0.0;
if( lap+1 < raceTimes.length )
lapTime = raceTimes[lap+1] - raceTimes[lap];
else
lapTime = raceTimes[lap] - raceTimes[lap-1];
let speed = 1.0 / lapTime;
return {'position': lap + (t - lapStartTime) * speed, 'speed': speed};
}
function GetLeaderGap( leaderPosition, leaderSpeed, leaderRaceTimes, raceTimes, t ) {
if( !raceTimes || raceTimes.length == 0 )
return null;
if( t >= raceTimes[raceTimes.length-1] ) {
if( t >= leaderRaceTimes[leaderRaceTimes.length-1] )
return {
'gap':leaderRaceTimes.length == raceTimes.length ? raceTimes[raceTimes.length-1] - leaderRaceTimes[leaderRaceTimes.length-1] : null,
'lapsDown': raceTimes.length - leaderRaceTimes.length
};
return {'gap':null, 'lapsDown':raceTimes.length - leaderRaceTimes.length};
}
const ps = GetPositionSpeed( raceTimes, t );
const riderPosition = ps.position, riderSpeed = ps.speed;
const deltaPostion = leaderPosition - riderPosition;
let positionFraction = deltaPostion - Math.floor(deltaPostion);
if( positionFraction < 0.0 )
positionFraction += 1.0;
return {'gap':positionFraction / leaderSpeed, 'lapsDown': -Math.floor(deltaPostion)};
}
function PathFromPoints( dc, points, xTranslate, yTranslate ) {
xTranslate = xTranslate ? xTranslate : 0;
yTranslate = yTranslate ? yTranslate : 0;
dc.beginPath();
dc.moveTo( points[0][0] + xTranslate, points[0][1] + yTranslate );
for( let p = 1; p < points.length; ++p )
dc.lineTo( points[p][0] + xTranslate, points[p][1] + yTranslate );
}
function GetSituationGaps( t ) {
const BigTime = 1000.0*24.0*60.0*60.0;
const resultsNums = GetValidResultsNums();
if( resultsNums.length == 0 )
return [];
let maxLaps = 0;
for( let i = 0; i < resultsNums.length; ++i ) {
const d = data[resultsNums[i]];
if( d && d.raceTimes && d.raceTimes.length - 1 > maxLaps )
maxLaps = d.raceTimes.length - 1;
}
if( t == undefined ) {
if( raceIsRunning && timestamp ) {
const tServer = (new Date(timestamp[0]).getTime()) / 1000.0;
const tBrowser = (new Date().getTime()) / 1000.0;
while( tBrowser - tServer < 0 )
tBrowser += 60*60;
t = timestamp[1] + (tBrowser - tServer);
}
else
t = BigTime;
}
const raceTMax = GetRaceTMax();
t = Math.min( t, raceTMax );
let leaderRaceTimes = [];
for( let lap = 0; lap <= maxLaps; ++lap ) {
let tMinLap = BigTime;
for( var i = 0; i < resultsNums.length; ++i ) {
const d = data[resultsNums[i]];
if( d && d.raceTimes.length > lap && d.raceTimes[lap] < tMinLap )
tMinLap = d.raceTimes[lap];
}
leaderRaceTimes.push( tMinLap );
}
function getInfo( num, lapsDown ) {
const d = data[num];
let names = [];
if( d.LastName ) names.push( d.LastName );
if( d.FirstName ) names.push( d.FirstName.slice(0, 1) );
if( lapsDown != 0 )
num = '\u2198' + num;
return num + ' ' + names.join(',') + (lapsDown != 0 ? ' (' + lapsDown + ')': '');
}
var ps = GetPositionSpeed( leaderRaceTimes, t );
const leaderPosition = ps.position, leaderSpeed = ps.speed;
let gaps = [];
for( let i = 0; i < resultsNums.length; ++i ) {
const num = resultsNums[i];
const d = data[num];
if( d ) {
gapLapsDown = GetLeaderGap( leaderPosition, leaderSpeed, leaderRaceTimes, d.raceTimes, t );
if( gapLapsDown != null && gapLapsDown.gap != null )
gaps.push( [gapLapsDown.gap, getInfo(num, gapLapsDown.lapsDown), num] );
}
}
gaps.sort( function(a, b) { return a[0] - b[0]; } );
if( gaps.length > 0 ) {
const gapMin = gaps[0][0];
if( gapMin > 0 ) {
for( let g = 0; g < gaps.length; ++g )
gaps[g][0] -= gapMin;
}
}
const thisLap = GetLapLE(leaderRaceTimes, t);
const tCur = t;
const tAfterLeader = t - leaderRaceTimes[thisLap];
const laps = leaderRaceTimes.length - 1;
const lap = Math.min( thisLap + 1, laps );
const lapsToGo = Math.max(laps - lap, 0);
const title = 
'   ' + _('Lap') + ': ' + lap + '/' + laps + '   ' + _('Laps to go') + ': ' + lapsToGo +
'    ' + _('Race Time') + ': ' + FormatTime(tCur);
return {"gaps":gaps, "tAfterLeader":tAfterLeader, "title":title, "tCur":tCur};
}
function Situation( situationCanvas, timeRange, detailDiv) {
this.situationCanvas = situationCanvas;
this.timeRange = timeRange;
this.detailDiv = detailDiv;
const groupIndexColour = '#FFCC99';
const groupGapColour = 'rgb(255,255,102)';
const groupSizeColour = '#99CCFF';
const groupColour = 'rgb(128,128,255)';
const packColour = 'rgb(200,255,200)';
const greyPenColour = 'rgb(100,100,100, 0.64)';
const greyBrushColour = 'rgb(232,232,232)';
const blackColour = '#000000';
const whiteColour = '#FFFFFF';
this.gaps = [];
this.groupRectList = [];
this.groupFullData = [];
this.tAfterLeader = null;
this.title = null;
this.tCur = null;
this.zoom = 1.0;
this.groupClickHandler = null;
//	self.Bind(wx.EVT_LEFT_UP, self.OnMouseUp )
this.SetData = function( gaps, tAfterLeader, title, tCur ) {
this.gaps = (gaps && gaps.length > 0) ? gaps : [];
this.tAfterLeader = tAfterLeader;
this.title = title;
this.tCur = tCur;
this.DrawDetails( null, null, null, null );
this.Refresh();
}
this.SetZoom = function( zoom ) {
this.zoom = zoom;
this.Refresh();
}
this.Refresh = function() { this.Draw(); }
this.Draw = function() {
let dc = situationCanvas.getContext('2d');
const width = situationCanvas.width;
const height = situationCanvas.height;
dc.fillStyle = whiteColour;
dc.fillRect( 0, 0, width, height );
this.groupRectList = [];
this.groupFullData = [];
function SetGreyPen() { dc.strokeStyle = greyPenColour; dc.lineWidth = 1; }
const maxGapSec = 20.0*60.0*60.0;	
let groups = [];
let group = [];
let gapPrev = null;
for( let g = 0; g < this.gaps.length; ++g ) {
const gap = this.gaps[g];
if( gap[0] > maxGapSec )
break;
if( gapPrev == null || gap[0] - gapPrev[0] <= 1.0 )
group.push( gap );
else {
groups.push( group );
group = [gap];
}
gapPrev = gap;
}
if( group.length > 0 )
groups.push( group );
this.groupFullData = [];
let groupMax = 0;
let groupTimeMaxSize = null;
for( let g = 0; g < groups.length; ++g ) {
const group = groups[g];
this.groupFullData.push( group.slice() );
if( group.length > groupMax ) {
groupMax = group.length;
groupTimeMaxSize = group[0][0];
}
}
for( let i = 0; i < groups.length; ++i ) {
const group = groups[i];
if( group.length == 0 )
continue;
const groupSize = group.length;
if( group.length > 10 ) {
group = [].concat( group.slice(0,5), [[group[5][0], '...']], group.slice(group.length-5, group.length) );
}
if( i == 0 )
group.splice( 0, 0, [group[0][0], 'Lead  \u200B  ' + groupSize] );
else
group.splice( 0, 0, [group[0][0], 'Chase\u00A0' + i + '  ' + ShortFormatTimeGap(group[0][0]) + 'gap  ' + groupSize] );
groups[i] = group;
}
const fontHeight = Math.floor(height / 40);
if( fontHeight == 0 )
return;
const font = fontHeight + 'px Arial';
dc.font = font;
const spaceWidth = fontHeight / 2;
const boldFont = 'bold ' + fontHeight + 'px Arial';
const smallFontHeight = fontHeight * 0.75;
const smallFont = smallFontHeight + 'px Arial';
dc.font = font;
dc.fillStyle = blackColour;
dc.textBaseline = "top";
const border = Math.min( width, height ) / 25;
const xLeft = border*2;
const yTop = border*2.25 + fontHeight;
if( this.title != null )
dc.fillText( this.title, xLeft, border );
if( groups.length == 0 )
return;
function GetGroupTextExtent( group ) {
let widthMax = 0;
let widthCur;
for( let g = 0; g < group.length; ++g ) {
if( numsToWatch[group[g][2]] != undefined ) {
dc.save();
dc.font = boldFont;
widthCur = dc.measureText(group[g][1]).width;
dc.restore();
}
else
widthCur = dc.measureText(group[g][1]).width;
widthMax = Math.max( widthMax, widthCur );
}
return {"width":widthMax, "height":group.length*fontHeight*1.1};
}
const lastWidth = GetGroupTextExtent( groups[groups.length-1] ).width;
const xRight = width - border - lastWidth;
const yBottom = height - border;
let gapMax = 0.0;
if( groups.length > 0 && groups[0].length > 0 ) {
const groupFirst = groups[0], groupLast = groups[groups.length-1];
const tFirst = groupFirst[0][0];
const tLast = groupLast[groupLast.length-1][0];
gapMax = tLast - tFirst;
}
const xScale = (xRight - xLeft) / (gapMax != 0.0 ? gapMax : 1.0) * this.zoom;
function drawFinishLine() {
if( this.tAfterLeader == null )
return;
const x = xLeft + this.tAfterLeader * xScale;
const flWidth = width / 32;
if( x - flWidth > width )
return;
const flTop = yTop - border / 2;
const flBottom = flTop + border;
dc.strokeStyle = 'rgb(220,220,220)';
dc.lineWidth = Math.max(width / 800, 1);
dc.fillStyle = whiteColour;
dc.fillRect( x - flWidth / 2, flTop, flWidth, flBottom - flTop );
dc.strokeRect( x - flWidth / 2, flTop, flWidth, flBottom - flTop );
dc.lineWidth = flWidth / 4;
dc.lineCap = 'butt';
DrawLine( dc, x, flTop, x, flBottom );
dc.fillStyle = whiteColour;
dc.fillRect( width-border, 0, width, height );
}
drawFinishLine();
dc.strokeStyle = blackColour;
dc.lineWidth = 1;
dc.fillStyle = blackColour;
DrawLine( dc, xLeft - border, yTop, width-border, yTop );
let arrowLength = border * 0.8;
let points = [[0,0], [arrowLength, arrowLength/4], [arrowLength, -arrowLength/4]];
PathFromPoints( dc, points, border/2, yTop ); dc.closePath();
dc.fill();
dc.stroke();
SetGreyPen();
const groupTitleBrushes = [
groupIndexColour,
groupGapColour,
groupSizeColour,
];
let existingRects = [];	
const groupHeight = height / 40;
let groupRectList = [];
for( let g = 0; g < groups.length; ++g ) {
const group = groups[g];
const xBegin = xLeft + group[0][0] * xScale;
const xEnd = xLeft + group[group.length-1][0] * xScale;
dc.fillStyle = groupColour;
dc.fillRect( xBegin - groupHeight/2, yTop - groupHeight/2, xEnd - xBegin + groupHeight, groupHeight );
dc.strokeStyle = blackColour;
dc.lineCap = 'butt';
dc.lineWidth = height / 100;
DrawLine( dc, xBegin, yTop, xEnd, yTop );
const xText = xBegin;
const yText = yTop + groupHeight/2 + fontHeight;
const gte = GetGroupTextExtent( group );
const gWidth = gte.width;
const gHeight = gte.height;
const gRect = new Rect( xText, yText, gWidth + spaceWidth*2, gHeight + fontHeight*0.6 );
let conflict = true;
while( conflict ) {
conflict = false;
for( let ir = 0; ir < existingRects.length; ++ir ) {
const r = existingRects[ir];
if( r.GetRight() < gRect.GetLeft() )
break;
if( r.Intersects(gRect) ) {
gRect.SetTop( r.GetBottom()+1 );
conflict = true;
}
}
}
existingRects.push( gRect );
for( let i = existingRects.length-2; i >= 0;  --i ) {
if( existingRects[i].GetRight() < existingRects[i+1].GetRight() )
existingRects.swap(i, i+1);
else
break;
}
groupRectList.push( [group, gRect] );
}
SetGreyPen();
for( let g = 0; g < groupRectList.length; ++g ) {
const gRect = groupRectList[g][1];
DrawLine( dc, gRect.GetLeft(), yTop, gRect.GetLeft(), gRect.GetTop() );
}
dc.textBaseline = "top";
for( let ig = 0; ig < groupRectList.length; ++ig ) {
const group = groupRectList[ig][0], gRect = groupRectList[ig][1];
SetGreyPen();
dc.fillStyle = group[0][0] != groupTimeMaxSize ? greyBrushColour : packColour;
dc.fillRect( gRect.GetLeft(), gRect.GetTop(), gRect.GetWidth()-1, gRect.GetHeight()-fontHeight/2, fontHeight/3 );
dc.strokeRect( gRect.GetLeft(), gRect.GetTop(), gRect.GetWidth()-1, gRect.GetHeight()-fontHeight/2, fontHeight/3 );
const xText = gRect.GetLeft();
SetGreyPen();
dc.fillStyle = blackColour;
let yText = gRect.GetTop()
for( let i = 0; i < group.length; ++i ) {
const gap = group[i];
if( i == 0 ) {
const title = gap[1];
const fieldWidths = [-spaceWidth+2];
let iSpace = 0;
while( true ) {
iSpace = title.indexOf( '  ', iSpace );
if( iSpace < 0 ) {
fieldWidths.push( dc.measureText(title).width + spaceWidth );
break;
}
fieldWidths.push( dc.measureText(title.slice(0,iSpace)).width + spaceWidth );
iSpace += 1;
}
fieldWidths[fieldWidths.length-1] += spaceWidth/2;
let iBrush = (fieldWidths.length > 2 ? 0 : 2);
let xLast = xText;
for( let iField = 1; iField < fieldWidths.length; ++iField ) {
const tWidth = fieldWidths[iField] - fieldWidths[iField-1]
dc.fillStyle = groupTitleBrushes[iBrush];
dc.fillRect( xLast, yText, tWidth, fontHeight*1.08 );
dc.strokeRect( xLast, yText, tWidth, fontHeight*1.08 );
iBrush += 1;
xLast += tWidth;
}
}
dc.fillStyle = blackColour;
if( numsToWatch[gap[2]] != undefined ) {
dc.save();
dc.font = boldFont;
dc.fillText( gap[1], xText + spaceWidth, yText+fontHeight*0.07 );
dc.restore();
}
else
dc.fillText( gap[1], xText + spaceWidth, yText+fontHeight*0.07 );
yText += fontHeight*1.1;
}
}
this.groupRectList = groupRectList;
SetGreyPen();
dc.fillStule = greyBrushColour;
dc.font = smallFont;
let yUp = yTop - groupHeight - smallFontHeight
yText = yUp + smallFontHeight/2;
const yTextCenter = yText + smallFontHeight * 0.5;
yUp += smallFontHeight/4;
arrowLength = smallFontHeight * 0.75;
const leftArrow = [[0,0], [arrowLength, arrowLength/4], [arrowLength, -arrowLength/4]];
const rightArrow = [[0,0], [-arrowLength, arrowLength/4], [-arrowLength, -arrowLength/4]];
dc.textBaseline = "middle";
for( let iGroup = 1; iGroup < groups.length; ++iGroup ) {
const groupPrev = groups[iGroup-1], groupNext = groups[iGroup];
const tPrev = groupPrev[groupPrev.length-1][0], tNext = groupNext[0][0];
const xPrev = xLeft + tPrev * xScale, xNext = xLeft + tNext * xScale;
const sepStr = ShortFormatTimeGap(tNext - tPrev);
const tWidth = dc.measureText( sepStr ).width;
if( xNext - xPrev < tWidth * 1.25 )
continue;
DrawLine( dc, xPrev, yTop, xPrev, yUp );
DrawLine( dc, xNext, yTop, xNext, yUp );
if( xNext - xPrev > tWidth + arrowLength * 4 ) {
DrawLine( dc, xPrev, yTextCenter, xPrev + (xNext - xPrev - tWidth) / 2 - 2, yTextCenter );
DrawLine( dc, xNext - (xNext - xPrev - tWidth) / 2 + 2, yTextCenter, xNext, yTextCenter );
PathFromPoints( dc, leftArrow, xPrev, yTextCenter ); dc.closePath(); dc.stroke(); dc.fill();
PathFromPoints( dc, rightArrow, xNext, yTextCenter ); dc.closePath(); dc.stroke(); dc.fill();
}
dc.fillStyle = blackColour;
dc.fillText( sepStr, xPrev + (xNext - xPrev - tWidth) / 2, yTextCenter );
}
}
this.processClick = function( event ) {
const rect = this.situationCanvas.getBoundingClientRect();
const xEvent = event.clientX - rect.left;
const yEvent = event.clientY - rect.top;
for( let i = 0; i < this.groupRectList.length; ++i ) {
const gRect = this.groupRectList[i][1];
if( gRect.ContainsXY( xEvent, yEvent ) ) {
this.DrawDetails( gRect, i, this.groupFullData[i], this.tCur, null );
return;
}
}
this.DrawDetails( null, null, null, null );
}
this.DrawDetails = function( gRect, groupIndex, groupInfo, raceTime, clockTime ) {
this.detailDiv.innerHTML = '';
if( groupIndex == undefined || groupIndex == null ) {
const text = '\u25C0&nbsp;&nbsp;' + _('TimeSliderInstructions') + '<br/><br/><br/><br/><br/>\u25C0&nbsp;&nbsp;' + _('ClickGroupInstructions');
let para = createChild( this.detailDiv, 'p' );
para.innerHTML = text;
para.id = 'detailTitle';
return;
}
const bigSpace = '&nbsp;&nbsp;&nbsp;&nbsp;';
const title = 
(groupIndex != 0 ? _('Chase Group') + ': ' + groupIndex : _('Leaders') + ': \u2714') + 
(groupIndex != 0 ? bigSpace + _('Gap') + ': ' + ShortFormatTimeGap(groupInfo[0][0]) : '') +
bigSpace +_('Size') + ': ' + groupInfo.length + 
(raceTime != null ? bigSpace + _('Race Time') + ': ' + FormatTime(raceTime) : '' ) + 
(clockTime != null ? bigSpace + _('Clock') + ': ' + FormatTime(clockTime) : '' );
let para = createChild( this.detailDiv, 'p' );
para.innerHTML = title;
para.id = 'detailTitle';
let nums = [];
let lapsDown = {};
let sequence = {};
let numGap = {};
for( let i = 0; i < groupInfo.length; ++i ) {
const gap = groupInfo[i][0];
const info = groupInfo[i][1];
const fields = info.split(' ');
const num = parseInt( fields[0].replace(/\D/g,'') );
const lastField = fields[fields.length-1];
if( lastField.slice(0, 1) == '(' && lastField.slice(-1) == ')')
lapsDown[num] = lastField.slice(1).slice(0, -1);
nums.push( num );
numGap[num] = gap;
sequence[num] = i+1;
}
const detailFields = infoFields.slice();
let curFields = {'Seq':true, 'Gap':true, 'Bib':true, 'LapsDown':true};
for( const num of nums.length ) {
const d = data[num];			
for( let f = 0; f < detailFields.length; ++f )
if( d[infoFields[f]] )
curFields[infoFields[f]] = true;
}
let hasFirstLastName = (curFields['FirstName'] && curFields['LastName']);
if( hasFirstLastName ) {
curFields['FirstName'] = false;
curFields['LastName'] = false;
curFields['Name'] = true;
}
detailFields.splice( 0, 0, 'Seq', 'Bib' );
let numericFields = {'Seq':true, 'Bib':true, 'LapsDown':true, 'Age':true};
for( let n in lapsDown ) {
let iInsert = 2;
for( let i = 0; i < detailFields.length; ++i ) {
if( detailFields[i] == 'Name' ) {
iInsert = i + 1;
break;
}
}
detailFields.splice( iInsert, 0, 'LapsDown' );
break;
}
let table = createChild( this.detailDiv, 'TABLE');
table.className = 'results';
let thead = createChild( table, 'THEAD' );
let tr = createChild( thead, 'TR' );
for( let f = 0; f < detailFields.length; ++f ) {
const field = detailFields[f];
if( curFields[field] ) {
createTextChild( td = createChild(tr, 'TH'), _(detailFields[f]) );
td.id = 'idNonNumeric';
}
}
let tbody = createChild( table, 'TBODY' );
for( let i = 0; i < nums.length; ++i ) {
const num = nums[i];
const d = data[num];			
function createTD( tr ) {
let td = createChild(tr, 'TD');
if( numsToWatch[num] )
td.className = 'highlight';
return td;
}
let tr = createChild(tbody, 'TR');
tr.onclick = function(n) { return function() {ToggleNumberHighlight(n);}; }(num);
for( let f = 0; f < detailFields.length; ++f ) {
const field = detailFields[f];
if( curFields[field] ) {
let v;
if( field == 'Seq' )
v = i+1;
else if( field == 'Bib' )
v = num;
else if( field == 'LapsDown' )
v = lapsDown[num] != undefined ? lapsDown[num] : '';
else if( field == 'Name' ) {
if( d['LastName'] && d['FirstName'] )
v = d['LastName'] + ',&nbsp;' + d['FirstName'];
else
v = d['LastName'] || d['FirstName'];
}
else
v = d[field];
td = createTD(tr);
td.innerHTML = v;
if( !numericFields[field] )
td.id = 'idNonNumeric'; 
}
}
}
createChild( this.detailDiv, 'hr' );
}
}
function pDistanceSquared(x, y, x1, y1, x2, y2) {
const A = x - x1, B = y - y1, C = x2 - x1, D = y2 - y1;
const dot = A * C + B * D;
const len_sq = C * C + D * D;
let param = -1;
if (len_sq != 0) 
param = dot / len_sq;
let xx, yy;
if (param < 0) {
xx = x1;
yy = y1;
}
else if (param > 1) {
xx = x2;
yy = y2;
}
else {
xx = x1 + param * C;
yy = y1 + param * D;
}
const dx = x - xx, dy = y - yy;
return dx * dx + dy * dy;
}
var dnfBackgroundColour = "#E0E0E0";
function LapChart( ) {
this.lineColours = [
"#3A3312",
"#9756EF",
"#00D222",
"#69D2FD",
"#F04403",
"#FE3D94",
"#0EAB6E",
"#301F5B",
"#CDA303",
"#2C6900",
"#45DD97",
"#E8B8A4",
"#D629BD",
"#0AA2A1",
"#C30043",
"#53131A",
"#784B07",
"#395B8F",
"#284299",
"#F4B478",
"#993AAE",
"#13A3E7",
"#340631",
"#F25DEE"
];
this.lapLineColour = '#B0B0B0';
this.positionBackgroundColour = '#B7B7B7';
this.positionHorizontalLineColor = '#B9B9B9';
this.topCornerBackgroundColour = '#8E8C8D';
this.legendBackgroundColour = '#C8C8C8';
this.lappedBackgroundColour = '#D8E6F4';
this.lapLabelBorderColour = '#707070';
this.primeColour = '#FFFFAA';
this.regularLineWidth = 3;
this.selectedLineWidth = 7;
this.rowHeight = 22;
this.canvas = null;
this.data = [];
this.lapsMax = 0;
this.numSelect = null;
this.moveTimer = null;
this.doMouseMove = function( evt ) {
const numSelectOld = this.numSelect;
this.numSelect = null;
const rect = this.canvas.getBoundingClientRect();
let x = evt.clientX - rect.left, y = evt.clientY - rect.top;
for( let c = 0; c < this.data.length; ++c ) {
if( !(this.data[c].yTop <= y && y < this.data[c].yTop + this.data[c].height) )
continue;
if( this.data[c].xRight <= x ) {
const i = parseInt(((y - this.data[c].yTop) / this.rowHeight) - 1);
if( 0 <= i && i < this.data[c].nums.length )
this.numSelect = this.data[c].nums[i];
break;
}
if( this.data[c].xLeft <= x ) {
const numPos = this.data[c].numPos;
const lapsData = this.data[c].lapsData;
const xLeft = this.data[c].xLeft, xRight = this.data[c].xRight, lapWidth = this.data[c].lapWidth;
const yTop = this.data[c].yTop;
const rowHeight = this.rowHeight;
const lap = parseInt((x - xLeft) / lapWidth);
function getX(lap) { return xLeft + lap * lapWidth; }
function getY(pos) { return yTop + rowHeight * (pos + 1); }
function getSegment( lapCur, j ) {
if( !lapsData[lapCur] || !lapsData[lapCur][j] )
return null;
const num = lapsData[lapCur][j].num;
let x1, y1;
if( lapCur == 0 ) {
x1 = getX(0);
y1 = getY(numPos[num][0]) + rowHeight/2;
}
else {
x1 = getX(lapCur-1) + lapWidth/2;
y1 = getY(numPos[num][lapCur-1]) + rowHeight/2;
}
const x2 = getX(lapCur) + lapWidth/2;
const y2 = getY(numPos[num][lapCur]) + rowHeight/2;
return {'x1':x1, 'y1':y1, 'x2':x2, 'y2':y2, 'num':num};
}
let dBest = Number.MAX_VALUE;
for( let j = 0; j < lapsData[lap].length; ++j ) {
for( let lapCur = lap; lapCur < lap + 2; ++lapCur ) {
const segment = getSegment( lapCur, j );
if( segment !== null ) {
const dCur = pDistanceSquared( x, y, segment.x1, segment.y1, segment.x2, segment.y2 );
if( dCur < dBest ) {
dBest = dCur;
this.numSelect = segment.num;
}
}
}
}
break;
}
}
if( numSelectOld != this.numSelect )
this.draw();
}
this.onMouseMove = function( evt ) {
if( this.moveTimer ) {
if( this.numSelect ) {
this.numSelect = null;
this.draw();
}
clearTimeout( this.moveTimer );
}
let that = this;
this.moveTimer = setTimeout( function() { that.doMouseMove(evt); that.moveTimer=null; }, 25 );
}
this.init = function( canvas ) {
this.canvas = canvas;
let that = this;
this.canvas.addEventListener( 'mousemove', function(evt) {that.onMouseMove(evt);} );
}
this.getData = function() {
this.data = [];
this.lapsMax = 0;
for( let c = 0; c < catDetails.length; ++c ) {
const catDetail = catDetails[c];
const catName = catDetail.name;
if( catName === 'All' )
continue;
if( categoryCur !== 'All' && categoryCur !== catName )
continue;
let lapsData = [];
let numIndex = {};
let nums = [];
for( let p = 0; p < catDetail.pos.length; ++p ) {
const num = catDetail.pos[p];
if( num in numIndex )
continue;
const d = data[num];
const raceTimes = d['raceTimes'].slice(0);	
if( raceTimes.length === 0 )
continue
numIndex[num] = nums.length;
nums.push( num )
if( catDetail.catType != 'Start Wave' && raceTimes.length > 0 ) {
for( let j = 1; j < raceTimes.length; ++j )
raceTimes[j] -= raceTimes[0];
raceTimes[0] = 0;
}
for( let j = 1; j < raceTimes.length; ++j ) {
if( raceIsRunning && raceTimes[j] > t )
break;
while( lapsData.length < j )
lapsData.push( [] );
lapsData[j-1].push( {'raceTime':raceTimes[j], 'num':num, 'lapsDown':0} );
}
this.lapsMax = Math.max( this.lapsMax, raceTimes.length-1 );
}
for( let lap = 0; lap < lapsData.length; ++lap )
lapsData[lap].sort( function(x, y) { return x.raceTime - y.raceTime; } );
for( let lap = 0; lap < lapsData.length-1; ++lap ) {
for( let j = lapsData[lap].length-1; j > 0; --j ) {
for( let lapNext = lap+1; lapNext < lapsData.length && lapsData[lap][j].raceTime > lapsData[lapNext][0].raceTime; ++lapNext )
--lapsData[lap][j].lapsDown;
if( lapsData[lap][j] === 0 )
break;
}
}
let numPos = {};
for( let lap = 0; lap < lapsData.length; ++lap ) {
for( let pos = 0; pos < lapsData[lap].length; ++pos ) {
const num = lapsData[lap][pos].num;
if( num in numPos )
numPos[num].push( pos );
else
numPos[num] = [pos];
}
}
if( lapsData.length > 1 && nums.length > 1 )
this.data.push( {'lapsData': lapsData, 'numPos': numPos, 'nums': nums, 'catName':catName} );
}
}
this.draw = function() {
if( !this.canvas )
return;
let that = this;
this.getData();
if( this.data.length == 0 || this.lapsMax <= 1 ) {
this.canvas.height = 0;
return;
}
let primeLaps = {};
if( primes && primes.length > 0 ) {
let lapsMax = 0;
for( let c = 0; c < this.data.length; ++c ) {
lapsMax = Math.max( lapsMax, this.data[c].lapsData.length );
}
for( let i = 0; i < primes.length; ++i )
primeLaps[lapsMax-primes[i].lapsToGo-1] = true;
}
let rowsTotal = 0;
for( let c = 0; c < this.data.length; ++c ) {
rowsTotal += this.data[c].nums.length + 1.5 + 2;
}
let rowHeight = this.rowHeight;
this.canvas.height = rowHeight * rowsTotal;
const width = this.canvas.width;
let dc = this.canvas.getContext('2d');
dc.setTransform( 1, 0, 0, 1, 0, 0 );
for( let c = 0; c < this.data.length; ++c ) {
const lapsData = this.data[c].lapsData;
const numPos = this.data[c].numPos;
const nums = this.data[c].nums;
const rowTextFraction = 0.7;
const fontHeight = rowHeight * rowTextFraction;
dc.font = fontHeight + 'px Arial';
dc.translate( 0, rowHeight / 2 );
let yTop = rowHeight / 2;
dc.fillStyle = '#000000';
dc.textBaseline = 'middle';
dc.textAlign = 'left';
dc.fillText( this.data[c].catName, 0, rowHeight / 2 );
dc.translate( 0, rowHeight );
yTop += rowHeight;
let height = rowHeight * (nums.length + 2);
this.data[c].yTop = (c == 0 ? yTop : this.data[c-1].yTop + this.data[c-1].height + yTop);
this.data[c].height = height;
function getName( num ) {
const d = data[num];
let name = '';
if( d.LastName && d.FirstName ) name = d.LastName + ', ' + d.FirstName;
else if( d.LastName ) name = d.LastName;
else if( d.FirstName ) name = d.FirstName;
return name;
}
let numWidth = 0;
let nameWidth = 0;
for( let j = 0; j < nums.length; ++j ) {
const num = nums[j];
numWidth = Math.max( dc.measureText(''+num).width, numWidth );
nameWidth = Math.max( dc.measureText(getName(num)).width, nameWidth );
}
const paddingWidth = dc.measureText('  ').width;
nameWidth += paddingWidth;
const posWidth = dc.measureText(''+(nums.length+1) ).width + paddingWidth;
const swatchColWidth = rowHeight;
const xLeft = posWidth;
const xRight = width - (swatchColWidth + numWidth + nameWidth + posWidth);
this.data[c].xLeft = xLeft;
this.data[c].xRight = xRight;
const lapsWidth = xRight - xLeft;
const lapWidth = lapsWidth / lapsData.length;
this.data[c].lapWidth = lapWidth;
dc.clearRect(0, 0, width, height);
if( nums.length === 0 )
return;
height = rowHeight * (nums.length + 1);
dc.lineCap = 'butt';
dc.lineJoin = 'round';
dc.setLineDash( [] );
function getY(row) { return rowHeight * (row+1); }
function getX(lap) { return xLeft + lapWidth * lap; }
let hasPrimes = false;
dc.lineWidth = 1;
dc.fillStyle = this.primeColour;
for( let lap = 0; lap < lapsData.length; ++lap ) {
if( lap in primeLaps ) {
dc.fillRect( getX(lap), getY(0), lapWidth, getY(nums.length) - getY(0) );
hasPrimes = true;
}
}
let hasLapped = false;
dc.fillStyle = this.lappedBackgroundColour;
for( let lap = 0; lap < lapsData.length; ++lap ) {
for( let row = 0; row < lapsData[lap].length; ++row ) {
if( lapsData[lap][row].lapsDown !== 0 ) {
hasLapped = true;
for( ; row < nums.length; ++row )
dc.fillRect( getX(lap), getY(row), lapWidth, rowHeight );
}
}
}
dc.fillStyle = this.legendBackgroundColour;
dc.fillRect( 0, 0, width, rowHeight );
dc.fillRect( 0, getY(nums.length), width, rowHeight );
dc.fillRect( 0, 0, xLeft, height );
dc.fillRect( width - posWidth, 0, xLeft, height );
dc.fillStyle = '#FFFFFF';
dc.textBaseline = 'middle';
dc.textAlign = 'center';
for( let j = 0; j < nums.length; ++j ) {
dc.fillText( ''+(j+1), posWidth/2, getY(j) + rowHeight/2 );
if( data[nums[j]].status == 'Finisher' )
dc.fillText( ''+(j+1), width - posWidth/2, getY(j) + rowHeight/2 );
}
dc.lineWidth = 1;
dc.strokeStyle = this.lapLineColour;
for( let lap = 0; lap <= lapsData.length; ++lap ) {
dc.beginPath();
dc.moveTo( getX(lap), 0 );
dc.lineTo( getX(lap), height );
dc.stroke();
}
dc.fillStyle = dnfBackgroundColour;
for( let j = 0; j < nums.length; ++j ) {
const d = data[nums[j]];
if( nums[j] == this.numSelect ) {
dc.save();
dc.fillStyle = '#FFFF66';
dc.fillRect( xRight, getY(j), width-xRight-posWidth, rowHeight );
dc.restore();
}
else if( d.status !== 'Finisher' )
dc.fillRect( xRight, getY(j), width-xRight-posWidth, rowHeight );
}
dc.fillStyle = '#000000';
dc.textAlign = 'right';
let xText = width - nameWidth - posWidth;
for( let j = 0; j < nums.length; ++j )
dc.fillText( nums[j], xText, getY(j) + rowHeight/2 );
dc.textAlign = 'left';
xText =  width - nameWidth - posWidth + paddingWidth/2;
for( let j = 0; j < nums.length; ++j )
dc.fillText( getName(nums[j]), xText, getY(j) + rowHeight/2 );
function drawPath( j, colour ) {
var num = nums[j];
var path = numPos[num];
dc.strokeStyle = colour ? colour : that.lineColours[j % that.lineColours.length];
dc.setLineDash( [] );
dc.beginPath();
dc.moveTo( getX(0), getY(path[0])+rowHeight/2 );
dc.lineTo( getX(0) + lapWidth/2, getY(path[0])+rowHeight/2 );
var lap;
for( lap = 1; lap < path.length; ++lap )
dc.lineTo( getX(lap) + lapWidth/2, getY(path[lap])+rowHeight/2 );
var lap = path.length-1;
dc.stroke();
if( lap != lapsData.length-1 )
dc.setLineDash( [10, 5] );
dc.beginPath();
dc.moveTo( getX(lap) + lapWidth/2, getY(path[lap])+rowHeight/2 );
dc.quadraticCurveTo( getX(lap) + lapWidth/2, getY(j) + rowHeight/2, xRight+ + rowHeight/2, getY(j) + rowHeight/2 );
dc.stroke();
}
dc.lineWidth = this.regularLineWidth;
dc.lineCap = 'round';
let jSelect = null;
for( var j = nums.length - 1; j >= 0; --j ) {
if( nums[j] === this.numSelect )
jSelect = j;
drawPath( j );
}
if( jSelect !== null ) {
dc.lineWidth = this.selectedLineWidth + 4;
drawPath( jSelect, '#FFFF00' );
dc.lineWidth = this.selectedLineWidth;
drawPath( jSelect );
}
const swatchSize = rowHeight * rowTextFraction;
const swatchBorder = (rowHeight - swatchSize) / 2.0;
const swatchX = xRight + swatchBorder;
for( let j = 0; j < nums.length; ++j ) {
dc.fillStyle = this.lineColours[j % this.lineColours.length];
dc.fillRect( swatchX, getY(j) + swatchBorder, swatchSize, swatchSize );
}
const lapNumHeight = fontHeight;
dc.font = lapNumHeight*0.8 + 'px Arial';
dc.textAlign = 'center';
dc.textBaseline = 'bottom';
dc.lineWidth = 1;
dc.setLineDash( [] );
let xLast = width;
for( let lap = lapsData.length - 1; lap >= 0; --lap ) {
const sLap = ' ' + (raceIsFinished ? (lapsData.length-lap) : (lap+1) ) + ' ';
const tWidth = dc.measureText(sLap).width;
const xMiddle = getX(lap) + lapWidth/2;
if( xMiddle + tWidth / 2 > xLast )
continue;
const x = getX(lap) + lapWidth/2;
const y = getY(0) - lapNumHeight;
dc.beginPath()
dc.moveTo( x - tWidth/2, y );
dc.lineTo( x + tWidth/2, y );
dc.lineTo( x + tWidth/2, y + lapNumHeight );
dc.lineTo( x, y + lapNumHeight * 1.25 );
dc.lineTo( x - tWidth/2, y + lapNumHeight );
dc.closePath();
dc.fillStyle = '#FFFFFF';
dc.fill();
dc.strokeStyle = this.lapLabelBorderColour;
dc.stroke();
dc.fillStyle = '#000000';
dc.fillText( sLap, getX(lap) + lapWidth/2, getY(0) );
xLast = xMiddle - tWidth/2 - 2;
}
dc.font = fontHeight + 'px Arial';
dc.textAlign = 'left';
dc.textBaseline = 'middle';
let x = xRight;
if( hasLapped ) {
const s = _('Lapped') || 'Lapped';
x -= dc.measureText(s).width;
dc.fillStyle = '#000000';
dc.fillText( s, x, getY(nums.length) + rowHeight/2 );
x -= rowHeight * 1.2;
dc.fillStyle = this.lappedBackgroundColour;
dc.fillRect( x + swatchBorder, getY(nums.length) + swatchBorder, swatchSize, swatchSize );
x -= rowHeight;
}
if( hasPrimes ) {
const s = _('Prime') || 'Prime';
x -= dc.measureText(s).width;
dc.fillStyle = '#000000';
dc.fillText( s, x, getY(nums.length) + rowHeight/2 );
x -= rowHeight * 1.2;
dc.fillStyle = this.primeColour;
dc.fillRect( x + swatchBorder, getY(nums.length) + swatchBorder, swatchSize, swatchSize );
x -= rowHeight;
}
dc.translate( 0, height+rowHeight );
}
}
}
function SelectCategory( i ) {
categoryCur = categories[i];
let catButton = document.getElementById('idCat' + i);
if( catButton )
catButton.checked = true;
RefreshResultsTable();
if( animationObj != null )
animationObj.Refresh();
RefreshRaceChart();
SituationRefresh();
if( lapChartObj )
lapChartObj.draw();
}
function setCategory( catName ) {
const catNameDecode = decode_utf8( decodeURIComponent(catName) );
for( let i = 0; i < categories.length; ++i ) {
if( catName == categories[i] || catNameDecode == categories[i] ) {
SelectCategory( i );
return;
}
}
SelectCategory( 0 );
}
function StartAnimateRealtime() {
_initAnimation();
speedup = 1.0;
tMax = 999999;
setTimeout( NextFrame, 1000.0/framesPerSecond );
}
function StopAnimate() {
t = tMax;
}
function SuspendAnimate() {
suspendAnimation = true;
}
function IsAnimating() {
return !suspendAnimation && t < tMax;
}
function SetTime( aT ) {
t = aT;
if( animationObj != null )
animationObj.Refresh();
}
function SetSpeed( i ) {
animationSeconds = 90;
const factor = 0.65;
for( ; i < 0; ++i )
animationSeconds /= factor;
for( ; i > 0; --i )
animationSeconds *= factor;
Animate( animationSeconds, tMax, t );
}
function SetNumsToWatch() {
let numsToWatchText = document.getElementById('idNumsToWatch');
let numStr = numsToWatchText.value;
numStr = numStr.replace( / /g, ',' );
numStr = numStr.replace( /[^\d,]/g, '' );
numStr = numStr.replace( /,+/g, ',' );
numsToWatchText.value = numStr;
let nums = numStr.split(',');
numsToWatch = {};
for( let i = 0; i < nums.length; ++i ) {
const num = parseInt( nums[i], 10 );
if( !isNaN(num) )
numsToWatch[num] = num;
}
if( animationObj != null )
animationObj.Refresh();
RefreshResultsTable();
RefreshRaceChart();
SetSituationTime();
}
function ToggleNumberHighlight( num ) {
let numsToWatchText = document.getElementById('idNumsToWatch');
if( numsToWatch[num] == num )
{
let s = [];
for( let n in numsToWatch ) {
if( n != num )
s.push( n + '' );
}
numsToWatchText.value = s.join( ', ' );
}
else
numsToWatchText.value += (numsToWatchText.value ? ', ' : '') + num;
SetNumsToWatch();
}
function getStartTime() {
if( !data )
return 0.001;
let t = 9999999;
for( let num in data ) {
if( categoryCur == 'All' || data[num]['raceCat'] == categoryCur )
if( data[num]['raceTimes'][0] < t ) {
t = data[num]['raceTimes'][0];
}
}
t += 0.001;
return t;
}
function Rewind() {
if( raceIsRunning )
return;
t = getStartTime();
if( animationObj != null )
animationObj.Refresh();
document.getElementById('idPlayStop').innerHTML = _('Play');
Animate( animationSeconds, tMax, t );
suspendAnimation = true;
}
function PlayStop() {
if( raceIsRunning )
return;
if( IsAnimating() ) {
SuspendAnimate();
document.getElementById('idPlayStop').innerHTML = _('Play');
}
else {
Animate( animationSeconds, tMax, t );
document.getElementById('idPlayStop').innerHTML = _('Stop');
}
}
function rnd_normal()
{ return (Math.random()*2-1)+(Math.random()*2-1)+(Math.random()*2-1); }
function normal_variate( mean, stdev )
{ return rnd_normal()*stdev + mean; }
function rand_int( iMax )
{ if( iMax == null ) iMax = 100000000; return ~~(Math.random() * iMax); }
function rand_str() {
const iMax = rand_int(7) + 1;
let s = '';
for( var i = 0; i < iMax; ++i )
s += rand_int( 10 );
return s
}
function GenerateRandomData() {
const cats = ['Test Data Junior', 'Test Data Senior', 'Test Data Women'];
infoFields = ['LastName', 'FirstName', 'Name', 'Team', 'Category','License', ];
data = {};
for( let num = 100; num < 150; ++num ) {
const iCat = num % cats.length;
const cat = cats[iCat];
const mean = normal_variate(6.0,0.3);
let raceTimes = [60 * iCat];
for( let lap = 0; lap < 20; ++lap )
raceTimes.push( raceTimes.back() + normal_variate(mean, mean/20)*60.0 );
data[num] = { 'raceTimes': raceTimes, 'lastTime': raceTimes.back(), 'raceCat' : cat, 'status' : 'Finisher' };
data[num]['License']	= rand_str() + '';
data[num]['LastName']	= ["SAMPLE", "EXAMPLE", "DEMONSTRATION"][rand_int(3)];
data[num]['FirstName']	= ["John", "Peter", "Adam", "Kirk", "Vlad"][rand_int(5)];
data[num]['Team']		= ["Red", "Green", "Black"][rand_int(3)];
data[num]['flr'] = 1.0;
}
return data;
}
function getUrlParam( param, url ) {
param = param.replace(/([\[\](){}*?+^$.\\|])/g, "\\$1");
let regex = new RegExp("[?&]" + param + "=([^&#]*)");
url = url || decodeURIComponent(window.location.href);
let match = regex.exec(url);
return match ? match[1] : "";
}
function SetLapDataOption( opt ) {
lapDataOption = opt;
RefreshResultsTable();
}
function SetShowLaps() {
let showLaps = document.getElementById('idShowLaps');
showLapsFrequency = parseInt( showLaps.options[showLaps.selectedIndex].value, 10 );
RefreshResultsTable();
}
function ToggleCustomCategories() {
showCustomCategories = !showCustomCategories;
RefreshResultsTable();
}
function FormatDistance( distance, inUnit, showUnits ) {
if( (inUnit ? inUnit : 'km') != displayUnits )
distance *= (displayUnits == 'km' ? 1.609344 : 0.621371192237334);
let s = distance.toFixed(2);
if( showUnits )
s += ' ' + _(displayUnits);
return s;
}
function FormatSpeed( speed, inUnit, showUnits ) {
if( inUnit.substring(0,1) != displayUnits.substring(0,1) )
speed *= (displayUnits == 'km' ? 1.609344 : 0.621371192237334);
let s = speed.toFixed(2);
if( showUnits )
s += ' ' + (displayUnits == 'km' ? 'km/h' : 'mph');
return s;
}
function FormatDistanceGap( distance, inUnit ) {
if( inUnit != displayUnits )
distance *= (displayUnits == 'km' ? 1.609344 : 0.621371192237334);
let v = '';
if( displayUnits == 'km' ) {
if( Math.abs(distance) > 1.0 )
v = distance.toFixed(2) + ' km';
else
v = (distance*1000).toFixed(2) + ' m';
}
else {
if( Math.abs(distance) > 0.25 )
v = distance.toFixed(2) + ' ' + _('miles');
else if( Math.abs(distance) > 0.1 )
v = (distance * 1760).toFixed(1) + ' yds';
else
{
if( Math.abs(distance * 5280) < 3 )
v = (distance * 5280 * 12).toFixed(0) + ' in';
else
v = (distance * 5280).toFixed(1) + ' ft';
}
}
return v;
}
function SetDisplayUnits() {
let select = document.getElementById('idDisplayUnits');
displayUnits = select.options[select.selectedIndex].value;
RefreshResultsTable();
SetTotalElevationGain();
animationObj.widthLast = -1;
}
function LoopContinuously() {
loopContinuously ^= true;
}
function AdjustSize( increase ) {
if( !canvas )
return;
if( increase ) {
if( canvas.width < 4096 ) {
canvas.width *= 1.2;
canvas.height *= 1.2;
}
}
else {
if( canvas.width > 100 ) {
canvas.width /= 1.2;
canvas.height /= 1.2;
}
}
if( animationObj != null )
animationObj.Refresh();
}
function AdjustFont( increase ) {
if( !canvas || !animationObj )
return;
if( increase )
fontMult *= (fontMult < 3.0 ? 1.2 : 1.0);
else
fontMult /= (fontMult > 0.2 ? 1.2 : 1.0);
animationObj.Refresh();
}
function SetShowTrack() {
let select = document.getElementById('idShowTrack');
let track = select.options[select.selectedIndex].value;
if( track == 'gpx' && gpsPoints ) {
animationObj = new GeoAnimation();
animationObj.geoTrack.setData( gpsPoints );
animationObj.altigraph.setData( gpsAltigraph );
}
else
animationObj = new TrackAnimation();
animationObj.Refresh();
}
function ToggleTimeDecimals() {
let cb = document.getElementById('idShowTimeDecimals');
showTimeDecimals = cb.checked;
RefreshResultsTable();
}
var replaceHtmlEntites = (function() {
const translate_re = /&(nbsp|amp|quot|lt|gt);/g;
const translate = {
"nbsp": " ", 
"amp" : "and", 
"quot": "\"",
"lt"  : "<", 
"gt"  : ">"
};
return function( s ) {
return ( s.replace(translate_re, function(match, entity) { 
return translate[entity]; 
}) );
}
})();
function SetTotalElevationGain() {
//
//	if( gpsTotalElevationGain )
//	{
//		var units = (displayUnits == 'km' ? 'm' : ' ft');
//		var totalElevationGain = (displayUnits == 'km' ? 1.0 : 3.28084) * gpsTotalElevationGain;
//		document.getElementById('idTotalElevationGain').innerHTML = '<' + 'br/>' + totalElevationGain.toFixed(0) + units + ' Total Elevation Gain per Lap';
//	}
//	else
//		document.getElementById('idTotalElevationGain').innerHTML = '';
//
}
function setLanguage( langCode ) {
let langs = translations['languageCode'];
for( let i = 0; i < langs.length; ++i ) {
if( langs[i] == langCode ) {
langCur = i;
break;
}
}
if( langCur == null ) {
let browser_languages = navigator.languages ? navigator.languages : [(navigator.language || navigator.userLanguage || 'en')];
for( let b = 0; b < browser_languages.length && langCur == null; ++b ) {
const base_lang = browser_languages[b].split('-')[0];
for( let i = 0; i < langs.length; ++i ) {
if( base_lang == langs[i] ) {
langCur = i;
break;
}
}
}
}
if( langCur == null )
langCur = 0;
const textAttr = {
'#text':	'nodeValue',
'OPTION':	'text'
};
let elements = document.getElementsByTagName('*');
for( let i = 0; i < elements.length; ++i ) {
let e = elements[i];
trTag = e.getAttribute('data-tr');
if( trTag ) {
let tAttr = textAttr[e.nodeName];
if( !tAttr )
tAttr = 'innerHTML';
//alert( 'e.nodeName=' + e.nodeName + ' trTag="' + trTag + '" _(trTag)="' + _(trTag) + '" tAttr=' + tAttr + ' e.id=' + e.id );
e[tAttr] = _(trTag);
}
}
RefreshResultsTable();
SetTotalElevationGain();
SituationRefresh();
}
function getLanguageCode() {
return translations['languageCode'][langCur];
}
function initLanguages() {
const languages = translations['language'];
const languageCodes = translations['languageCode'];
langCur = (langCur || 0);
let iLang = [langCur];
for( let i = 0; i < languages.length; ++i )
if( i != langCur )
iLang.push( i );
let languageHTML = '<div id="buttongroup">';
for( let j = 0; j < languages.length; ++j )
{
let i = iLang[j];
languageHTML +=
'<label class="green">' +
'<input ' +
'type="radio" ' +
'name="languageSelect" ' +
'id="idLanguage' + i + '" ' +
'onClick="setLanguage(\''+languageCodes[i]+'\');" ' +
(i == langCur ? 'checked="true"': '') +
'/>' +
'<span>' + languages[i] + '</span>' +
'</input>' +
'</label>';
}
languageHTML += '</div><hr/>';
document.getElementById('idLanguages').innerHTML = languageHTML;
}
function SetSituationZoom( rbutton ) {
situationObj.zoom = parseFloat(rbutton.value);
SituationRefresh();
}
var situationTimer = null;
function SetSituationTime( value ) {
if( situationObj == null )
return;
if( value == undefined )
value = 10000;
value = parseInt( value );
if( situationTimer != null ) {
clearTimeout( situationTimer );
situationTimer = null;
}
let tMax;
if( raceIsRunning ) {
let tServer = (new Date(timestamp[0])).getTime() / 1000.0;
let tBrowser = (new Date().getTime()) / 1000.0;
while( tBrowser - tServer < 0 )
tBrowser += 60*60;
tMax = timestamp[1] + (tBrowser - tServer);
}
else
tMax = GetRaceTMax();
let tRace = tMax * (value / 10000.0);
let gs = GetSituationGaps( tRace );
situationObj.SetData( gs.gaps, gs.tAfterLeader, gs.title, gs.tCur );
if( value == 10000 && raceIsRunning )
situationTimer = setTimeout( SetSituationTime, 1001 - (new Date()).getTime() % 1000 );
}
function SituationRefresh() {
let timeRange = document.getElementById('idTimeRange');
SetSituationTime( timeRange.value );
}
function SetArrivalMode() {
arrivalMode = document.getElementById('idArrivalMode').checked;
RefreshResultsTable();
}
function SetMapMode() {
mapMode = document.getElementById('idMapMode').checked;
document.getElementById('idResultsDiv').className = (mapMode ? 'hidden' : '');
}
function SelectCategoryNonAll() {
if( categories.length <= 1 || (categoryCur && categoryCur != 'All') )
return;
let i;
for( i = 0; i < categories.length; ++i ) {
if( categoryCur == categories[i] )
break;
}
for( ;; ) {
if( ++i >= categories.length )
i = 0;
if( categories[i] != 'All' )
break;
}
SelectCategory( i );
}
function GetNextValidCategory() {
if( categories.length <= 1 )
return null;
let i;
for( i = 0; i < categories.length; ++i ) {
if( categoryCur == categories[i] )
break;
}
for( ;; ) {
if( ++i >= categories.length )
i = 0;
if( categories[i] != 'All' )
break;
}
return i;
}
var cycleCount = 0;
var cycleTimer = null;
function SetNextCategory() {
const i = GetNextValidCategory();
if( i == null )
return;
SelectCategory( i );
if( ++cycleCount % 12 == 0 )	
doReload();
}
function SetShowCategorySummary() {
showCategorySummary = document.getElementById('idShowCategorySummary').checked;
RefreshResultsTable();
}
function SetCycleCategoriesMode() {
cycleCategoriesMode = document.getElementById('idCycleCategoriesMode').checked;
clearInterval( cycleTimer );
if( cycleCategoriesMode )
cycleTimer = setInterval( SetNextCategory, 1000*15 );
}
function OpenGetDirections() {
const url = 'http://maps.google.com?daddr=' + courseCoordinates[1].toFixed(4) + ' ' + courseCoordinates[0].toFixed(4) + ' (' + raceName + ')';
window.open( url, null, null, true );
}
function createXMLHttpRequest() {
try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) {}
try { return new ActiveXObject("Microsoft.XMLHTTP"); } catch (e) {}
try { return new XMLHttpRequest(); } catch(e) {}
return null;
}
function TryAgain( error, responseText ) {
console.log( 'RefreshPayload: failure: "' + error + '".  Trying again in a few seconds...' );
if( responseText ) {
console.log( 'responseText:' );
console.log( responseText.slice(0, 256) + '...' );
}
else
console.log( 'No responseText.' );
setTimeout( RefreshPayload, Math.round(5000 + Math.random() * 3000) );
return true;
}
function eqTimestamp( ts1, ts2 ) {
return	( (ts1 && ts1.length > 0 ? ts1[0] : '') == (ts2 && ts2.length > 0 ? ts2[0] : '') ) &&
( (ts1 && ts1.length > 1 ? ts1[1] : -1) == (ts2 && ts2.length > 1 ? ts2[1] : -1) );
}
function RefreshPayload() {
let xhr = createXMLHttpRequest();
if( !xhr || window.location.href.substring(0,5) == 'file:')
return doReload(true);
let requestTimer = setTimeout( function() { xhr.abort(); }, 10*1000 );
xhr.onreadystatechange = function() {
if( xhr.readyState != 4 )
return;
clearTimeout( requestTimer )
if( xhr.status != 200 )
return TryAgain();
console.log( 'RefreshPayload: processing...' );
const startSearch = /\/\* !!! payload begin !!! \*\/[^{]+\{/g;
let result = startSearch.exec( xhr.responseText );
if( result == null ) return TryAgain( 'missing payload start', xhr.responseText );
let pStart = startSearch.lastIndex - 1;
const endSearch = /\}\s*;\s*\/\* !!! payload end !!! \*\//g;
result = endSearch.exec( xhr.responseText );
if( result == null ) return TryAgain( 'missing payload end', xhr.responseText );
let pEnd = result.index + 1;
let payloadJSON = xhr.responseText.substring(pStart, pEnd);
let payload = null;
try {
payload = JSON.parse(payloadJSON);
}
catch( e ) {
console.log( 'RefreshPayload: parse payload error: ' + e.message );
payload = null;
}
payloadJSON = null;
if( payload ) {
reloadTriggered = false;
if( eqTimestamp(timestamp, payload.timestamp) ) {
console.log( 'RefreshPayload: success: no change.' );
return;
}
raceWasRunning = raceIsRunning;
for( let v in payload )
window[v] = payload[v];
payload = null;
SetData( data, undefined );
SetRaceTime();
setLanguage( translations['languageCode'][langCur] );
setCategory( categoryCur );
RefreshResultsTable();
RefreshRaceChart();
SituationRefresh();
if( !raceIsRunning && raceWasRunning )
Animate( animationSeconds, undefined, getStartTime() );
console.log( 'RefreshPayload: success: new timestamp.' );
}
else
return TryAgain( 'payload extract fails', xhr.responseText );
}
xhr.open('GET', window.location.href);
xhr.send();
}
var finishUpdateTimer = null;
var queryPayloadTimer = null;
function QueryPayloadLoop() {
if( lastRaceTime == 0 ) {
console.log( 'QueryPayloadLoop:' );
RefreshPayload();
queryPayloadTimer = setTimeout( QueryPayload, (3 + Math.random()) * 60 * 1000 );
}
}
function SetRaceTime() {
let s = (organizer ? organizer : '');
if( finishUpdateTimer ) {
clearTimeout( finishUpdateTimer );
finishUpdateTimer = null;
}
if( queryPayloadTimer ) {
clearTimeout( queryPayloadTimer );
queryPayloadTimer = null;
}
if( timestamp )
{
var tServer = (new Date(timestamp[0]).getTime()) / 1000.0;
var tBrowser = (new Date().getTime()) / 1000.0;
while( tBrowser - tServer < 0 )
tBrowser += 60*60;
var tRace = timestamp[1] + (tBrowser - tServer);
if( tRace > 25*60*60 )
raceIsRunning = false;		
if( raceIsRunning )
{
t = tRace;
document.getElementById('idAnimateControls').className = 'hidden';
s += ' (race in progress, last updated ' + timestamp[0] + ')';
speedup = 1.0;
if( !isTimeTrial ) {
if( lastRaceTime > 0 )
finishUpdateTimer = setTimeout( function() {doReload(true); }, (Math.min(0, lastRaceTime - tRace) + 5*60) * 1000 );
else
queryPayloadTimer = setTimeout( QueryPayloadLoop, (3 + Math.random()) * 60 * 1000 );
}
}
else {
document.getElementById('idAnimateControls').className = '';
s += ' (' + '<span data-tr="created"></span> ' + timestamp[0] + ')';
}
}
document.getElementById('idOrganizer').innerHTML = s;
return s;
}
function displaySelect( select ) {
const k = (select.value.indexOf('kiosk') >= 0);
const a = (select.value.indexOf('arrival') >= 0);
const m = (select.value.indexOf('map') >= 0);
if( k || a || m ) {
let message;
if( k && a )
message = 'Switch to Kiosk Arrival Mode?';
else if( k && m )
message = 'Switch to Kiosk Map Mode?';
else
message = 'Switch to Kiosk Mode?';
if( !window.confirm(message) ) {
kioskMode = false;
arrivalMode = false;
mapMode = false;
select.selectedIndex = 0;
return;
}
}
kioskMode = k;
arrivalMode = a;
mapMode = m;
doReload( true );
}
function onLoad() {
if( payload ) { for( v in payload ) window[v] = payload[v]; payload = null; }
resultsDiv = document.getElementById('idResultsDiv');
showLaps = document.getElementById('idShowLaps');
if( data == null )
{
GenerateRandomData();
if( !gpsPoints )
gpsPoints = gpsPointsTest;
}
else
gpsPointsTest = null;
if( showCourseAnimation ) {
if( gpsPoints ) {
animationObj = new GeoAnimation();
animationObj.geoTrack.setData( gpsPoints );
animationObj.altigraph.setData( gpsAltigraph );
}
else {
animationObj = new TrackAnimation();
document.getElementById('idShowTrack').className = 'hidden';
}
}
else {
document.getElementById('idTrackDiv').className = 'hidden';
}
if( hideDetails )
document.getElementById('idShowDetailsOption').className = 'hidden';
if( !rfid )
document.getElementById('idRFID').className = 'hidden';
else
document.getElementById('idRFID').innerHTML = '<span data-tr="Chip Timing"></span>.';
if( !raceNotes )
document.getElementById('idRaceNotes').className = 'hidden';
else
document.getElementById('idRaceNotes').innerHTML = raceNotes.replace(/{-{/g, '<').replace(/}-}/g, '>');
if( !courseCoordinates ) {
document.getElementById('idCourseViewer').className = 'hidden';
document.getElementById('idGetDirections').className = 'hidden';
}
if( !courseViewerTemplate )
document.getElementById('idCourseViewer').className = 'hidden';
if( !travelMap )
document.getElementById('idTravelMap').className = 'hidden';
canvasSupported = isCanvasSupported();
if( canvasSupported && !winAndOut ) {
let raceChartCanvas = document.getElementById('idRaceChart');
raceChartCanvas.addEventListener('click', function(event) { RaceChartProcessClick(event); }, false);
raceChartCanvas.addEventListener('mousemove', function(event) { RaceChartProcessMouse(event); }, false);
raceChartCanvas.addEventListener('mouseout', function(event) {
if( hoverTimer != null )
clearTimeout( hoverTimer );
hoverTimer = null;
RefreshRaceChart();
},
false
);
if( !isTimeTrial ) {
let situationCanvas = document.getElementById('idSituation');
let timeRange = document.getElementById( 'idTimeRange' );
let situationDetail = document.getElementById( 'idSituationDetailDiv' );
situationObj = new Situation( situationCanvas, timeRange, situationDetail );
situationCanvas.addEventListener('click', function(event) { situationObj.processClick(event); }, false);
}
else
document.getElementById('idSituationDiv').className = 'hidden';
if( !showCourseAnimation || (isTimeTrial && raceIsRunning) )
document.getElementById('idTrackDiv').className = 'hidden';
else
canvas = document.getElementById('idTrack');
let lapChartCanvas = document.getElementById('idLapChart');
lapChartObj = new LapChart();
lapChartObj.init( lapChartCanvas );
}
else
{
document.getElementById('idTrackDiv').className = 'hidden';
document.getElementById('idRaceChartDiv').className = 'hidden';
document.getElementById('idSituationDiv').className = 'hidden';
document.getElementById('idLapChartDiv').className = 'hidden';
}
document.getElementById('idRaceName').innerHTML = document.getElementById('idTitle').innerHTML;
if( email ) {
document.getElementById('idEmail').href =
'mailto:' + email +
'?subject=' + replaceHtmlEntites(document.getElementById('idTitle').innerHTML);
}
SetRaceTime();
if( HasDisplayUnit(data) ) {
displayUnits = GetDistanceUnit( data );
document.getElementById('idDisplayUnits').selectedIndex = (displayUnits == 'km' ? 0 : 1);
}
else
document.getElementById('idShowUnits').style.display = 'none';
SetData( data, undefined );
showCategorySummary = (getUrlParam('showCategorySummary', undefined) == 't');
if( showCategorySummary )
document.getElementById('idShowCategorySummary').checked = true;
arrivalMode = (getUrlParam('arrivalMode', undefined) == 't');
if( arrivalMode )
document.getElementById('idArrivalMode').checked = true;
mapMode = (getUrlParam('mapMode', undefined) == 't');
if( mapMode )
document.getElementById('idMapMode').checked = true;
cycleCategoriesMode = (getUrlParam( 'cycleCategoriesMode', undefined ) == 't');
if( cycleCategoriesMode ) {
document.getElementById('idCycleCategoriesMode').checked = true;
SetCycleCategoriesMode();
}
kioskMode = (getUrlParam('kioskMode', undefined) == 't');
if( kioskMode ) {
document.getElementById('idRaceChartDiv').classList.add('hidden');
document.getElementById('idSituationDiv').classList.add('hidden');
document.getElementById('idLapChartDiv').classList.add('hidden');
document.getElementById('idPageHeader').classList.add('hidden');
document.getElementById('idResultOptions').classList.add('hidden');
if( mapMode ) {
document.getElementById('idResultsDiv').classList.add('hidden');
document.getElementById('idMapMode').checked = true;
}
else {
document.getElementById('idTrackDiv').classList.add('hidden');
}
document.getElementById('idCycleCategoriesMode').checked = cycleCategoriesMode = true;
document.getElementById('idShowCategorySummary').checked = showCategorySummary = true;
SetShowCategorySummary();
SetArrivalMode();
SetCycleCategoriesMode();		
}
let numbers = getUrlParam( 'highlight', undefined );
if( numbers != '' )
numsToWatchStr = numbers;
if( numsToWatchStr )
{
var numsToWatch = document.getElementById('idNumsToWatch');
numsToWatch.value = numbers;
SetNumsToWatch();
}
setCategory( getUrlParam('raceCat', undefined) );
setLanguage( getUrlParam('lang', undefined) );
initLanguages();
RefreshResultsTable();
RefreshRaceChart();
SetSituationTime();
Animate( animationSeconds, undefined, raceIsRunning ? t : getStartTime() );
document.getElementById('idPlayStop').innerHTML = _('Stop');
if( raceIsRunning )
setTimeout( RefreshPayload, 5*60*1000+10 );
document.getElementById('idDisplaySelect').selectedIndex = (kioskMode && arrivalMode ? 2 : kioskMode ? 1 : 0);
ResetWebSocket();
}
</script>
</head>
<body onload="onLoad()">
<div id="idPageHeader">
<p>
<table style="border-spacing: 8px;"><tr>
<td style="vertical-align: top;"><img alt="CrossMgr Logo" onclick="doReload();" style="cursor:pointer" id="idImgHeader" src="data:image/png;base64,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"/></td>
<td style="vertical-align: top;"><span id="idRaceName" onclick="doReload();" style="cursor:pointer">Cyclo-Cross Competition Results</span><br/><span data-tr="by"></span> <span id="idOrganizer">CrossMgr</span>
&nbsp;&nbsp;&nbsp;&nbsp;
<span class="noprint">
<a id="idEmail" href="mailto:helpful.organizer@great_race_organization.com?subject=CrossMgr+Results+Output"><span data-tr="Email Comments/Suggestions"></span></a>.
<br/>
<span data-tr="Powered by"></span> <a href="http://www.sites.google.com/site/crossmgrsoftware">CrossMgr</a>.
<span id="idRFID"></span>&nbsp;&nbsp;&nbsp;
<br/>
<button id="idGetDirections" onclick="OpenGetDirections()" data-tr="Get Directions"></button>&nbsp;&nbsp;
<button id="idCourseViewer" onclick="OpenCourseViewerWindow()" data-tr="Course Map"></button>&nbsp;&nbsp;
<button id="idTravelMap" onclick="OpenTravelMapWindow()" data-tr="Participant Map"></button>&nbsp;&nbsp;
<button onclick="doReload()" data-tr="Refresh"></button>&nbsp;&nbsp;&nbsp;
<select id="idDisplaySelect" onchange="displaySelect(this);">
<option value="normal" data-tr="Results">Results</option>
<option value="kiosk" data-tr="Kiosk">Kiosk</option>
<option value="kiosk-arrival" data-tr="Kiosk A">Kiosk A</option>
<option value="kiosk-map" data-tr="Kiosk Map">Kiosk Map</option>
</select>
<br/>
<input id="idCycleCategoriesMode" type="checkbox" class="hidden" onclick="SetCycleCategoriesMode()">
<label for="idCycleCategoriesMode" data-tr="CycleCategories" class="hidden"></label>&nbsp;&nbsp;
<input id="idShowCategorySummary" type="checkbox" class="hidden" onclick="SetShowCategorySummary()">
<label for="idShowCategorySummary" data-tr="ShowCategorySummary" class="hidden"></label>&nbsp;&nbsp;
<input id="idArrivalMode" type="checkbox" class="hidden" onclick="SetArrivalMode()">
<label for="idArrivalMode" id="idArrivalModeLabel" data-tr="ByFinishers" class="hidden"></label>
<input id="idMapMode" type="checkbox" class="hidden" onclick="SetMapMode()">
<label for="idMapMode" id="idMapModeLabel" data-tr="Map Only" class="hidden"></label>
</span>
</tr></table><span id="idReloadStatus"></span><span id="idRaceNotes"></span>
<p></p>
<div class="noprint" id="idLanguages"></div>
<p></p>
<div class="noprint" id="idCategories"></div>
<p></p>
</div> <!-- idPageHeader -->
<div id="idTrackDiv">
<canvas id="idTrack" width="600" height="300" class="noprint">
<a href="http://www.sites.google.com/site/crossmgrsoftware">CrossMgr</a> Competition Results requires support the HTML5 Canvas.<br/>
Please upgrade to a more recent browser version.<br/>
For Internet Explorer (IE), you need version 9.0 or higher.<br/><br/>
Current versions of Chrome, FireFox and Opera work fine.
</canvas>
<p class="noprint">
<span id="idAnimateControls">
<button id="idRewind" onClick="Rewind()"><span data-tr="Rewind"></span></button>
<button id="idPlayStop" onClick="PlayStop()"><span data-tr="Play"></span></button>
<input type="checkbox" id="idLoop" onClick="LoopContinuously()" checked>
<label for="idLoop" data-tr="Loop Continuously"></label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<label for=playbackSpeed data-tr="Playback Speed">: </label>
<input type="range" id="playbackSpeed" min="-9" value="0" max="3" step="1" oninput="SetSpeed(this.value)" onchange="SetSpeed(this.value)">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span data-tr="Size"></span>:
<button id="idIncreaseSize" onClick="AdjustSize(true)">+</button>
<button id="idDecreaseSize" onClick="AdjustSize(false)">-</button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span data-tr="Text"></span>:
<button id="idIncreaseFont" onClick="AdjustFont(true)">+</button>
<button id="idDecreaseFont" onClick="AdjustFont(false)">-</button>
</span>
</p>
<p class="noprint">
<span data-tr="Highlight Numbers"></span>:
<input type="text" id="idNumsToWatch" value="" onChange="SetNumsToWatch()">
<button><span data-tr="Apply"></span></button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<select class="noprint" id="idShowTrack" onChange="SetShowTrack()">
<option value="gpx" selected="selected" data-tr="GPX">GPX</option>
<option value="oval" data-tr="Track">Track</option>
</select>
</p>
</div> <!-- idTrackDiv -->
<div id="idResultOptions">
<p>
<span class="noprint" id="idShowUnits">
<span data-tr="Units:"></span>
<select class="noprint" id="idDisplayUnits" onChange="SetDisplayUnits()">
<option value="km" selected="selected">km</option>
<option value="miles" data-tr="miles">miles</option>
</select>
&nbsp;&nbsp;&nbsp;
</span>
<input class="noprint" type="checkbox" id="idShowTimeDecimals" onClick="ToggleTimeDecimals()">
<label for="idShowTimeDecimals" class="noprint" data-tr="Show 100s of Seconds"></label>
&nbsp;&nbsp;&nbsp;
<select class="noprint" id="idShowLaps" onChange="SetShowLaps()">
<option value="0" data-tr="Hide Lap Info">0</option>
<option value="1" selected="selected" data-tr="Show Every Lap">1</option>
<option value="2" data-tr="Show Every 2 Laps">2</option>
<option value="3" data-tr="Show Every 3 Laps">3</option>
<option value="5" data-tr="Show Every 5 Laps">5</option>
<option value="10" data-tr="Show Every 10 Laps">10</option>
<option value="15" data-tr="Show Every 15 Laps">15</option>
<option value="20" data-tr="Show Every 20 Laps">20</option>
<option value="25" data-tr="Show Every 25 Laps">25</option>
<option value="50" data-tr="Show Every 50 Laps">50</option>
<option value="100" data-tr="Show Every 100 Laps">100</option>
</select>
<span id="idTotalElevationGain"> </span>
</p>
<div class="noprint" id="idShowOptions"></div>
<br/>
</div>
<div id="idResultsDiv"></div>
<div id="idLapChartDiv" class="noprint">
<strong><span id="idLapChartName" data-tr="Race Position"></span></strong><br/>
<canvas id="idLapChart" width="1000" height="800">
<a href="http://www.sites.google.com/site/crossmgrsoftware">CrossMgr</a> Requires support for the HTML5 Canvas.<br/>
Please upgrade to a more recent browser version.<br/>
For Internet Explorer (IE), you need version 9.0 or higher.<br/><br/>
Current versions of Chrome, FireFox and Opera work fine.
</canvas>
</div><!-- idLapChartDiv -->
<div id="idRaceChartDiv" class="noprint">
<p>
<strong><span id="idRaceChartName" data-tr="Race Chart"></span></strong>&nbsp;&nbsp;&nbsp;&nbsp;
<span id="idShowStartOffsetOption">
<input type="checkbox" id="idShowStartOffsets" checked onClick="RefreshRaceChart()">
<label for="idShowStartOffsets" data-tr="Show Start Offsets"></label>
</span>
<span id="idShowLapTimesOption">
&nbsp;&nbsp;&nbsp;&nbsp;
<input type="checkbox" id="idShowLapTimes" onClick="RefreshRaceChart()">
<label for="idShowLapTimes" data-tr="Show Lap Times"></label>
</span>
<span id="idShowDetailsOption">
&nbsp;&nbsp;&nbsp;&nbsp;
<input type="checkbox" id="idShowDetails" onClick="RefreshRaceChart()">
<label for="idShowDetails" data-tr="Show Details"></label>
</span>
</p>
<canvas id="idRaceChart" width="1000" height="800">
<a href="http://www.sites.google.com/site/crossmgrsoftware">CrossMgr</a> Requires support for the HTML5 Canvas.<br/>
Please upgrade to a more recent browser version.<br/>
For Internet Explorer (IE), you need version 9.0 or higher.<br/><br/>
Current versions of Chrome, FireFox and Opera work fine.
</canvas>
</div> <!-- idRaceChartDiv -->
<div id="idSituationDiv" class="noprint">
<hr>
<p>
<strong><span id="idSituationName" data-tr="Situation"></span></strong>
</p>
<table><tr>
<td style="vertical-align:top; text-align:center;">
<br/><br/><br/><br/>
<span data-tr="Zoom"></span><br/>
+<br/>
<input type="radio" name="zoom" value="5.0" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="4.5" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="4.0" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="3.5" checked onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="3.0" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="2.5" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="2.0" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="1.5" onclick="SetSituationZoom(this)"><br/>
<input type="radio" name="zoom" value="1.0" checked onclick="SetSituationZoom(this)"><br/>
-<br/>
</td>
<td style="vertical-align: top;">
<span data-tr="TimeSlider"></span>&nbsp;&nbsp;&nbsp;<input id="idTimeRange" type="range" min="0" max="10000" value="10000" style="width:670px;" oninput="SetSituationTime(this.value)" onchange="SetSituationTime(this.value)"><br/>
<canvas id="idSituation" width="800" height="600">
<a href="http://www.sites.google.com/site/crossmgrsoftware">CrossMgr</a> Requires support for the HTML5 Canvas.<br/>
Please upgrade to a more recent browser version.<br/>
For Internet Explorer (IE), you need version 9.0 or higher.<br/><br/>
Current versions of Chrome, FireFox and Opera work fine.
</canvas>
</td>
<td style="vertical-align: top;">
<div id="idSituationDetailDiv"></div>
</td>
</tr></table>
</div> <!-- idSituationDiv -->
</body>
</html>
